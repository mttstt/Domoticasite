{"version":3,"file":"/app.js","sources":["meteor://ðŸ’»app/lib/object_utils.js","meteor://ðŸ’»app/lib/string_utils.js","meteor://ðŸ’»app/both/collections/caldaia.js","meteor://ðŸ’»app/both/collections/cronotermostato.js","meteor://ðŸ’»app/both/collections/rangetemp.js","meteor://ðŸ’»app/both/collections/sensori.js","meteor://ðŸ’»app/both/collections/watt.js","meteor://ðŸ’»app/server/collections/caldaia.js","meteor://ðŸ’»app/server/collections/cronotermostato.js","meteor://ðŸ’»app/server/collections/rangetemp.js","meteor://ðŸ’»app/server/collections/sensori.js","meteor://ðŸ’»app/server/collections/watt.js","meteor://ðŸ’»app/server/controllers/router.js","meteor://ðŸ’»app/server/methods/caldaia.js","meteor://ðŸ’»app/server/methods/cronotermostato.js","meteor://ðŸ’»app/server/methods/rangetemp.js","meteor://ðŸ’»app/server/methods/sensori.js","meteor://ðŸ’»app/server/methods/watt.js","meteor://ðŸ’»app/server/publish/caldaia.js","meteor://ðŸ’»app/server/publish/cronotermostato.js","meteor://ðŸ’»app/server/publish/rangetemp.js","meteor://ðŸ’»app/server/publish/sensori.js","meteor://ðŸ’»app/server/publish/watt.js","meteor://ðŸ’»app/server/server.js"],"names":["getPropertyValue","propertyName","obj","props","split","res","i","length","deepen","o","oo","t","parts","part","k","key","pop","shift","exportArrayOfObjects","data","exportFields","fileType","str","tmp","_","each","doc","field","push","JSON","stringify","columnSeparator","String","fromCharCode","value","replace","mergeObjects","target","source","property","hasOwnProperty","sourceProperty","a","l","arguments","escapeRegEx","string","replaceSubstrings","find","RegExp","joinStrings","stringArray","join","sep","convertToSlug","text","toString","toLowerCase","Caldaia","Mongo","Collection","userCanInsert","userId","userCanUpdate","Users","isInRoles","userCanRemove","Schemas","SimpleSchema","statoriscaldamento","label","type","Boolean","optional","statotermostato","statocaldaia","sensoretermostato","timescheduler","Number","defaultValue","isteresi","decimal","attachSchema","Cronotermostato","day","h001","h012","h023","h034","h045","h056","h067","h078","h089","h0910","h1011","h1112","h1213","h1314","h1415","h1516","h1617","h1718","h1819","h1920","h2021","h2122","h2223","h2324","dayofweek","Rangetemp","grado","Sensori","ip","location","note","tipo","temp","hum","active","on","Watt","pulsearr","Object","blackbox","solararr","allow","insert","update","fields","modifier","remove","before","createdAt","Date","createdBy","modifiedAt","modifiedBy","ownerId","fieldNames","options","$set","upsert","selector","after","Router","map","Meteor","methods","Error","id","findOne","_id","publish","caldaiaId","ready","sort","cronotermostatoId","sensoreId","dayId","verifyEmail","Accounts","config","sendVerificationEmail","startup","settings","env","isObject","variableName","process","loginServiceConfiguration","oauth","google","service","settingsObject","github","linkedin","facebook","twitter","meteor","csvpath","csvpathwin","fs","require","console","log","OS","find_sensor","base","index","oldip","row","response","HTTP","get","Sensors","TaskName","e","count","VariantSensoriSchema","Raspberry","WIRINGPI_GPIOMEM","wpi","module","watch","v","sensorLib","setup","GpioPin","sensorType","initialize","exit","switchOnOff","onoff","state","win","pinMode","OUTPUT","digitalWrite","cron_read_sensor","Humidity","Temperature","readout","read","temperature","toFixed","humidity","cron_cronotermostato","today","moment","format","hournow","temphour","parseInt","temprilevata","termostato","observeChanges","changed","s","SyncedCron","nextScheduledAtDate","add","name","schedule","parser","recur","every","second","job","added","cronotermostato","riscaldamento","cron_watt_after","now","matrix","csvfs","existsSync","readFileSync","x","unix","y","slice","solar","multi","pulse","Total","date","ytmp","b","x0","y0","sx","sy","forEach","p","x1","y1","deltat","Math","round","KwFull","cron_watt","floor","setTimeout","watt","minute","start","isAdmin","userOptions","username","email","password","profile","createUser","keys","roles","userData","emails","mail","address","setPassword","unblock","Email","send","onCreateUser","user","indexOf","validateLoginAttempt","info","isInRole","verified","services","accessToken","GitHub","version","timeout","authenticate","token","result","getEmails","findWhere","primary","isString","emailAddress","firstName","lastName","onLogin","urls","resetPassword","absoluteUrl"],"mappings":"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","sourcesContent":["/*\r\n   Returns property value, where property name is given as path.\r\n\r\n   Example:\r\n\r\n       getPropertyValue(\"x.y.z\", { x: { y: { z: 123 } } }); // returns 123\r\n*/\r\n\r\nthis.getPropertyValue = function(propertyName, obj) {\r\n\tvar props = propertyName.split(\".\");\r\n\tvar res = obj;\r\n\tfor(var i = 0; i < props.length; i++) {\r\n\t\tres = res[props[i]];\r\n\t\tif(typeof res == \"undefined\") {\r\n\t\t\treturn res;\r\n\t\t}\r\n\t}\r\n\treturn res;\r\n};\r\n\r\n\r\n/* \r\n   converts properties in format { \"x.y\": \"z\" } to { x: { y: \"z\" } }\r\n*/\r\n\r\nthis.deepen = function(o) {\r\n\tvar oo = {}, t, parts, part;\r\n\tfor (var k in o) {\r\n\t\tt = oo;\r\n\t\tparts = k.split('.');\r\n\t\tvar key = parts.pop();\r\n\t\twhile (parts.length) {\r\n\t\t\tpart = parts.shift();\r\n\t\t\tt = t[part] = t[part] || {};\r\n\t\t}\r\n\t\tt[key] = o[k];\r\n\t}\r\n\treturn oo;\r\n};\r\n\r\n/*\r\n\tFunction converts array of objects to csv, tsv or json string\r\n\r\n\texportFields: list of object keys to export (array of strings)\r\n\tfileType: can be \"json\", \"csv\", \"tsv\" (string)\r\n*/\r\n\r\nthis.exportArrayOfObjects = function(data, exportFields, fileType) {\r\n\tdata = data || [];\r\n\tfileType = fileType || \"csv\";\r\n\texportFields = exportFields || [];\r\n\r\n\tvar str = \"\";\r\n\t// export to JSON\r\n\tif(fileType == \"json\") {\r\n\r\n\t\tvar tmp = [];\r\n\t\t_.each(data, function(doc) {\r\n\t\t\tvar obj = {};\r\n\t\t\t_.each(exportFields, function(field) {\r\n\t\t\t\tobj[field] = doc[field];\r\n\t\t\t});\r\n\t\t\ttmp.push(obj);\r\n\t\t});\r\n\r\n\t\tstr = JSON.stringify(tmp);\r\n\t}\r\n\r\n\t// export to CSV or TSV\r\n\tif(fileType == \"csv\" || fileType == \"tsv\") {\r\n\t\tvar columnSeparator = \"\";\r\n\t\tif(fileType == \"csv\") {\r\n\t\t\tcolumnSeparator = \",\";\r\n\t\t}\r\n\t\tif(fileType == \"tsv\") {\r\n\t\t\t// \"\\t\" object literal does not transpile correctly to coffeesctipt\r\n\t\t\tcolumnSeparator = String.fromCharCode(9);\r\n\t\t}\r\n\r\n\t\t_.each(exportFields, function(field, i) {\r\n\t\t\tif(i > 0) {\r\n\t\t\t\tstr = str + columnSeparator;\r\n\t\t\t}\r\n\t\t\tstr = str + \"\\\"\" + field + \"\\\"\";\r\n\t\t});\r\n\t\t//\\r does not transpile correctly to coffeescript\r\n\t\tstr = str + String.fromCharCode(13) + \"\\n\";\r\n\r\n\t\t_.each(data, function(doc) {\r\n\t\t\t_.each(exportFields, function(field, i) {\r\n\t\t\t\tif(i > 0) {\r\n\t\t\t\t\tstr = str + columnSeparator;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar value = getPropertyValue(field, doc) + \"\";\r\n\t\t\t\tvalue = value.replace(/\"/g, '\"\"');\r\n\t\t\t\tif(typeof(value) == \"undefined\")\r\n\t\t\t\t\tstr = str + \"\\\"\\\"\";\r\n\t\t\t\telse\r\n\t\t\t\t\tstr = str + \"\\\"\" + value + \"\\\"\";\r\n\t\t\t});\r\n\t\t\t//\\r does not transpile correctly to coffeescript\r\n\t\t\tstr = str + String.fromCharCode(13) + \"\\n\";\r\n\t\t});\r\n\t}\r\n\r\n\treturn str;\r\n};\r\n\r\n\r\nthis.mergeObjects = function(target, source) {\r\n\r\n\t/* Merges two (or more) objects,\r\n\tgiving the last one precedence */\r\n\r\n\tif(typeof target !== \"object\") {\r\n\t\ttarget = {};\r\n\t}\r\n\r\n\tfor(var property in source) {\r\n\r\n\t\tif(source.hasOwnProperty(property)) {\r\n\r\n\t\t\tvar sourceProperty = source[ property ];\r\n\r\n\t\t\tif(typeof sourceProperty === 'object') {\r\n\t\t\t\ttarget[property] = mergeObjects(target[property], sourceProperty);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\ttarget[property] = sourceProperty;\r\n\t\t}\r\n\t}\r\n\r\n\tfor(var a = 2, l = arguments.length; a < l; a++) {\r\n\t\tmergeObjects(target, arguments[a]);\r\n\t}\r\n\r\n\treturn target;\r\n};\r\n","this.escapeRegEx = function (string) {\r\n\treturn string.replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, \"\\\\$1\");\r\n}\r\n\r\nthis.replaceSubstrings = function(string, find, replace) {\r\n\treturn string.replace(new RegExp(escapeRegEx(find), 'g'), replace);\r\n};\r\n\r\nthis.joinStrings = function(stringArray, join) {\r\n\tvar sep = join || \", \";\r\n\tvar res = \"\";\r\n\t_.each(stringArray, function(str) {\r\n\t\tif(str) {\r\n\t\t\tif(res)\r\n\t\t\t\tres = res + sep;\r\n\t\t\tres = res + str;\r\n\t\t}\t\t\r\n\t});\r\n\treturn res;\r\n};\r\n\r\nthis.convertToSlug = function(text) {\r\n  return text.toString().toLowerCase()\r\n    .replace(/\\s+/g, '-')           // Replace spaces with -\r\n    .replace(/[^\\w\\-]+/g, '')       // Remove all non-word chars\r\n    .replace(/\\-\\-+/g, '-')         // Replace multiple - with single -\r\n    .replace(/^-+/, '')             // Trim - from start of text\r\n    .replace(/-+$/, '');            // Trim - from end of text\r\n};\r\n","this.Caldaia = new Mongo.Collection(\"caldaia\");\r\n\r\nthis.Caldaia.userCanInsert = function(userId, doc) {\r\n\treturn true;\r\n};\r\n\r\nthis.Caldaia.userCanUpdate = function(userId, doc) {\r\n\treturn userId && Users.isInRoles(userId, [\"admin\",\"user\"]);\r\n};\r\n\r\nthis.Caldaia.userCanRemove = function(userId, doc) {\r\n\treturn true;\r\n};\r\n\nthis.Schemas = this.Schemas || {};\r\n\r\nthis.Schemas.Caldaia = new SimpleSchema({\n\tstatoriscaldamento: {\n\t\tlabel: \"Stato Riscaldamento\",\n\t\ttype: Boolean,\n\t\toptional: true\n\t},\n\tstatotermostato: {\n\t\tlabel: \"Stato del Termostato\",\n\t\ttype: Boolean,\n\t\toptional: true\n\t},\n\tstatocaldaia: {\n\t\tlabel: \"Stato della Caldaia\",\n\t\ttype: Boolean,\n\t\toptional: true\n\t},\n\tsensoretermostato: {\n\t\tlabel: \"Sensore utilizzato dal termostato\",\n\t\ttype: String,\n\t\toptional: true\n\t},\n\ttimescheduler: {\n\t\tlabel: \"Intervallo letture\",\n\t\ttype: Number,\n\t\toptional: true,\n\t\tdefaultValue: 60\n\t},\n\tisteresi: {\n\t\tlabel: \"Isteresi\",\n\t\ttype: Number,\n\t\tdecimal: true,\n\t\toptional: true,\n\t\tdefaultValue: 0\n\t}\n});\r\n\r\nthis.Caldaia.attachSchema(this.Schemas.Caldaia);\r\n","this.Cronotermostato = new Mongo.Collection(\"cronotermostato\");\r\n\r\nthis.Cronotermostato.userCanInsert = function(userId, doc) {\r\n\treturn Users.isInRoles(userId, [\"admin\",\"user\"]);\r\n};\r\n\r\nthis.Cronotermostato.userCanUpdate = function(userId, doc) {\r\n\treturn userId && Users.isInRoles(userId, [\"admin\",\"user\"]);\r\n};\r\n\r\nthis.Cronotermostato.userCanRemove = function(userId, doc) {\r\n\treturn true;\r\n};\r\n\nthis.Schemas = this.Schemas || {};\r\n\r\nthis.Schemas.Cronotermostato = new SimpleSchema({\n\tday: {\n\t\ttype: String,\n\t\toptional: true\n\t},\n\th001: {\n\t\tlabel: \"00-01\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th012: {\n\t\tlabel: \"01-02\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th023: {\n\t\tlabel: \"02-03\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th034: {\n\t\tlabel: \"03-04\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th045: {\n\t\tlabel: \"04-05\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th056: {\n\t\tlabel: \"05-06\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th067: {\n\t\tlabel: \"06-07\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th078: {\n\t\tlabel: \"07-08\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th089: {\n\t\tlabel: \"08-09\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th0910: {\n\t\tlabel: \"09-10\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th1011: {\n\t\tlabel: \"10-11\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th1112: {\n\t\tlabel: \"11-12\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th1213: {\n\t\tlabel: \"12-13\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th1314: {\n\t\tlabel: \"13-14\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th1415: {\n\t\tlabel: \"14-15\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th1516: {\n\t\tlabel: \"15-16\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th1617: {\n\t\tlabel: \"16-17\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th1718: {\n\t\tlabel: \"17-18\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th1819: {\n\t\tlabel: \"18-19\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th1920: {\n\t\tlabel: \"19-20\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th2021: {\n\t\tlabel: \"20-21\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th2122: {\n\t\tlabel: \"21-22\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th2223: {\n\t\tlabel: \"22-23\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th2324: {\n\t\tlabel: \"23-24\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\tdayofweek: {\n\t\tlabel: \"dayofweek\",\n\t\ttype: Number\n\t}\n});\r\n\r\nthis.Cronotermostato.attachSchema(this.Schemas.Cronotermostato);\r\n","this.Rangetemp = new Mongo.Collection(\"rangetemp\");\r\n\r\nthis.Rangetemp.userCanInsert = function(userId, doc) {\r\n\treturn true;\r\n};\r\n\r\nthis.Rangetemp.userCanUpdate = function(userId, doc) {\r\n\treturn true;\r\n};\r\n\r\nthis.Rangetemp.userCanRemove = function(userId, doc) {\r\n\treturn true;\r\n};\r\n\nthis.Schemas = this.Schemas || {};\r\n\r\nthis.Schemas.Rangetemp = new SimpleSchema({\n\tgrado: {\n\t\tlabel: \"grado\",\n\t\ttype: Number,\n\t\toptional: true\n\t}\n});\r\n\r\nthis.Rangetemp.attachSchema(this.Schemas.Rangetemp);\r\n","this.Sensori = new Mongo.Collection(\"sensori\");\r\n\r\nthis.Sensori.userCanInsert = function(userId, doc) {\r\n\treturn Users.isInRoles(userId, [\"admin\",\"user\"]);\r\n};\r\n\r\nthis.Sensori.userCanUpdate = function(userId, doc) {\r\n\treturn userId && Users.isInRoles(userId, [\"admin\",\"user\"]);\r\n};\r\n\r\nthis.Sensori.userCanRemove = function(userId, doc) {\r\n\treturn userId && Users.isInRoles(userId, [\"admin\"]);\r\n};\r\n\nthis.Schemas = this.Schemas || {};\r\n\r\nthis.Schemas.Sensori = new SimpleSchema({\n\tip: {\n\t\tlabel: \"IP\",\n\t\ttype: String\n\t},\n\tlocation: {\n\t\tlabel: \"Location\",\n\t\ttype: String,\n\t\toptional: true\n\t},\n\tnote: {\n\t\tlabel: \"Note\",\n\t\ttype: String,\n\t\toptional: true\n\t},\n\ttipo: {\n\t\tlabel: \"Tipo\",\n\t\ttype: String,\n\t\toptional: true\n\t},\n\ttemp: {\n\t\tlabel: \"Temperature\",\n\t\ttype: Number,\n\t\tdecimal: true,\n\t\toptional: true\n\t},\n\thum: {\n\t\tlabel: \"Humidity\",\n\t\ttype: Number,\n\t\tdecimal: true,\n\t\toptional: true\n\t},\n\tactive: {\n\t\tlabel: \"Attivo?\",\n\t\ttype: Boolean,\n\t\toptional: true\n\t},\n\ttimescheduler: {\n\t\tlabel: \"Schedulazione lettura dati  (secondi)\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\ton: {\n\t\tlabel: \"Acceso?\",\n\t\ttype: Boolean,\n\t\toptional: true\n\t}\n});\r\n\r\nthis.Sensori.attachSchema(this.Schemas.Sensori);\r\n","this.Watt = new Mongo.Collection(\"watt\");\r\n\r\nthis.Watt.userCanInsert = function(userId, doc) {\r\n\treturn true;\r\n};\r\n\r\nthis.Watt.userCanUpdate = function(userId, doc) {\r\n\treturn true;\r\n};\r\n\r\nthis.Watt.userCanRemove = function(userId, doc) {\r\n\treturn true;\r\n};\r\n\nthis.Schemas = this.Schemas || {};\r\n\r\nthis.Schemas.Watt = new SimpleSchema({\n\tday: {\n\t\tlabel: \"day\",\n\t\ttype: String,\n\t\toptional: true\n\t},\n\tpulsearr: {\n\t\tlabel: \"pulsearr\",\n\t\ttype: [Object],\n\t\tblackbox: true,\n\t\toptional: true\n\t},\n\tsolararr: {\n\t\tlabel: \"solararr\",\n\t\ttype: [Object],\n\t\tblackbox: true,\n\t\toptional: true\n\t}\n});\r\n\r\nthis.Watt.attachSchema(this.Schemas.Watt);\r\n","Caldaia.allow({\r\n\tinsert: function (userId, doc) {\r\n\t\treturn Caldaia.userCanInsert(userId, doc);\r\n\t},\r\n\r\n\tupdate: function (userId, doc, fields, modifier) {\r\n\t\treturn Caldaia.userCanUpdate(userId, doc);\r\n\t},\r\n\r\n\tremove: function (userId, doc) {\r\n\t\treturn Caldaia.userCanRemove(userId, doc);\r\n\t}\r\n});\r\n\nCaldaia.before.insert(function(userId, doc) {\r\n\tdoc.createdAt = new Date();\r\n\tdoc.createdBy = userId;\r\n\tdoc.modifiedAt = doc.createdAt;\r\n\tdoc.modifiedBy = doc.createdBy;\r\n\r\n\t\n\tif(!doc.ownerId) doc.ownerId = userId;\r\n});\r\n\r\nCaldaia.before.update(function(userId, doc, fieldNames, modifier, options) {\r\n\tmodifier.$set = modifier.$set || {};\r\n\tmodifier.$set.modifiedAt = new Date();\r\n\tmodifier.$set.modifiedBy = userId;\r\n\r\n\t\r\n});\r\n\r\nCaldaia.before.upsert(function(userId, selector, modifier, options) {\r\n\tmodifier.$set = modifier.$set || {};\r\n\tmodifier.$set.modifiedAt = new Date();\r\n\tmodifier.$set.modifiedBy = userId;\r\n\r\n\t/*BEFORE_UPSERT_CODE*/\r\n});\r\n\r\nCaldaia.before.remove(function(userId, doc) {\r\n\t\r\n});\r\n\r\nCaldaia.after.insert(function(userId, doc) {\r\n\t\r\n});\r\n\r\nCaldaia.after.update(function(userId, doc, fieldNames, modifier, options) {\r\n\t\r\n});\r\n\r\nCaldaia.after.remove(function(userId, doc) {\r\n\t\r\n});\r\n","Cronotermostato.allow({\r\n\tinsert: function (userId, doc) {\r\n\t\treturn Cronotermostato.userCanInsert(userId, doc);\r\n\t},\r\n\r\n\tupdate: function (userId, doc, fields, modifier) {\r\n\t\treturn Cronotermostato.userCanUpdate(userId, doc);\r\n\t},\r\n\r\n\tremove: function (userId, doc) {\r\n\t\treturn Cronotermostato.userCanRemove(userId, doc);\r\n\t}\r\n});\r\n\nCronotermostato.before.insert(function(userId, doc) {\r\n\tdoc.createdAt = new Date();\r\n\tdoc.createdBy = userId;\r\n\tdoc.modifiedAt = doc.createdAt;\r\n\tdoc.modifiedBy = doc.createdBy;\r\n\r\n\t\n\tif(!doc.ownerId) doc.ownerId = userId;\r\n});\r\n\r\nCronotermostato.before.update(function(userId, doc, fieldNames, modifier, options) {\r\n\tmodifier.$set = modifier.$set || {};\r\n\tmodifier.$set.modifiedAt = new Date();\r\n\tmodifier.$set.modifiedBy = userId;\r\n\r\n\t\r\n});\r\n\r\nCronotermostato.before.upsert(function(userId, selector, modifier, options) {\r\n\tmodifier.$set = modifier.$set || {};\r\n\tmodifier.$set.modifiedAt = new Date();\r\n\tmodifier.$set.modifiedBy = userId;\r\n\r\n\t/*BEFORE_UPSERT_CODE*/\r\n});\r\n\r\nCronotermostato.before.remove(function(userId, doc) {\r\n\t\r\n});\r\n\r\nCronotermostato.after.insert(function(userId, doc) {\r\n\t\r\n});\r\n\r\nCronotermostato.after.update(function(userId, doc, fieldNames, modifier, options) {\r\n\t\r\n});\r\n\r\nCronotermostato.after.remove(function(userId, doc) {\r\n\t\r\n});\r\n","Rangetemp.allow({\r\n\tinsert: function (userId, doc) {\r\n\t\treturn Rangetemp.userCanInsert(userId, doc);\r\n\t},\r\n\r\n\tupdate: function (userId, doc, fields, modifier) {\r\n\t\treturn Rangetemp.userCanUpdate(userId, doc);\r\n\t},\r\n\r\n\tremove: function (userId, doc) {\r\n\t\treturn Rangetemp.userCanRemove(userId, doc);\r\n\t}\r\n});\r\n\nRangetemp.before.insert(function(userId, doc) {\r\n\tdoc.createdAt = new Date();\r\n\tdoc.createdBy = userId;\r\n\tdoc.modifiedAt = doc.createdAt;\r\n\tdoc.modifiedBy = doc.createdBy;\r\n\r\n\t\n\tif(!doc.createdBy) doc.createdBy = userId;\r\n});\r\n\r\nRangetemp.before.update(function(userId, doc, fieldNames, modifier, options) {\r\n\tmodifier.$set = modifier.$set || {};\r\n\tmodifier.$set.modifiedAt = new Date();\r\n\tmodifier.$set.modifiedBy = userId;\r\n\r\n\t\r\n});\r\n\r\nRangetemp.before.upsert(function(userId, selector, modifier, options) {\r\n\tmodifier.$set = modifier.$set || {};\r\n\tmodifier.$set.modifiedAt = new Date();\r\n\tmodifier.$set.modifiedBy = userId;\r\n\r\n\t/*BEFORE_UPSERT_CODE*/\r\n});\r\n\r\nRangetemp.before.remove(function(userId, doc) {\r\n\t\r\n});\r\n\r\nRangetemp.after.insert(function(userId, doc) {\r\n\t\r\n});\r\n\r\nRangetemp.after.update(function(userId, doc, fieldNames, modifier, options) {\r\n\t\r\n});\r\n\r\nRangetemp.after.remove(function(userId, doc) {\r\n\t\r\n});\r\n","Sensori.allow({\r\n\tinsert: function (userId, doc) {\r\n\t\treturn Sensori.userCanInsert(userId, doc);\r\n\t},\r\n\r\n\tupdate: function (userId, doc, fields, modifier) {\r\n\t\treturn Sensori.userCanUpdate(userId, doc);\r\n\t},\r\n\r\n\tremove: function (userId, doc) {\r\n\t\treturn Sensori.userCanRemove(userId, doc);\r\n\t}\r\n});\r\n\nSensori.before.insert(function(userId, doc) {\r\n\tdoc.createdAt = new Date();\r\n\tdoc.createdBy = userId;\r\n\tdoc.modifiedAt = doc.createdAt;\r\n\tdoc.modifiedBy = doc.createdBy;\r\n\r\n\t\n\tif(!doc.createdBy) doc.createdBy = userId;\r\n});\r\n\r\nSensori.before.update(function(userId, doc, fieldNames, modifier, options) {\r\n\tmodifier.$set = modifier.$set || {};\r\n\tmodifier.$set.modifiedAt = new Date();\r\n\tmodifier.$set.modifiedBy = userId;\r\n\r\n\t\r\n});\r\n\r\nSensori.before.upsert(function(userId, selector, modifier, options) {\r\n\tmodifier.$set = modifier.$set || {};\r\n\tmodifier.$set.modifiedAt = new Date();\r\n\tmodifier.$set.modifiedBy = userId;\r\n\r\n\t/*BEFORE_UPSERT_CODE*/\r\n});\r\n\r\nSensori.before.remove(function(userId, doc) {\r\n\t\r\n});\r\n\r\nSensori.after.insert(function(userId, doc) {\r\n\t\r\n});\r\n\r\nSensori.after.update(function(userId, doc, fieldNames, modifier, options) {\r\n\t\r\n});\r\n\r\nSensori.after.remove(function(userId, doc) {\r\n\t\r\n});\r\n","Watt.allow({\r\n\tinsert: function (userId, doc) {\r\n\t\treturn Watt.userCanInsert(userId, doc);\r\n\t},\r\n\r\n\tupdate: function (userId, doc, fields, modifier) {\r\n\t\treturn Watt.userCanUpdate(userId, doc);\r\n\t},\r\n\r\n\tremove: function (userId, doc) {\r\n\t\treturn Watt.userCanRemove(userId, doc);\r\n\t}\r\n});\r\n\nWatt.before.insert(function(userId, doc) {\r\n\tdoc.createdAt = new Date();\r\n\tdoc.createdBy = userId;\r\n\tdoc.modifiedAt = doc.createdAt;\r\n\tdoc.modifiedBy = doc.createdBy;\r\n\r\n\t\n\tif(!doc.createdBy) doc.createdBy = userId;\r\n});\r\n\r\nWatt.before.update(function(userId, doc, fieldNames, modifier, options) {\r\n\tmodifier.$set = modifier.$set || {};\r\n\tmodifier.$set.modifiedAt = new Date();\r\n\tmodifier.$set.modifiedBy = userId;\r\n\r\n\t\r\n});\r\n\r\nWatt.before.upsert(function(userId, selector, modifier, options) {\r\n\tmodifier.$set = modifier.$set || {};\r\n\tmodifier.$set.modifiedAt = new Date();\r\n\tmodifier.$set.modifiedBy = userId;\r\n\r\n\t/*BEFORE_UPSERT_CODE*/\r\n});\r\n\r\nWatt.before.remove(function(userId, doc) {\r\n\t\r\n});\r\n\r\nWatt.after.insert(function(userId, doc) {\r\n\t\r\n});\r\n\r\nWatt.after.update(function(userId, doc, fieldNames, modifier, options) {\r\n\t\r\n});\r\n\r\nWatt.after.remove(function(userId, doc) {\r\n\t\r\n});\r\n","Router.map(function () {\r\n\r\n});\r\n","Meteor.methods({\r\n\t\"caldaiaInsert\": function(data) {\r\n\t\tif(!Caldaia.userCanInsert(this.userId, data)) {\r\n\t\t\tthrow new Meteor.Error(403, \"Forbidden.\");\r\n\t\t}\r\n\r\n\t\treturn Caldaia.insert(data);\r\n\t},\r\n\r\n\t\"caldaiaUpdate\": function(id, data) {\r\n\t\tvar doc = Caldaia.findOne({ _id: id });\r\n\t\tif(!Caldaia.userCanUpdate(this.userId, doc)) {\r\n\t\t\tthrow new Meteor.Error(403, \"Forbidden.\");\r\n\t\t}\r\n\r\n\t\tCaldaia.update({ _id: id }, { $set: data });\r\n\t},\r\n\r\n\t\"caldaiaRemove\": function(id) {\r\n\t\tvar doc = Caldaia.findOne({ _id: id });\r\n\t\tif(!Caldaia.userCanRemove(this.userId, doc)) {\r\n\t\t\tthrow new Meteor.Error(403, \"Forbidden.\");\r\n\t\t}\r\n\r\n\t\tCaldaia.remove({ _id: id });\r\n\t}\r\n});\r\n","Meteor.methods({\r\n\t\"cronotermostatoInsert\": function(data) {\r\n\t\tif(!Cronotermostato.userCanInsert(this.userId, data)) {\r\n\t\t\tthrow new Meteor.Error(403, \"Forbidden.\");\r\n\t\t}\r\n\r\n\t\treturn Cronotermostato.insert(data);\r\n\t},\r\n\r\n\t\"cronotermostatoUpdate\": function(id, data) {\r\n\t\tvar doc = Cronotermostato.findOne({ _id: id });\r\n\t\tif(!Cronotermostato.userCanUpdate(this.userId, doc)) {\r\n\t\t\tthrow new Meteor.Error(403, \"Forbidden.\");\r\n\t\t}\r\n\r\n\t\tCronotermostato.update({ _id: id }, { $set: data });\r\n\t},\r\n\r\n\t\"cronotermostatoRemove\": function(id) {\r\n\t\tvar doc = Cronotermostato.findOne({ _id: id });\r\n\t\tif(!Cronotermostato.userCanRemove(this.userId, doc)) {\r\n\t\t\tthrow new Meteor.Error(403, \"Forbidden.\");\r\n\t\t}\r\n\r\n\t\tCronotermostato.remove({ _id: id });\r\n\t}\r\n});\r\n","Meteor.methods({\r\n\t\"rangetempInsert\": function(data) {\r\n\t\tif(!Rangetemp.userCanInsert(this.userId, data)) {\r\n\t\t\tthrow new Meteor.Error(403, \"Forbidden.\");\r\n\t\t}\r\n\r\n\t\treturn Rangetemp.insert(data);\r\n\t},\r\n\r\n\t\"rangetempUpdate\": function(id, data) {\r\n\t\tvar doc = Rangetemp.findOne({ _id: id });\r\n\t\tif(!Rangetemp.userCanUpdate(this.userId, doc)) {\r\n\t\t\tthrow new Meteor.Error(403, \"Forbidden.\");\r\n\t\t}\r\n\r\n\t\tRangetemp.update({ _id: id }, { $set: data });\r\n\t},\r\n\r\n\t\"rangetempRemove\": function(id) {\r\n\t\tvar doc = Rangetemp.findOne({ _id: id });\r\n\t\tif(!Rangetemp.userCanRemove(this.userId, doc)) {\r\n\t\t\tthrow new Meteor.Error(403, \"Forbidden.\");\r\n\t\t}\r\n\r\n\t\tRangetemp.remove({ _id: id });\r\n\t}\r\n});\r\n","Meteor.methods({\r\n\t\"sensoriInsert\": function(data) {\r\n\t\tif(!Sensori.userCanInsert(this.userId, data)) {\r\n\t\t\tthrow new Meteor.Error(403, \"Forbidden.\");\r\n\t\t}\r\n\r\n\t\treturn Sensori.insert(data);\r\n\t},\r\n\r\n\t\"sensoriUpdate\": function(id, data) {\r\n\t\tvar doc = Sensori.findOne({ _id: id });\r\n\t\tif(!Sensori.userCanUpdate(this.userId, doc)) {\r\n\t\t\tthrow new Meteor.Error(403, \"Forbidden.\");\r\n\t\t}\r\n\r\n\t\tSensori.update({ _id: id }, { $set: data });\r\n\t},\r\n\r\n\t\"sensoriRemove\": function(id) {\r\n\t\tvar doc = Sensori.findOne({ _id: id });\r\n\t\tif(!Sensori.userCanRemove(this.userId, doc)) {\r\n\t\t\tthrow new Meteor.Error(403, \"Forbidden.\");\r\n\t\t}\r\n\r\n\t\tSensori.remove({ _id: id });\r\n\t}\r\n});\r\n","Meteor.methods({\r\n\t\"wattInsert\": function(data) {\r\n\t\tif(!Watt.userCanInsert(this.userId, data)) {\r\n\t\t\tthrow new Meteor.Error(403, \"Forbidden.\");\r\n\t\t}\r\n\r\n\t\treturn Watt.insert(data);\r\n\t},\r\n\r\n\t\"wattUpdate\": function(id, data) {\r\n\t\tvar doc = Watt.findOne({ _id: id });\r\n\t\tif(!Watt.userCanUpdate(this.userId, doc)) {\r\n\t\t\tthrow new Meteor.Error(403, \"Forbidden.\");\r\n\t\t}\r\n\r\n\t\tWatt.update({ _id: id }, { $set: data });\r\n\t},\r\n\r\n\t\"wattRemove\": function(id) {\r\n\t\tvar doc = Watt.findOne({ _id: id });\r\n\t\tif(!Watt.userCanRemove(this.userId, doc)) {\r\n\t\t\tthrow new Meteor.Error(403, \"Forbidden.\");\r\n\t\t}\r\n\r\n\t\tWatt.remove({ _id: id });\r\n\t}\r\n});\r\n","Meteor.publish(\"caldaia_dettaglio\", function(caldaiaId) {\n\tif(Users.isInRoles(this.userId, [\"admin\",\"user\"])) {\n\t\treturn Caldaia.find({_id:caldaiaId}, {});\n\t}\n\treturn this.ready();\n});\n\nMeteor.publish(\"caldaia_lista\", function() {\n\tif(Users.isInRoles(this.userId, [\"admin\",\"user\"])) {\n\t\treturn Caldaia.find({}, {});\n\t}\n\treturn this.ready();\n});\n\n","Meteor.publish(\"cronotermostato_lista\", function() {\n\tif(Users.isInRoles(this.userId, [\"admin\",\"user\"])) {\n\t\treturn Cronotermostato.find({}, {sort:{dayofweek:1}});\n\t}\n\treturn this.ready();\n});\n\nMeteor.publish(\"cronotermostato_dettaglio\", function(cronotermostatoId) {\n\tif(Users.isInRoles(this.userId, [\"admin\",\"user\"])) {\n\t\treturn Cronotermostato.find({_id:cronotermostatoId}, {});\n\t}\n\treturn this.ready();\n});\n\n","Meteor.publish(\"rangetemp_lista\", function() {\n\treturn Rangetemp.find({}, {});\n});\n\n","Meteor.publish(\"sensori_lista\", function() {\n\treturn Sensori.find({}, {});\n});\n\nMeteor.publish(\"sensore_dettaglio\", function(sensoreId) {\n\treturn Sensori.find({_id:sensoreId}, {});\n});\n\nMeteor.publish(\"sensori_vuoto\", function() {\n\treturn Sensori.find({ip:null}, {});\n});\n\nMeteor.publish(\"sensori_temp_lista\", function() {\n\treturn Sensori.find({tipo:\"DHT22\"}, {});\n});\n\n","Meteor.publish(\"watt_id\", function(dayId) {\n\treturn Watt.find({day:dayId}, {});\n});\n\nMeteor.publish(\"watt_list\", function() {\n\treturn Watt.find({}, {});\n});\n\n","var verifyEmail = true;\r\n\r\nAccounts.config({ sendVerificationEmail: verifyEmail });\r\n\r\nMeteor.startup(function() {\r\n\t// read environment variables from Meteor.settings\r\n\tif(Meteor.settings && Meteor.settings.env && _.isObject(Meteor.settings.env)) {\r\n\t\tfor(var variableName in Meteor.settings.env) {\r\n\t\t\tprocess.env[variableName] = Meteor.settings.env[variableName];\r\n\t\t}\r\n\t}\r\n\r\n\t//\r\n\t// Setup OAuth login service configuration (read from Meteor.settings)\r\n\t//\r\n\t// Your settings file should look like this:\r\n\t//\r\n\t// {\r\n\t//     \"oauth\": {\r\n\t//         \"google\": {\r\n\t//             \"clientId\": \"yourClientId\",\r\n\t//             \"secret\": \"yourSecret\"\r\n\t//         },\r\n\t//         \"github\": {\r\n\t//             \"clientId\": \"yourClientId\",\r\n\t//             \"secret\": \"yourSecret\"\r\n\t//         }\r\n\t//     }\r\n\t// }\r\n\t//\r\n\tif(Accounts && Accounts.loginServiceConfiguration && Meteor.settings && Meteor.settings.oauth && _.isObject(Meteor.settings.oauth)) {\r\n\t\t// google\r\n\t\tif(Meteor.settings.oauth.google && _.isObject(Meteor.settings.oauth.google)) {\r\n\t\t\t// remove old configuration\r\n\t\t\tAccounts.loginServiceConfiguration.remove({\r\n\t\t\t\tservice: \"google\"\r\n\t\t\t});\r\n\r\n\t\t\tvar settingsObject = Meteor.settings.oauth.google;\r\n\t\t\tsettingsObject.service = \"google\";\r\n\r\n\t\t\t// add new configuration\r\n\t\t\tAccounts.loginServiceConfiguration.insert(settingsObject);\r\n\t\t}\r\n\t\t// github\r\n\t\tif(Meteor.settings.oauth.github && _.isObject(Meteor.settings.oauth.github)) {\r\n\t\t\t// remove old configuration\r\n\t\t\tAccounts.loginServiceConfiguration.remove({\r\n\t\t\t\tservice: \"github\"\r\n\t\t\t});\r\n\r\n\t\t\tvar settingsObject = Meteor.settings.oauth.github;\r\n\t\t\tsettingsObject.service = \"github\";\r\n\r\n\t\t\t// add new configuration\r\n\t\t\tAccounts.loginServiceConfiguration.insert(settingsObject);\r\n\t\t}\r\n\t\t// linkedin\r\n\t\tif(Meteor.settings.oauth.linkedin && _.isObject(Meteor.settings.oauth.linkedin)) {\r\n\t\t\t// remove old configuration\r\n\t\t\tAccounts.loginServiceConfiguration.remove({\r\n\t\t\t\tservice: \"linkedin\"\r\n\t\t\t});\r\n\r\n\t\t\tvar settingsObject = Meteor.settings.oauth.linkedin;\r\n\t\t\tsettingsObject.service = \"linkedin\";\r\n\r\n\t\t\t// add new configuration\r\n\t\t\tAccounts.loginServiceConfiguration.insert(settingsObject);\r\n\t\t}\r\n\t\t// facebook\r\n\t\tif(Meteor.settings.oauth.facebook && _.isObject(Meteor.settings.oauth.facebook)) {\r\n\t\t\t// remove old configuration\r\n\t\t\tAccounts.loginServiceConfiguration.remove({\r\n\t\t\t\tservice: \"facebook\"\r\n\t\t\t});\r\n\r\n\t\t\tvar settingsObject = Meteor.settings.oauth.facebook;\r\n\t\t\tsettingsObject.service = \"facebook\";\r\n\r\n\t\t\t// add new configuration\r\n\t\t\tAccounts.loginServiceConfiguration.insert(settingsObject);\r\n\t\t}\r\n\t\t// twitter\r\n\t\tif(Meteor.settings.oauth.twitter && _.isObject(Meteor.settings.oauth.twitter)) {\r\n\t\t\t// remove old configuration\r\n\t\t\tAccounts.loginServiceConfiguration.remove({\r\n\t\t\t\tservice: \"twitter\"\r\n\t\t\t});\r\n\r\n\t\t\tvar settingsObject = Meteor.settings.oauth.twitter;\r\n\t\t\tsettingsObject.service = \"twitter\";\r\n\r\n\t\t\t// add new configuration\r\n\t\t\tAccounts.loginServiceConfiguration.insert(settingsObject);\r\n\t\t}\r\n\t\t// meteor\r\n\t\tif(Meteor.settings.oauth.meteor && _.isObject(Meteor.settings.oauth.meteor)) {\r\n\t\t\t// remove old configuration\r\n\t\t\tAccounts.loginServiceConfiguration.remove({\r\n\t\t\t\tservice: \"meteor-developer\"\r\n\t\t\t});\r\n\r\n\t\t\tvar settingsObject = Meteor.settings.oauth.meteor;\r\n\t\t\tsettingsObject.service = \"meteor-developer\";\r\n\r\n\t\t\t// add new configuration\r\n\t\t\tAccounts.loginServiceConfiguration.insert(settingsObject);\r\n\t\t}\r\n\t}\r\n\r\n\t\nvar csvpath = \"/var/www/123solar/data/invt1/csv/\";\nvar csvpathwin = \"C://Users//matteo//Documents//GitHub//Domoticasite//files//20170318.csv\";\nvar fs = require(\"fs\");\n\nconsole.log('System:', process.env.OS);\n\n//\n// funzione TODO: feature per cercare nuovi sensori in rete e comunicarne l'esistenza all'amministratore per la loro  inclusione.\n//\nfunction find_sensor (){\n\tvar base = \"192.168.1.\";\n\tvar i=1;\n\tfor (i = 1; index < 254; ++index) {  \n      var ip = base+i;\n      var oldip = Sensori.find({}).ip.map(function(row){return row;});\n\n      try { response = HTTP.get(\"http://\"+ip+\"/json\", {});\n\t\t\tif (response.data.Sensors[0].TaskName !== null) {\n\t\t\t\tSensori.insert({ ip: ip, location: response.data.Sensors[0].TaskName, note: '-', tipo: '', active: true, timescheduler: 30, on: true});\n\t\t\t}\n\t\t}\n      catch(e) {console.log('no found',ip,' -',e);}  \n\t}  \n}\n\n\nif (Sensori.find().count() === 0) {\n\tvar VariantSensoriSchema = {};\n\t//Edit.insert({text: 'o'});\n\tSensori.attachSchema(VariantSensoriSchema, {ip: {optional: false}, location: {optional: true}, note: {optional: true}, tipo: {optional: true}, temp: {optional: true}, hum: {optional: true}, active:{optional: true} });\n    Rangetemp.insert({grado: '15'});Rangetemp.insert({grado: '16'});Rangetemp.insert({grado: '17'});Rangetemp.insert({grado: '18'});Rangetemp.insert({grado: '19'});Rangetemp.insert({grado: '20'});Rangetemp.insert({grado: '21'});Rangetemp.insert({grado: '22'});Rangetemp.insert({grado: '23'});Rangetemp.insert({grado: '24'});Rangetemp.insert({grado: '25'});\n    Caldaia.insert({ statocaldaia: false, statoriscaldamento: false, statotermostato: false, sensoretermostato: 'Cameretta', isteresi: '0.5', timescheduler: '60' });\n\tSensori.insert({ ip: '127.0.0.1', location: 'Garage', note: '-', tipo: 'DHT22 (on PIN 22)', active: false, timescheduler: 30, on: true});\n\tSensori.insert({ ip: '192.168.1.111', location: 'Contatore', note: 'Consumi Enel', tipo: 'pulse', active:false, timescheduler: 30, on: true});\n\tSensori.insert({ ip: '192.168.1.112', location: 'Sala', note: '-', tipo: 'DHT22',active: false, timescheduler: 30, on: true });\n\tSensori.insert({ ip: '192.168.1.113', location: 'Cameretta', note: '-', tipo: 'DHT22', active: false, timescheduler: 30, on: true});\n\tSensori.insert({ ip: '192.168.1.114', location: 'Ingresso', note: '-', tipo: 'DHT22', active: false, timescheduler: 30, on: true});\n\tCronotermostato.insert({ day: 'LunedÃ¬',    dayofweek: '1', h001: '18', h012: '18', h023: '18', h034: '18', h045: '18', h056: '18', h067: '18', h078: '18', h089: '18', h0910: '18', h1011: '18', h1112: '18', h1213: '18', h1314: '18', h1415: '18', h1516: '18', h1617: '18', h1718: '18', h1819: '18', h1920: '18', h2021: '18', h2122:'18', h2223:'18', h2324:'18' });\n\tCronotermostato.insert({ day: 'MartedÃ¬',   dayofweek: '2', h001: '18', h012: '18', h023: '18', h034: '18', h045: '18', h056: '18', h067: '18', h078: '18', h089: '18', h0910: '18', h1011: '18', h1112: '18', h1213: '18', h1314: '18', h1415: '18', h1516: '18', h1617: '18', h1718: '18', h1819: '18', h1920: '18', h2021: '18', h2122:'18', h2223:'18', h2324:'18' });\n\tCronotermostato.insert({ day: 'MercoledÃ¬', dayofweek: '3', h001: '18', h012: '18', h023: '18', h034: '18', h045: '18', h056: '18', h067: '18', h078: '18', h089: '18', h0910: '18', h1011: '18', h1112: '18', h1213: '18', h1314: '18', h1415: '18', h1516: '18', h1617: '18', h1718: '18', h1819: '18', h1920: '18', h2021: '18', h2122:'18', h2223:'18', h2324:'18' });\n\tCronotermostato.insert({ day: 'GiovedÃ¬',   dayofweek: '4', h001: '18', h012: '18', h023: '18', h034: '18', h045: '18', h056: '18', h067: '18', h078: '18', h089: '18', h0910: '18', h1011: '18', h1112: '18', h1213: '18', h1314: '18', h1415: '18', h1516: '18', h1617: '18', h1718: '18', h1819: '18', h1920: '18', h2021: '18', h2122:'18', h2223:'18', h2324:'18' });\n\tCronotermostato.insert({ day: 'VenerdÃ¬',   dayofweek: '5', h001: '18', h012: '18', h023: '18', h034: '18', h045: '18', h056: '18', h067: '18', h078: '18', h089: '18', h0910: '18', h1011: '18', h1112: '18', h1213: '18', h1314: '18', h1415: '18', h1516: '18', h1617: '18', h1718: '18', h1819: '18', h1920: '18', h2021: '18', h2122:'18', h2223:'18', h2324:'18' });\n\tCronotermostato.insert({ day: 'Sabato',    dayofweek: '6', h001: '18', h012: '18', h023: '18', h034: '18', h045: '18', h056: '18', h067: '18', h078: '18', h089: '18', h0910: '18', h1011: '18', h1112: '18', h1213: '18', h1314: '18', h1415: '18', h1516: '18', h1617: '18', h1718: '18', h1819: '18', h1920: '18', h2021: '18', h2122:'18', h2223:'18', h2324:'18' });\n\tCronotermostato.insert({ day: 'Domenica',  dayofweek: '7', h001: '18', h012: '18', h023: '18', h034: '18', h045: '18', h056: '18', h067: '18', h078: '18', h089: '18', h0910: '18', h1011: '18', h1112: '18', h1213: '18', h1314: '18', h1415: '18', h1516: '18', h1617: '18', h1718: '18', h1819: '18', h1920: '18', h2021: '18', h2122:'18', h2223:'18', h2324:'18' });\n}\n\n\nvar Raspberry = process.env.WIRINGPI_GPIOMEM == '1' ? true : false;\n\n\n\nif (Raspberry) {  \n      import wpi from 'wiringpi-node';\n      wpi.setup('sys');\n      import sensorLib from 'node-dht-sensor';\n      var GpioPin = 22;\n      if (GpioPin !== '') {\n          var sensorType = 22; // 11 for DHT11, 22 for DHT22 and AM2302\n          if (!sensorLib.initialize(sensorType, GpioPin)) {\n              console.log('Failed to initialize sensor');\n              process.exit(1);\n          }\n          console.log('Pin GPIO del sensore sul Raspberry: ' + GpioPin);\n      } else {\n          console.log('DHT Sensor non configured on Raspberry');\n  } \n}\n\n\nfunction switchOnOff(onoff) {\n    var state = onoff ? 1 : 0;\n    console.log('function switchOnOff: ',typeof(win),' - ', state);\n    if (Raspberry) { wpi.pinMode(7,wpi.OUTPUT); wpi.digitalWrite(7,state);console.log('function switchOnOff : Inviato segnale al relay');}      \n}\n\n\nfunction cron_read_sensor (ip) {\n\tvar tipo = Sensori.findOne({ ip: ip }).tipo;  \n\tif (tipo == 'DHT22') {\n         try {    \n            var response = HTTP.get(\"http://\"+ip+\"/json\", {});\n            if (response.data !== null) {\n                   //console.log(ip,\" (\" , response.data.Sensors[0].TaskName,\") - T:\",response.data.Sensors[0].Temperature ,\"- U:\", response.data.Sensors[0].Humidity);\n                   Sensori.update({ip: ip}, {$set:{ hum: response.data.Sensors[0].Humidity, active: true, temp: response.data.Sensors[0].Temperature, location: response.data.Sensors[0].TaskName}});\n             } else {console.log('Warning reading sensor:',ip); Sensori.update({ip:ip}, {$set:{active: false}}); }\n\t\t}\n\t\tcatch(e){\n\t\t\tconsole.log('Warning reading sensor:',ip);\n\t\t\tSensori.update({ip: ip}, {$set:{ active: false}});\n\t\t}\n     }\n  \n//\tif (tipo == 'pulse')\t{\n//\t\tHTTP.get(\"http://\"+ip+\"/json\", {}, function( error, response ) {\n//\t\t\t\tif ( error ) { console.log('Error:',ip, error); Sensori.update({ip: ip}, {$set:{ active: false}}); }\n//\t\t\t\telse { if (response.data !== null) {\n//\t\t\t\t\t\t\t\t\t\t\t\t\t// console.log(ip,\" (\" , response.data.Sensors[0].TaskName,\") - Count:\", response.data.Sensors[0].Total);\n//\t\t\t\t\t\t\t\t\t\t\t\t\tSensori.update({ip: ip}, {$set:{ active: true, location: response.data.Sensors[0].TaskName, note: 'counter:'+response.data.Sensors[0].Total}});\n//\t\t\t\t\t\t\t\t\t\t\t\t\t}\telse {console.log(ip,\" - No data !\"); Sensori.update({ip:ip}, {$set:{active: false}}); }\n//\t\t\t\t}\n//\t\t});\n//\t}\n  \n\tif (Raspberry && tipo == 'DHT22 (on PIN 22)') {\n\t\tvar readout = sensorLib.read();\n\t\tif (readout.temperature.toFixed(1) !== '0.0') {\n\t\t\t\t// console.log(ip,\" (Raspberry) - T:\", readout.temperature.toFixed(1),\"- U:\", readout.humidity.toFixed(1));\n\t\t\t\tSensori.update({ip: ip}, {$set:{ hum: readout.humidity.toFixed(1), active: true, temp: readout.temperature.toFixed(1)}});\n\t\t}\n\t}\n}\n\n\nfunction cron_cronotermostato () {\n\tvar today = moment().format('E');\n\tvar hournow = moment().format('HH');\n\tvar temphour = Cronotermostato.find({ dayofweek: parseInt(today)}).map(function(o){return [o.h001,o.h012,o.h023,o.h034,o.h045,o.h056,o.h067,o.h078,o.h089,o.h0910,o.h1011,o.h1112,o.h1213,o.h1314,o.h1415,o.h1516,o.h1617,o.h1718,o.h1819,o.h1920,o.h2021,o.h2122,o.h2223,o.h2324];})[0][parseInt(hournow)];\n\tvar sensoretermostato = Caldaia.findOne({}).sensoretermostato;\n\tvar isteresi = Caldaia.findOne({}).isteresi;\n\tvar temprilevata = Sensori.findOne({ location: sensoretermostato }).temp;\n\tconsole.log('today:',today,' - hournow:',hournow,' - temphour:',temphour,' - sensoretermostato:', sensoretermostato, ' - isteresi:',isteresi,' - temprilevata:', temprilevata);\n\tif ((temphour - isteresi) >= temprilevata) {\n\t\t\t\t\tCaldaia.update({}, {$set:{ statocaldaia: true}});\n\t\t\t\t\tswitchOnOff(true);\n\t\t\t} else {\n\t\t\t\t\tCaldaia.update({}, {$set:{ statocaldaia: false}});\n\t\t\t\t\tswitchOnOff(false);\n\t}\n}\n\n\n\nvar termostato = Caldaia.find({},{fields: {_id: true, statotermostato: true, timescheduler: true}}).observeChanges({\n\tchanged: function (id, s) {\n\t\tif (s.statotermostato === true) {\n\t\t\t//stop\n\t\t\tif (SyncedCron.nextScheduledAtDate('cronotermostato')) { SyncedCron.remove('cronotermostato');}\n\t\t\t//start\n\t\t\tSyncedCron.add({name: 'cronotermostato',schedule: function(parser) {return parser.recur().every(Caldaia.findOne().timescheduler).second();},job: cron_cronotermostato});\n\t\t\tCaldaia.update({}, {$set:{ statoriscaldamento: true }});\n\t\t} else {if (SyncedCron.nextScheduledAtDate('cronotermostato')) { SyncedCron.remove('cronotermostato');}}\n\t},  \n\tadded: function (id, s) {if (s.cronotermostato === true ){switchOnOff(true); Caldaia.update({}, {$set:{ statoriscaldamento: true }}); }}\n});\n\n\nvar riscaldamento = Caldaia.find({},{fields: {statoriscaldamento: true}}).observeChanges({\n\tchanged: function (id, s) {\n\t\t// workaround: per qulache motivo non funziona s.on s.ip\n\t\tif (s.statoriscaldamento === true) {switchOnOff(true);Caldaia.update({}, {$set:{ statocaldaia: true }});\n\t\t} else { switchOnOff(false); Caldaia.update({}, {$set:{ statocaldaia: false, statotermostato: false }});\t}\n\t},\n\tadded: function (id, s) {if (s.statoriscaldamento === true ) { switchOnOff(true); Caldaia.update({}, {$set:{ statocaldaia: true }}); }}\n});\n\n\nvar on = Sensori.find({},{fields: {ip: true, on: true, timescheduler: true}}).observeChanges({\n   changed: function (id, s) {\n\t\tvar ip = Sensori.findOne({_id: id}).ip;\n\t\t\tif (Sensori.findOne({_id: id}).on === true) {\n\t\t\t// shutdown\n\t\t\tif (SyncedCron.nextScheduledAtDate(ip +'_read sensors')) { SyncedCron.remove(ip +'_read sensors');}\n\t\t\t//activatesensor\n\t\t\tSyncedCron.add({\n\t\t\t\tname: ip+'_read sensors',\n\t\t\t\tschedule: function(parser) {return parser.recur().every(Sensori.findOne({ ip: ip }).timescheduler).second();},\n\t\t\t\tjob: function() {cron_read_sensor(ip); return ip+'_read sensors';}\n\t\t\t});\n\t\t\t} else {if (SyncedCron.nextScheduledAtDate(ip +'_read sensors')) { SyncedCron.remove(ip +'_read sensors');}}\n\t},\n\tadded: function (id, s) {\n\t\tvar ip = Sensori.findOne({_id: id}).ip;\n\t\tif (Sensori.findOne({_id: id}).on ===true){\n\t\t\t\tconsole.log(\"Added sensor:\", s.ip, s.on, s.timescheduler);\n\t\t\t\tSyncedCron.add({\n\t\t\t\t\tname: ip+'_read sensors',\n\t\t\t\t\tschedule: function(parser) {return parser.recur().every(Sensori.findOne({ ip: ip }).timescheduler).second();},\n\t\t\t\t\tjob: function() {cron_read_sensor(ip); return ip+'_read sensors';}\n\t\t\t\t});\n\t\t\t}\n   }\n });\n\n\nfunction cron_watt_after (now, response) {\n\tvar today = moment().format(\"YYYYMMDD\");\t\n\tvar matrix =[]; var csvfs ='';var solararr=[];\n    if (Raspberry) {csvfs = csvpath+today+\".csv\";} else {csvfs = csvpathwin;}\n  \n\t// Leggo immediatamente i valori de sensore per garantire il timeframe dei 5 minuti \t\t\n\tif (fs.existsSync(csvfs)) {      \n        matrix = (fs.readFileSync(csvfs).toString().split(\"\\n\").map(function(row){ return { x: moment(today +\" \"+ row.split(\",\")[0],\"YYYYMMDD HH:mm\").unix(), y: Number(row.split(\",\")[27])};})).slice(1,-1);\n\t\tsolararr = solar(matrix);\n\t\t//console.log('solarray',solarray);\n        Watt.update({day: today}, { $set: {solararr: solararr}},{upsert: true, multi: false});\n\t} else  {console.log('File not found: ',csvfs);} \n  \n\tif (response.data !== null) {       \n\t\tvar pulsearr = pulse (today,now,response.data.Sensors[0].Total,solararr);      \n\t//\tconsole.log('pulserray',pulsearr);      \n        Watt.update({day: today}, { $set: {pulsearr: pulsearr}},{upsert: true, multi: false});\n    } else { \n\t\t// console.log('Warning cron_watt (problem reading sensor):',today,' - ',response); \n\t\t\t}\n}\n\n\nfunction pulse (date,now,ytmp,solararr) {\n\tvar b = []; var x0 = 0; var y0 = 0; var e = Watt.findOne({day: date}); var sx=0; var sy=0;\n\tconsole.log('solararr.length',solararr.length);\n  \n\tif (solararr.length > 0) {sx = solararr[solararr.length-1].x; sy = solararr[solararr.length-1].y; }\n\tif (e && e.pulsearr)  {\n\t\te.pulsearr.push({x: now, y: 0, ytmp: ytmp });\n\t\te.pulsearr.forEach(function(p) {\n\t\t\tvar x1 = p.x; var y1 = p.ytmp; var deltat = (x1-x0)/1000;\n\t\t\tif (deltat <=0 || y1 < y0)  {console.log('!!!  y1:',y1,'y0:',y0,'x1:',x1,'x0:',x0);};\n          \n\t\t\tif (deltat > 0 && (y1 - y0) >= 0 ) {              \n\t\t\t\tvar y = Math.round(((y1 - y0)*3600/deltat),3);            \n                if (now === sx) { if (sy >= y) {y = (sy + y);} else {y = (sy - y);} }\n                console.log('now',now,'sx',sx,'sy',sy,'y',y,'y1',y1,'y0',y0);\n\t\t\t\tb.push({x: x1, y: y, ytmp: y1 });\n\t\t\t} else {console.log('Warning (pulse) deltat or (y1-y0):', deltat, '|', y1-y0);}           \n\t\t\tx0 = x1; y0 = y1;\n        });\n\t} else {b.push({x: now, y: 0, ytmp: ytmp }); console.log('First entry for pulsearr:', now);}  \n\treturn b; \n}\n\n\nfunction solar(matrix) {\n    var b = []; var x0 = 0; var y0 = 0;\n\tif (matrix)  {\n\t\tmatrix.forEach(function(s) {\n\t\t\tvar x1 = s.x; var y1 = s.y; var deltat = x1-x0;\n\t\t\tif (deltat > 0) {\n\t\t\t\tvar KwFull = Math.round(((y1 - y0)*3600/deltat*1000),3);\n\t\t\t\t//console.log('solar:',{x: x1*1000, y: KwFull });\n\t\t\t\tb.push({x: x1*1000, y: KwFull });\t\t\t\t\t\n\t\t\t} else {\n            //  console.log('Warning (solar) deltat:', deltat);\n            }\n\t\t\tx0 = x1; y0 = y1;\n\t\t});\n\t} else {console.log('No found MATRIX');}\n\treturn b;\n}\n\n\nfunction cron_watt () {\n\tvar now = Math.floor((moment().unix()));\n\tvar ip = Sensori.findOne({tipo: 'pulse'}).ip;\n\t// Leggo immediatamente i valori del sensore per garantire il timeframe dei 5 minuti  \n\tvar response = HTTP.get(\"http://\"+ip+\"/json\", {});\n\tsetTimeout(cron_watt_after(now*1000, response), 10000);\t\n}\n\n\nvar watt = SyncedCron.add({\n\tname: 'watt',\n\tschedule: function(parser) {return parser.recur().every(5).minute();},\n\t//schedule: function(parser) {return parser.recur().every(20).second();},\n\tjob: cron_watt\n});\n\n\n\nSyncedCron.config({log: false});\n\nSyncedCron.start();\n\r\n});\r\n\r\nMeteor.methods({\r\n\t\"createUserAccount\": function(options) {\r\n\t\tif(!Users.isAdmin(Meteor.userId())) {\r\n\t\t\tthrow new Meteor.Error(403, \"Access denied.\");\r\n\t\t}\r\n\r\n\t\tvar userOptions = {};\r\n\t\tif(options.username) userOptions.username = options.username;\r\n\t\tif(options.email) userOptions.email = options.email;\r\n\t\tif(options.password) userOptions.password = options.password;\r\n\t\tif(options.profile) userOptions.profile = options.profile;\r\n\t\tif(options.profile && options.profile.email) userOptions.email = options.profile.email;\r\n\r\n\t\tAccounts.createUser(userOptions);\r\n\t},\r\n\t\"updateUserAccount\": function(userId, options) {\r\n\t\t// only admin or users own profile\r\n\t\tif(!(Users.isAdmin(Meteor.userId()) || userId == Meteor.userId())) {\r\n\t\t\tthrow new Meteor.Error(403, \"Access denied.\");\r\n\t\t}\r\n\r\n\t\t// non-admin user can change only profile\r\n\t\tif(!Users.isAdmin(Meteor.userId())) {\r\n\t\t\tvar keys = Object.keys(options);\r\n\t\t\tif(keys.length !== 1 || !options.profile) {\r\n\t\t\t\tthrow new Meteor.Error(403, \"Access denied.\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar userOptions = {};\r\n\t\tif(options.username) userOptions.username = options.username;\r\n\t\tif(options.email) userOptions.email = options.email;\r\n\t\tif(options.password) userOptions.password = options.password;\r\n\t\tif(options.profile) userOptions.profile = options.profile;\r\n\r\n\t\tif(options.profile && options.profile.email) userOptions.email = options.profile.email;\r\n\t\tif(options.roles) userOptions.roles = options.roles;\r\n\r\n\t\tif(userOptions.email) {\r\n\t\t\tvar email = userOptions.email;\r\n\t\t\tdelete userOptions.email;\r\n\t\t\tvar userData = Users.findOne(this.userId);\r\n\t\t\tif(userData.emails && !userData.emails.find(function(mail) { return mail.address == email; })) {\r\n\t\t\t\tuserOptions.emails = [{ address: email }];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar password = \"\";\r\n\t\tif(userOptions.password) {\r\n\t\t\tpassword = userOptions.password;\r\n\t\t\tdelete userOptions.password;\r\n\t\t}\r\n\r\n\t\tif(userOptions) {\r\n\t\t\tfor(var key in userOptions) {\r\n\t\t\t\tvar obj = userOptions[key];\r\n\t\t\t\tif(_.isObject(obj)) {\r\n\t\t\t\t\tfor(var k in obj) {\r\n\t\t\t\t\t\tuserOptions[key + \".\" + k] = obj[k];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdelete userOptions[key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tUsers.update(userId, { $set: userOptions });\r\n\t\t}\r\n\r\n\t\tif(password) {\r\n\t\t\tAccounts.setPassword(userId, password);\r\n\t\t}\r\n\t},\r\n\r\n\t\"sendMail\": function(options) {\r\n\t\tthis.unblock();\r\n\r\n\t\tEmail.send(options);\r\n\t}\r\n});\r\n\r\nAccounts.onCreateUser(function (options, user) {\r\n\tuser.roles = [\"user\"];\r\n\r\n\tif(options.profile) {\r\n\t\tuser.profile = options.profile;\r\n\t}\r\n\r\n\tif(!Users.findOne({ roles: \"admin\" }) && user.roles.indexOf(\"admin\") < 0) {\n\t\tuser.roles.push(\"admin\");\n\t }\n\r\n\treturn user;\r\n});\r\n\r\nAccounts.validateLoginAttempt(function(info) {\r\n\r\n\t// reject users with role \"blocked\"\r\n\tif(info.user && Users.isInRole(info.user._id, \"blocked\")) {\r\n\t\tthrow new Meteor.Error(403, \"Your account is blocked.\");\r\n\t}\r\n\r\n  if(verifyEmail && info.user && info.user.emails && info.user.emails.length && !info.user.emails[0].verified ) {\r\n\t\t\tthrow new Meteor.Error(499, \"E-mail not verified.\");\r\n  }\r\n\r\n\treturn true;\r\n});\r\n\r\n\r\nUsers.before.insert(function(userId, doc) {\r\n\tif(doc.emails && doc.emails[0] && doc.emails[0].address) {\r\n\t\tdoc.profile = doc.profile || {};\r\n\t\tdoc.profile.email = doc.emails[0].address;\r\n\t} else {\r\n\t\t// oauth\r\n\t\tif(doc.services) {\r\n\t\t\t// google e-mail\r\n\t\t\tif(doc.services.google && doc.services.google.email) {\r\n\t\t\t\tdoc.profile = doc.profile || {};\r\n\t\t\t\tdoc.profile.email = doc.services.google.email;\r\n\t\t\t} else {\r\n\t\t\t\t// github e-mail\r\n\t\t\t\tif(doc.services.github && doc.services.github.accessToken) {\r\n\t\t\t\t\tvar github = new GitHub({\r\n\t\t\t\t\t\tversion: \"3.0.0\",\r\n\t\t\t\t\t\ttimeout: 5000\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tgithub.authenticate({\r\n\t\t\t\t\t\ttype: \"oauth\",\r\n\t\t\t\t\t\ttoken: doc.services.github.accessToken\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tvar result = github.user.getEmails({});\r\n\t\t\t\t\t\tvar email = _.findWhere(result, { primary: true });\r\n\t\t\t\t\t\tif(!email && result.length && _.isString(result[0])) {\r\n\t\t\t\t\t\t\temail = { email: result[0] };\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(email) {\r\n\t\t\t\t\t\t\tdoc.profile = doc.profile || {};\r\n\t\t\t\t\t\t\tdoc.profile.email = email.email;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch(e) {\r\n\t\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// linkedin email\r\n\t\t\t\t\tif(doc.services.linkedin && doc.services.linkedin.emailAddress) {\r\n\t\t\t\t\t\tdoc.profile = doc.profile || {};\r\n\t\t\t\t\t\tdoc.profile.name = doc.services.linkedin.firstName + \" \" + doc.services.linkedin.lastName;\r\n\t\t\t\t\t\tdoc.profile.email = doc.services.linkedin.emailAddress;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif(doc.services.facebook && doc.services.facebook.email) {\r\n\t\t\t\t\t\t\tdoc.profile = doc.profile || {};\r\n\t\t\t\t\t\t\tdoc.profile.email = doc.services.facebook.email;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif(doc.services.twitter && doc.services.twitter.email) {\r\n\t\t\t\t\t\t\t\tdoc.profile = doc.profile || {};\r\n\t\t\t\t\t\t\t\tdoc.profile.email = doc.services.twitter.email;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif(doc.services[\"meteor-developer\"] && doc.services[\"meteor-developer\"].emails && doc.services[\"meteor-developer\"].emails.length) {\r\n\t\t\t\t\t\t\t\t\tdoc.profile = doc.profile || {};\r\n\t\t\t\t\t\t\t\t\tdoc.profile.email = doc.services[\"meteor-developer\"].emails[0].address;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\nUsers.before.update(function(userId, doc, fieldNames, modifier, options) {\r\n\tif(modifier.$set && modifier.$set.emails && modifier.$set.emails.length && modifier.$set.emails[0].address) {\r\n\t\tmodifier.$set.profile.email = modifier.$set.emails[0].address;\r\n\t}\r\n});\r\n\r\nAccounts.onLogin(function (info) {\r\n\t\r\n});\r\n\r\nAccounts.urls.resetPassword = function (token) {\r\n\treturn Meteor.absoluteUrl('reset_password/' + token);\r\n};\r\n\r\nAccounts.urls.verifyEmail = function (token) {\r\n\treturn Meteor.absoluteUrl('verify_email/' + token);\r\n};\r\n"]}