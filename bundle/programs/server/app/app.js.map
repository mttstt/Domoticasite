{"version":3,"file":"/app.js","sources":["meteor://ðŸ’»app/lib/case_utils.js","meteor://ðŸ’»app/lib/object_utils.js","meteor://ðŸ’»app/lib/string_utils.js","meteor://ðŸ’»app/both/collections/caldaia.js","meteor://ðŸ’»app/both/collections/cronotermostato.js","meteor://ðŸ’»app/both/collections/rangetemp.js","meteor://ðŸ’»app/both/collections/sensori.js","meteor://ðŸ’»app/both/collections/watt.js","meteor://ðŸ’»app/server/collections/caldaia.js","meteor://ðŸ’»app/server/collections/cronotermostato.js","meteor://ðŸ’»app/server/collections/rangetemp.js","meteor://ðŸ’»app/server/collections/sensori.js","meteor://ðŸ’»app/server/collections/watt.js","meteor://ðŸ’»app/server/controllers/router.js","meteor://ðŸ’»app/server/methods/caldaia.js","meteor://ðŸ’»app/server/methods/cronotermostato.js","meteor://ðŸ’»app/server/methods/rangetemp.js","meteor://ðŸ’»app/server/methods/sensori.js","meteor://ðŸ’»app/server/methods/watt.js","meteor://ðŸ’»app/server/publish/caldaia.js","meteor://ðŸ’»app/server/publish/cronotermostato.js","meteor://ðŸ’»app/server/publish/rangetemp.js","meteor://ðŸ’»app/server/publish/sensori.js","meteor://ðŸ’»app/server/publish/watt.js","meteor://ðŸ’»app/server/server.js"],"names":["hasSpace","hasSeparator","hasCamel","toNoCase","string","test","toLowerCase","unseparate","uncamelize","separatorSplitter","replace","m","next","camelSplitter","previous","uppers","split","join","toSpaceCase","matches","match","trim","toCamelCase","letter","toUpperCase","toSnakeCase","toKebabCase","toTitleCase","str","charAt","slice","getPropertyValue","propertyName","obj","props","res","i","length","deepen","o","oo","t","parts","part","k","key","pop","shift","exportArrayOfObjects","data","exportFields","fileType","tmp","_","each","doc","field","push","JSON","stringify","columnSeparator","String","fromCharCode","value","mergeObjects","target","source","property","hasOwnProperty","sourceProperty","a","l","arguments","escapeRegEx","replaceSubstrings","find","RegExp","joinStrings","stringArray","sep","convertToSlug","text","toString","Caldaia","Mongo","Collection","userCanInsert","userId","userCanUpdate","ownerId","Users","isInRoles","userCanRemove","Schemas","SimpleSchema","statoriscaldamento","label","type","Boolean","optional","statotermostato","statocaldaia","sensoretermostato","timescheduler","Number","defaultValue","isteresi","decimal","attachSchema","Cronotermostato","day","h001","h012","h023","h034","h045","h056","h067","h078","h089","h0910","h1011","h1112","h1213","h1314","h1415","h1516","h1617","h1718","h1819","h1920","h2021","h2122","h2223","h2324","dayofweek","Rangetemp","grado","Sensori","ip","location","note","tipo","temp","hum","active","on","Watt","pulsearr","Object","blackbox","solararr","allow","insert","update","fields","modifier","remove","before","createdAt","Date","createdBy","modifiedAt","modifiedBy","fieldNames","options","$set","upsert","selector","after","Router","map","Meteor","methods","Error","id","findOne","_id","publish","caldaiaId","ready","sort","cronotermostatoId","sensoreId","dayId","verifyEmail","Accounts","config","sendVerificationEmail","startup","settings","env","isObject","variableName","process","loginServiceConfiguration","oauth","google","service","settingsObject","github","linkedin","facebook","twitter","meteor","fs","require","csvpath","csvpathwin","console","log","ROOT_URL","PORT","os","release","platform","Raspberry","WIRINGPI_GPIOMEM","find_sensor","base","index","oldip","row","response","HTTP","get","Sensors","TaskName","e","count","VariantSensoriSchema","wpi","setup","sensorLib","GpioPin","sensorType","initialize","exit","readout","read","temperature","toFixed","humidity","switchOnOff","onoff","state","pinMode","OUTPUT","digitalWrite","cron_read_sensor","Humidity","Temperature","cron_cronotermostato","today","moment","format","hournow","temphour","parseInt","temprilevata","termostato","observeChanges","changed","s","SyncedCron","nextScheduledAtDate","add","name","schedule","parser","recur","every","second","job","added","cronotermostato","riscaldamento","cron_watt_after","now","matrix","csvfs","existsSync","readFileSync","x","unix","y","solar","multi","pulse","Total","date","ytmp","b","x0","y0","sx","sy","forEach","p","x1","y1","deltat","Math","round","KwFull","cron_watt","floor","setTimeout","watt","minute","start","isAdmin","userOptions","username","email","password","profile","createUser","keys","roles","userData","emails","mail","address","setPassword","unblock","Email","send","onCreateUser","user","indexOf","validateLoginAttempt","info","isInRole","verified","services","accessToken","GitHub","version","timeout","authenticate","token","result","getEmails","findWhere","primary","isString","emailAddress","firstName","lastName","onLogin","urls","resetPassword","absoluteUrl"],"mappings":";;;;;;;;AAAA,IAAIA,WAAW,IAAf;AACA,IAAIC,eAAe,OAAnB;AACA,IAAIC,WAAW,yBAAf,C,CAEA;;;;;;;;AAQA,KAAKC,QAAL,GAAgB,UAASC,MAAT,EAAiB;AAC/B,MAAIJ,SAASK,IAAT,CAAcD,MAAd,CAAJ,EAA2B,OAAOA,OAAOE,WAAP,EAAP;AAC3B,MAAIL,aAAaI,IAAb,CAAkBD,MAAlB,CAAJ,EAA+B,OAAO,CAACG,WAAWH,MAAX,KAAsBA,MAAvB,EAA+BE,WAA/B,EAAP;AAC/B,MAAIJ,SAASG,IAAT,CAAcD,MAAd,CAAJ,EAA2B,OAAOI,WAAWJ,MAAX,EAAmBE,WAAnB,EAAP;AAC3B,SAAOF,OAAOE,WAAP,EAAP;AACD,CALD,C,CAOA;;;;AAIA,IAAIG,oBAAoB,cAAxB,C,CAEA;;;;;;;AAOA,SAASF,UAAT,CAAoBH,MAApB,EAA4B;AAC1B,SAAOA,OAAOM,OAAP,CAAeD,iBAAf,EAAkC,UAAUE,CAAV,EAAaC,IAAb,EAAmB;AAC1D,WAAOA,OAAO,MAAMA,IAAb,GAAoB,EAA3B;AACD,GAFM,CAAP;AAGD,C,CAED;;;;AAIA,IAAIC,gBAAgB,cAApB,C,CAEA;;;;;;;AAOA,SAASL,UAAT,CAAoBJ,MAApB,EAA4B;AAC1B,SAAOA,OAAOM,OAAP,CAAeG,aAAf,EAA8B,UAAUF,CAAV,EAAaG,QAAb,EAAuBC,MAAvB,EAA+B;AAClE,WAAOD,WAAW,GAAX,GAAiBC,OAAOT,WAAP,GAAqBU,KAArB,CAA2B,EAA3B,EAA+BC,IAA/B,CAAoC,GAApC,CAAxB;AACD,GAFM,CAAP;AAGD;;AAED,KAAKC,WAAL,GAAmB,UAASd,MAAT,EAAiB;AAClC,SAAOD,SAASC,MAAT,EAAiBM,OAAjB,CAAyB,cAAzB,EAAyC,UAAUS,OAAV,EAAmBC,KAAnB,EAA0B;AACxE,WAAOA,QAAQ,MAAMA,KAAd,GAAsB,EAA7B;AACD,GAFM,EAEJC,IAFI,EAAP;AAGD,CAJD;;AAMA,KAAKC,WAAL,GAAmB,UAASlB,MAAT,EAAiB;AAClC,SAAOc,YAAYd,MAAZ,EAAoBM,OAApB,CAA4B,SAA5B,EAAuC,UAAUS,OAAV,EAAmBI,MAAnB,EAA2B;AACvE,WAAOA,OAAOC,WAAP,EAAP;AACD,GAFM,CAAP;AAGD,CAJD;;AAMA,KAAKC,WAAL,GAAmB,UAASrB,MAAT,EAAiB;AAClC,SAAOc,YAAYd,MAAZ,EAAoBM,OAApB,CAA4B,KAA5B,EAAmC,GAAnC,CAAP;AACD,CAFD;;AAIA,KAAKgB,WAAL,GAAmB,UAAStB,MAAT,EAAiB;AAClC,SAAOc,YAAYd,MAAZ,EAAoBM,OAApB,CAA4B,KAA5B,EAAmC,GAAnC,CAAP;AACD,CAFD;;AAIA,KAAKiB,WAAL,GAAmB,UAASvB,MAAT,EAAiB;AAClC,MAAIwB,MAAMV,YAAYd,MAAZ,EAAoBM,OAApB,CAA4B,SAA5B,EAAuC,UAASS,OAAT,EAAkBI,MAAlB,EAA0B;AACzE,WAAO,MAAMA,OAAOC,WAAP,EAAb;AACD,GAFS,CAAV;;AAIA,MAAGI,GAAH,EAAQ;AACNA,UAAMA,IAAIC,MAAJ,CAAW,CAAX,EAAcL,WAAd,KAA8BI,IAAIE,KAAJ,CAAU,CAAV,CAApC;AACD;;AACD,SAAOF,GAAP;AACD,CATD,yH;;;;;;;;;;;;;;;;;AC7EA;;;;;;EAQA,KAAKG,gBAAL,GAAwB,UAASC,YAAT,EAAuBC,GAAvB,EAA4B;AACnD,KAAIC,QAAQF,aAAahB,KAAb,CAAmB,GAAnB,CAAZ;AACA,KAAImB,MAAMF,GAAV;;AACA,MAAI,IAAIG,IAAI,CAAZ,EAAeA,IAAIF,MAAMG,MAAzB,EAAiCD,GAAjC,EAAsC;AACrCD,QAAMA,IAAID,MAAME,CAAN,CAAJ,CAAN;;AACA,MAAG,OAAOD,GAAP,IAAc,WAAjB,EAA8B;AAC7B,UAAOA,GAAP;AACA;AACD;;AACD,QAAOA,GAAP;AACA,CAVD,C,CAaA;;;;AAIA,KAAKG,MAAL,GAAc,UAASC,CAAT,EAAY;AACzB,KAAIC,KAAK,EAAT;KAAaC,CAAb;KAAgBC,KAAhB;KAAuBC,IAAvB;;AACA,MAAK,IAAIC,CAAT,2CAAcL,CAAd,GAAiB;AAChBE,MAAID,EAAJ;AACAE,UAAQE,EAAE5B,KAAF,CAAQ,GAAR,CAAR;AACA,MAAI6B,MAAMH,MAAMI,GAAN,EAAV;;AACA,SAAOJ,MAAML,MAAb,EAAqB;AACpBM,UAAOD,MAAMK,KAAN,EAAP;AACAN,OAAIA,EAAEE,IAAF,IAAUF,EAAEE,IAAF,KAAW,EAAzB;AACA;;AACDF,IAAEI,GAAF,IAASN,EAAEK,CAAF,CAAT;AACA;;AACD,QAAOJ,EAAP;AACA,CAbD,C,CAeA;;;;;;;AAOA,KAAKQ,oBAAL,GAA4B,UAASC,IAAT,EAAeC,YAAf,EAA6BC,QAA7B,EAAuC;AAClEF,QAAOA,QAAQ,EAAf;AACAE,YAAWA,YAAY,KAAvB;AACAD,gBAAeA,gBAAgB,EAA/B;AAEA,KAAItB,MAAM,EAAV,CALkE,CAMlE;;AACA,KAAGuB,YAAY,MAAf,EAAuB;AAEtB,MAAIC,MAAM,EAAV;;AACAC,IAAEC,IAAF,CAAOL,IAAP,EAAa,UAASM,GAAT,EAAc;AAC1B,OAAItB,MAAM,EAAV;;AACAoB,KAAEC,IAAF,CAAOJ,YAAP,EAAqB,UAASM,KAAT,EAAgB;AACpCvB,QAAIuB,KAAJ,IAAaD,IAAIC,KAAJ,CAAb;AACA,IAFD;;AAGAJ,OAAIK,IAAJ,CAASxB,GAAT;AACA,GAND;;AAQAL,QAAM8B,KAAKC,SAAL,CAAeP,GAAf,CAAN;AACA,EAnBiE,CAqBlE;;;AACA,KAAGD,YAAY,KAAZ,IAAqBA,YAAY,KAApC,EAA2C;AAC1C,MAAIS,kBAAkB,EAAtB;;AACA,MAAGT,YAAY,KAAf,EAAsB;AACrBS,qBAAkB,GAAlB;AACA;;AACD,MAAGT,YAAY,KAAf,EAAsB;AACrB;AACAS,qBAAkBC,OAAOC,YAAP,CAAoB,CAApB,CAAlB;AACA;;AAEDT,IAAEC,IAAF,CAAOJ,YAAP,EAAqB,UAASM,KAAT,EAAgBpB,CAAhB,EAAmB;AACvC,OAAGA,IAAI,CAAP,EAAU;AACTR,UAAMA,MAAMgC,eAAZ;AACA;;AACDhC,SAAMA,MAAM,IAAN,GAAa4B,KAAb,GAAqB,IAA3B;AACA,GALD,EAV0C,CAgB1C;;;AACA5B,QAAMA,MAAMiC,OAAOC,YAAP,CAAoB,EAApB,CAAN,GAAgC,IAAtC;;AAEAT,IAAEC,IAAF,CAAOL,IAAP,EAAa,UAASM,GAAT,EAAc;AAC1BF,KAAEC,IAAF,CAAOJ,YAAP,EAAqB,UAASM,KAAT,EAAgBpB,CAAhB,EAAmB;AACvC,QAAGA,IAAI,CAAP,EAAU;AACTR,WAAMA,MAAMgC,eAAZ;AACA;;AAED,QAAIG,QAAQhC,iBAAiByB,KAAjB,EAAwBD,GAAxB,IAA+B,EAA3C;AACAQ,YAAQA,MAAMrD,OAAN,CAAc,IAAd,EAAoB,IAApB,CAAR;AACA,QAAG,OAAOqD,KAAP,IAAiB,WAApB,EACCnC,MAAMA,MAAM,MAAZ,CADD,KAGCA,MAAMA,MAAM,IAAN,GAAamC,KAAb,GAAqB,IAA3B;AACD,IAXD,EAD0B,CAa1B;;;AACAnC,SAAMA,MAAMiC,OAAOC,YAAP,CAAoB,EAApB,CAAN,GAAgC,IAAtC;AACA,GAfD;AAgBA;;AAED,QAAOlC,GAAP;AACA,CA5DD;;AA+DA,KAAKoC,YAAL,GAAoB,UAASC,MAAT,EAAiBC,MAAjB,EAAyB;AAE5C;kCAGA,IAAG,QAAOD,MAAP,uDAAOA,MAAP,OAAkB,QAArB,EAA+B;AAC9BA,WAAS,EAAT;AACA;;AAED,MAAI,IAAIE,QAAR,2CAAoBD,MAApB,GAA4B;AAE3B,MAAGA,OAAOE,cAAP,CAAsBD,QAAtB,CAAH,EAAoC;AAEnC,OAAIE,iBAAiBH,OAAQC,QAAR,CAArB;;AAEA,OAAG,QAAOE,cAAP,uDAAOA,cAAP,OAA0B,QAA7B,EAAuC;AACtCJ,WAAOE,QAAP,IAAmBH,aAAaC,OAAOE,QAAP,CAAb,EAA+BE,cAA/B,CAAnB;AACA;AACA;;AAEDJ,UAAOE,QAAP,IAAmBE,cAAnB;AACA;AACD;;AAED,MAAI,IAAIC,IAAI,CAAR,EAAWC,IAAIC,UAAUnC,MAA7B,EAAqCiC,IAAIC,CAAzC,EAA4CD,GAA5C,EAAiD;AAChDN,eAAaC,MAAb,EAAqBO,UAAUF,CAAV,CAArB;AACA;;AAED,QAAOL,MAAP;AACA,CA7BD,0H;;;;;;;;;;;AC9GA,KAAKQ,WAAL,GAAmB,UAAUrE,MAAV,EAAkB;AACpC,QAAOA,OAAOM,OAAP,CAAe,6BAAf,EAA8C,MAA9C,CAAP;AACA,CAFD;;AAIA,KAAKgE,iBAAL,GAAyB,UAAStE,MAAT,EAAiBuE,IAAjB,EAAuBjE,OAAvB,EAAgC;AACxD,QAAON,OAAOM,OAAP,CAAe,IAAIkE,MAAJ,CAAWH,YAAYE,IAAZ,CAAX,EAA8B,GAA9B,CAAf,EAAmDjE,OAAnD,CAAP;AACA,CAFD;;AAIA,KAAKmE,WAAL,GAAmB,UAASC,WAAT,EAAsB7D,IAAtB,EAA4B;AAC9C,KAAI8D,MAAM9D,QAAQ,IAAlB;AACA,KAAIkB,MAAM,EAAV;;AACAkB,GAAEC,IAAF,CAAOwB,WAAP,EAAoB,UAASlD,GAAT,EAAc;AACjC,MAAGA,GAAH,EAAQ;AACP,OAAGO,GAAH,EACCA,MAAMA,MAAM4C,GAAZ;AACD5C,SAAMA,MAAMP,GAAZ;AACA;AACD,EAND;;AAOA,QAAOO,GAAP;AACA,CAXD;;AAaA,KAAK6C,aAAL,GAAqB,UAASC,IAAT,EAAe;AAClC,QAAOA,KAAKC,QAAL,GAAgB5E,WAAhB,GACJI,OADI,CACI,MADJ,EACY,GADZ,EAC2B;AAD3B,EAEJA,OAFI,CAEI,WAFJ,EAEiB,EAFjB,EAE2B;AAF3B,EAGJA,OAHI,CAGI,QAHJ,EAGc,GAHd,EAG2B;AAH3B,EAIJA,OAJI,CAII,KAJJ,EAIW,EAJX,EAI2B;AAJ3B,EAKJA,OALI,CAKI,KALJ,EAKW,EALX,CAAP,CADkC,CAMA;AACnC,CAPD,yH;;;;;;;;;;;ACrBA,KAAKyE,OAAL,GAAe,IAAIC,MAAMC,UAAV,CAAqB,SAArB,CAAf;;AAEA,KAAKF,OAAL,CAAaG,aAAb,GAA6B,UAASC,MAAT,EAAiBhC,GAAjB,EAAsB;AAClD,QAAO,IAAP;AACA,CAFD;;AAIA,KAAK4B,OAAL,CAAaK,aAAb,GAA6B,UAASD,MAAT,EAAiBhC,GAAjB,EAAsB;AAClD,QAAOgC,WAAWhC,IAAIkC,OAAJ,IAAeF,MAAf,IAAyBG,MAAMC,SAAN,CAAgBJ,MAAhB,EAAwB,CAAC,OAAD,EAAS,MAAT,CAAxB,CAApC,CAAP;AACA,CAFD;;AAIA,KAAKJ,OAAL,CAAaS,aAAb,GAA6B,UAASL,MAAT,EAAiBhC,GAAjB,EAAsB;AAClD,QAAO,IAAP;AACA,CAFD;;AAIA,KAAKsC,OAAL,GAAe,KAAKA,OAAL,IAAgB,EAA/B;AAEA,KAAKA,OAAL,CAAaV,OAAb,GAAuB,IAAIW,YAAJ,CAAiB;AACvCC,qBAAoB;AACnBC,SAAO,qBADY;AAEnBC,QAAMC,OAFa;AAGnBC,YAAU;AAHS,EADmB;AAMvCC,kBAAiB;AAChBJ,SAAO,sBADS;AAEhBC,QAAMC,OAFU;AAGhBC,YAAU;AAHM,EANsB;AAWvCE,eAAc;AACbL,SAAO,qBADM;AAEbC,QAAMC,OAFO;AAGbC,YAAU;AAHG,EAXyB;AAgBvCG,oBAAmB;AAClBN,SAAO,mCADW;AAElBC,QAAMpC,MAFY;AAGlBsC,YAAU;AAHQ,EAhBoB;AAqBvCI,gBAAe;AACdP,SAAO,oBADO;AAEdC,QAAMO,MAFQ;AAGdL,YAAU,IAHI;AAIdM,gBAAc;AAJA,EArBwB;AA2BvCC,WAAU;AACTV,SAAO,UADE;AAETC,QAAMO,MAFG;AAGTG,WAAS,IAHA;AAITR,YAAU,IAJD;AAKTM,gBAAc;AALL;AA3B6B,CAAjB,CAAvB;AAoCA,KAAKtB,OAAL,CAAayB,YAAb,CAA0B,KAAKf,OAAL,CAAaV,OAAvC,4E;;;;;;;;;;;ACpDA,KAAK0B,eAAL,GAAuB,IAAIzB,MAAMC,UAAV,CAAqB,iBAArB,CAAvB;;AAEA,KAAKwB,eAAL,CAAqBvB,aAArB,GAAqC,UAASC,MAAT,EAAiBhC,GAAjB,EAAsB;AAC1D,QAAOmC,MAAMC,SAAN,CAAgBJ,MAAhB,EAAwB,CAAC,OAAD,EAAS,MAAT,CAAxB,CAAP;AACA,CAFD;;AAIA,KAAKsB,eAAL,CAAqBrB,aAArB,GAAqC,UAASD,MAAT,EAAiBhC,GAAjB,EAAsB;AAC1D,QAAOgC,UAAUG,MAAMC,SAAN,CAAgBJ,MAAhB,EAAwB,CAAC,OAAD,EAAS,MAAT,CAAxB,CAAjB;AACA,CAFD;;AAIA,KAAKsB,eAAL,CAAqBjB,aAArB,GAAqC,UAASL,MAAT,EAAiBhC,GAAjB,EAAsB;AAC1D,QAAO,IAAP;AACA,CAFD;;AAIA,KAAKsC,OAAL,GAAe,KAAKA,OAAL,IAAgB,EAA/B;AAEA,KAAKA,OAAL,CAAagB,eAAb,GAA+B,IAAIf,YAAJ,CAAiB;AAC/CgB,MAAK;AACJb,QAAMpC,MADF;AAEJsC,YAAU;AAFN,EAD0C;AAK/CY,OAAM;AACLf,SAAO,OADF;AAELC,QAAMO,MAFD;AAGLL,YAAU;AAHL,EALyC;AAU/Ca,OAAM;AACLhB,SAAO,OADF;AAELC,QAAMO,MAFD;AAGLL,YAAU;AAHL,EAVyC;AAe/Cc,OAAM;AACLjB,SAAO,OADF;AAELC,QAAMO,MAFD;AAGLL,YAAU;AAHL,EAfyC;AAoB/Ce,OAAM;AACLlB,SAAO,OADF;AAELC,QAAMO,MAFD;AAGLL,YAAU;AAHL,EApByC;AAyB/CgB,OAAM;AACLnB,SAAO,OADF;AAELC,QAAMO,MAFD;AAGLL,YAAU;AAHL,EAzByC;AA8B/CiB,OAAM;AACLpB,SAAO,OADF;AAELC,QAAMO,MAFD;AAGLL,YAAU;AAHL,EA9ByC;AAmC/CkB,OAAM;AACLrB,SAAO,OADF;AAELC,QAAMO,MAFD;AAGLL,YAAU;AAHL,EAnCyC;AAwC/CmB,OAAM;AACLtB,SAAO,OADF;AAELC,QAAMO,MAFD;AAGLL,YAAU;AAHL,EAxCyC;AA6C/CoB,OAAM;AACLvB,SAAO,OADF;AAELC,QAAMO,MAFD;AAGLL,YAAU;AAHL,EA7CyC;AAkD/CqB,QAAO;AACNxB,SAAO,OADD;AAENC,QAAMO,MAFA;AAGNL,YAAU;AAHJ,EAlDwC;AAuD/CsB,QAAO;AACNzB,SAAO,OADD;AAENC,QAAMO,MAFA;AAGNL,YAAU;AAHJ,EAvDwC;AA4D/CuB,QAAO;AACN1B,SAAO,OADD;AAENC,QAAMO,MAFA;AAGNL,YAAU;AAHJ,EA5DwC;AAiE/CwB,QAAO;AACN3B,SAAO,OADD;AAENC,QAAMO,MAFA;AAGNL,YAAU;AAHJ,EAjEwC;AAsE/CyB,QAAO;AACN5B,SAAO,OADD;AAENC,QAAMO,MAFA;AAGNL,YAAU;AAHJ,EAtEwC;AA2E/C0B,QAAO;AACN7B,SAAO,OADD;AAENC,QAAMO,MAFA;AAGNL,YAAU;AAHJ,EA3EwC;AAgF/C2B,QAAO;AACN9B,SAAO,OADD;AAENC,QAAMO,MAFA;AAGNL,YAAU;AAHJ,EAhFwC;AAqF/C4B,QAAO;AACN/B,SAAO,OADD;AAENC,QAAMO,MAFA;AAGNL,YAAU;AAHJ,EArFwC;AA0F/C6B,QAAO;AACNhC,SAAO,OADD;AAENC,QAAMO,MAFA;AAGNL,YAAU;AAHJ,EA1FwC;AA+F/C8B,QAAO;AACNjC,SAAO,OADD;AAENC,QAAMO,MAFA;AAGNL,YAAU;AAHJ,EA/FwC;AAoG/C+B,QAAO;AACNlC,SAAO,OADD;AAENC,QAAMO,MAFA;AAGNL,YAAU;AAHJ,EApGwC;AAyG/CgC,QAAO;AACNnC,SAAO,OADD;AAENC,QAAMO,MAFA;AAGNL,YAAU;AAHJ,EAzGwC;AA8G/CiC,QAAO;AACNpC,SAAO,OADD;AAENC,QAAMO,MAFA;AAGNL,YAAU;AAHJ,EA9GwC;AAmH/CkC,QAAO;AACNrC,SAAO,OADD;AAENC,QAAMO,MAFA;AAGNL,YAAU;AAHJ,EAnHwC;AAwH/CmC,QAAO;AACNtC,SAAO,OADD;AAENC,QAAMO,MAFA;AAGNL,YAAU;AAHJ,EAxHwC;AA6H/CoC,YAAW;AACVvC,SAAO,WADG;AAEVC,QAAMO;AAFI;AA7HoC,CAAjB,CAA/B;AAmIA,KAAKK,eAAL,CAAqBD,YAArB,CAAkC,KAAKf,OAAL,CAAagB,eAA/C,6D;;;;;;;;;;;ACnJA,KAAK2B,SAAL,GAAiB,IAAIpD,MAAMC,UAAV,CAAqB,WAArB,CAAjB;;AAEA,KAAKmD,SAAL,CAAelD,aAAf,GAA+B,UAASC,MAAT,EAAiBhC,GAAjB,EAAsB;AACpD,QAAO,IAAP;AACA,CAFD;;AAIA,KAAKiF,SAAL,CAAehD,aAAf,GAA+B,UAASD,MAAT,EAAiBhC,GAAjB,EAAsB;AACpD,QAAO,IAAP;AACA,CAFD;;AAIA,KAAKiF,SAAL,CAAe5C,aAAf,GAA+B,UAASL,MAAT,EAAiBhC,GAAjB,EAAsB;AACpD,QAAO,IAAP;AACA,CAFD;;AAIA,KAAKsC,OAAL,GAAe,KAAKA,OAAL,IAAgB,EAA/B;AAEA,KAAKA,OAAL,CAAa2C,SAAb,GAAyB,IAAI1C,YAAJ,CAAiB;AACzC2C,QAAO;AACNzC,SAAO,OADD;AAENC,QAAMO,MAFA;AAGNL,YAAU;AAHJ;AADkC,CAAjB,CAAzB;AAQA,KAAKqC,SAAL,CAAe5B,YAAf,CAA4B,KAAKf,OAAL,CAAa2C,SAAzC,wE;;;;;;;;;;;ACxBA,KAAKE,OAAL,GAAe,IAAItD,MAAMC,UAAV,CAAqB,SAArB,CAAf;;AAEA,KAAKqD,OAAL,CAAapD,aAAb,GAA6B,UAASC,MAAT,EAAiBhC,GAAjB,EAAsB;AAClD,QAAOmC,MAAMC,SAAN,CAAgBJ,MAAhB,EAAwB,CAAC,OAAD,EAAS,MAAT,CAAxB,CAAP;AACA,CAFD;;AAIA,KAAKmD,OAAL,CAAalD,aAAb,GAA6B,UAASD,MAAT,EAAiBhC,GAAjB,EAAsB;AAClD,QAAOgC,UAAUG,MAAMC,SAAN,CAAgBJ,MAAhB,EAAwB,CAAC,OAAD,EAAS,MAAT,CAAxB,CAAjB;AACA,CAFD;;AAIA,KAAKmD,OAAL,CAAa9C,aAAb,GAA6B,UAASL,MAAT,EAAiBhC,GAAjB,EAAsB;AAClD,QAAOgC,UAAUG,MAAMC,SAAN,CAAgBJ,MAAhB,EAAwB,CAAC,OAAD,CAAxB,CAAjB;AACA,CAFD;;AAIA,KAAKM,OAAL,GAAe,KAAKA,OAAL,IAAgB,EAA/B;AAEA,KAAKA,OAAL,CAAa6C,OAAb,GAAuB,IAAI5C,YAAJ,CAAiB;AACvC6C,KAAI;AACH3C,SAAO,IADJ;AAEHC,QAAMpC;AAFH,EADmC;AAKvC+E,WAAU;AACT5C,SAAO,UADE;AAETC,QAAMpC,MAFG;AAGTsC,YAAU;AAHD,EAL6B;AAUvC0C,OAAM;AACL7C,SAAO,MADF;AAELC,QAAMpC,MAFD;AAGLsC,YAAU;AAHL,EAViC;AAevC2C,OAAM;AACL9C,SAAO,MADF;AAELC,QAAMpC,MAFD;AAGLsC,YAAU;AAHL,EAfiC;AAoBvC4C,OAAM;AACL/C,SAAO,aADF;AAELC,QAAMO,MAFD;AAGLG,WAAS,IAHJ;AAILR,YAAU;AAJL,EApBiC;AA0BvC6C,MAAK;AACJhD,SAAO,UADH;AAEJC,QAAMO,MAFF;AAGJG,WAAS,IAHL;AAIJR,YAAU;AAJN,EA1BkC;AAgCvC8C,SAAQ;AACPjD,SAAO,SADA;AAEPC,QAAMC,OAFC;AAGPC,YAAU;AAHH,EAhC+B;AAqCvCI,gBAAe;AACdP,SAAO,uCADO;AAEdC,QAAMO,MAFQ;AAGdL,YAAU;AAHI,EArCwB;AA0CvC+C,KAAI;AACHlD,SAAO,SADJ;AAEHC,QAAMC,OAFH;AAGHC,YAAU;AAHP;AA1CmC,CAAjB,CAAvB;AAiDA,KAAKuC,OAAL,CAAa9B,YAAb,CAA0B,KAAKf,OAAL,CAAa6C,OAAvC,4E;;;;;;;;;;;ACjEA,KAAKS,IAAL,GAAY,IAAI/D,MAAMC,UAAV,CAAqB,MAArB,CAAZ;;AAEA,KAAK8D,IAAL,CAAU7D,aAAV,GAA0B,UAASC,MAAT,EAAiBhC,GAAjB,EAAsB;AAC/C,QAAO,IAAP;AACA,CAFD;;AAIA,KAAK4F,IAAL,CAAU3D,aAAV,GAA0B,UAASD,MAAT,EAAiBhC,GAAjB,EAAsB;AAC/C,QAAO,IAAP;AACA,CAFD;;AAIA,KAAK4F,IAAL,CAAUvD,aAAV,GAA0B,UAASL,MAAT,EAAiBhC,GAAjB,EAAsB;AAC/C,QAAO,IAAP;AACA,CAFD;;AAIA,KAAKsC,OAAL,GAAe,KAAKA,OAAL,IAAgB,EAA/B;AAEA,KAAKA,OAAL,CAAasD,IAAb,GAAoB,IAAIrD,YAAJ,CAAiB;AACpCgB,MAAK;AACJd,SAAO,KADH;AAEJC,QAAMpC,MAFF;AAGJsC,YAAU;AAHN,EAD+B;AAMpCiD,WAAU;AACTpD,SAAO,UADE;AAETC,QAAM,CAACoD,MAAD,CAFG;AAGTC,YAAU,IAHD;AAITnD,YAAU;AAJD,EAN0B;AAYpCoD,WAAU;AACTvD,SAAO,UADE;AAETC,QAAM,CAACoD,MAAD,CAFG;AAGTC,YAAU,IAHD;AAITnD,YAAU;AAJD;AAZ0B,CAAjB,CAApB;AAoBA,KAAKgD,IAAL,CAAUvC,YAAV,CAAuB,KAAKf,OAAL,CAAasD,IAApC,kF;;;;;;;;;;;ACpCAhE,QAAQqE,KAAR,CAAc;AACbC,SAAQ,UAAUlE,MAAV,EAAkBhC,GAAlB,EAAuB;AAC9B,SAAO,KAAP;AACA,EAHY;AAKbmG,SAAQ,UAAUnE,MAAV,EAAkBhC,GAAlB,EAAuBoG,MAAvB,EAA+BC,QAA/B,EAAyC;AAChD,SAAO,KAAP;AACA,EAPY;AASbC,SAAQ,UAAUtE,MAAV,EAAkBhC,GAAlB,EAAuB;AAC9B,SAAO,KAAP;AACA;AAXY,CAAd;AAcA4B,QAAQ2E,MAAR,CAAeL,MAAf,CAAsB,UAASlE,MAAT,EAAiBhC,GAAjB,EAAsB;AAC3CA,KAAIwG,SAAJ,GAAgB,IAAIC,IAAJ,EAAhB;AACAzG,KAAI0G,SAAJ,GAAgB1E,MAAhB;AACAhC,KAAI2G,UAAJ,GAAiB3G,IAAIwG,SAArB;AACAxG,KAAI4G,UAAJ,GAAiB5G,IAAI0G,SAArB;AAGA,KAAG,CAAC1G,IAAIkC,OAAR,EAAiBlC,IAAIkC,OAAJ,GAAcF,MAAd;AACjB,CARD;AAUAJ,QAAQ2E,MAAR,CAAeJ,MAAf,CAAsB,UAASnE,MAAT,EAAiBhC,GAAjB,EAAsB6G,UAAtB,EAAkCR,QAAlC,EAA4CS,OAA5C,EAAqD;AAC1ET,UAASU,IAAT,GAAgBV,SAASU,IAAT,IAAiB,EAAjC;AACAV,UAASU,IAAT,CAAcJ,UAAd,GAA2B,IAAIF,IAAJ,EAA3B;AACAJ,UAASU,IAAT,CAAcH,UAAd,GAA2B5E,MAA3B;AAGA,CAND;AAQAJ,QAAQ2E,MAAR,CAAeS,MAAf,CAAsB,UAAShF,MAAT,EAAiBiF,QAAjB,EAA2BZ,QAA3B,EAAqCS,OAArC,EAA8C;AACnET,UAASU,IAAT,GAAgBV,SAASU,IAAT,IAAiB,EAAjC;AACAV,UAASU,IAAT,CAAcJ,UAAd,GAA2B,IAAIF,IAAJ,EAA3B;AACAJ,UAASU,IAAT,CAAcH,UAAd,GAA2B5E,MAA3B,CAHmE,CAKnE;AACA,CAND;AAQAJ,QAAQ2E,MAAR,CAAeD,MAAf,CAAsB,UAAStE,MAAT,EAAiBhC,GAAjB,EAAsB,CAE3C,CAFD;AAIA4B,QAAQsF,KAAR,CAAchB,MAAd,CAAqB,UAASlE,MAAT,EAAiBhC,GAAjB,EAAsB,CAE1C,CAFD;AAIA4B,QAAQsF,KAAR,CAAcf,MAAd,CAAqB,UAASnE,MAAT,EAAiBhC,GAAjB,EAAsB6G,UAAtB,EAAkCR,QAAlC,EAA4CS,OAA5C,EAAqD,CAEzE,CAFD;AAIAlF,QAAQsF,KAAR,CAAcZ,MAAd,CAAqB,UAAStE,MAAT,EAAiBhC,GAAjB,EAAsB,CAE1C,CAFD,4E;;;;;;;;;;;ACpDAsD,gBAAgB2C,KAAhB,CAAsB;AACrBC,SAAQ,UAAUlE,MAAV,EAAkBhC,GAAlB,EAAuB;AAC9B,SAAO,KAAP;AACA,EAHoB;AAKrBmG,SAAQ,UAAUnE,MAAV,EAAkBhC,GAAlB,EAAuBoG,MAAvB,EAA+BC,QAA/B,EAAyC;AAChD,SAAO,KAAP;AACA,EAPoB;AASrBC,SAAQ,UAAUtE,MAAV,EAAkBhC,GAAlB,EAAuB;AAC9B,SAAO,KAAP;AACA;AAXoB,CAAtB;AAcAsD,gBAAgBiD,MAAhB,CAAuBL,MAAvB,CAA8B,UAASlE,MAAT,EAAiBhC,GAAjB,EAAsB;AACnDA,KAAIwG,SAAJ,GAAgB,IAAIC,IAAJ,EAAhB;AACAzG,KAAI0G,SAAJ,GAAgB1E,MAAhB;AACAhC,KAAI2G,UAAJ,GAAiB3G,IAAIwG,SAArB;AACAxG,KAAI4G,UAAJ,GAAiB5G,IAAI0G,SAArB;AAGA,KAAG,CAAC1G,IAAIkC,OAAR,EAAiBlC,IAAIkC,OAAJ,GAAcF,MAAd;AACjB,CARD;AAUAsB,gBAAgBiD,MAAhB,CAAuBJ,MAAvB,CAA8B,UAASnE,MAAT,EAAiBhC,GAAjB,EAAsB6G,UAAtB,EAAkCR,QAAlC,EAA4CS,OAA5C,EAAqD;AAClFT,UAASU,IAAT,GAAgBV,SAASU,IAAT,IAAiB,EAAjC;AACAV,UAASU,IAAT,CAAcJ,UAAd,GAA2B,IAAIF,IAAJ,EAA3B;AACAJ,UAASU,IAAT,CAAcH,UAAd,GAA2B5E,MAA3B;AAGA,CAND;AAQAsB,gBAAgBiD,MAAhB,CAAuBS,MAAvB,CAA8B,UAAShF,MAAT,EAAiBiF,QAAjB,EAA2BZ,QAA3B,EAAqCS,OAArC,EAA8C;AAC3ET,UAASU,IAAT,GAAgBV,SAASU,IAAT,IAAiB,EAAjC;AACAV,UAASU,IAAT,CAAcJ,UAAd,GAA2B,IAAIF,IAAJ,EAA3B;AACAJ,UAASU,IAAT,CAAcH,UAAd,GAA2B5E,MAA3B,CAH2E,CAK3E;AACA,CAND;AAQAsB,gBAAgBiD,MAAhB,CAAuBD,MAAvB,CAA8B,UAAStE,MAAT,EAAiBhC,GAAjB,EAAsB,CAEnD,CAFD;AAIAsD,gBAAgB4D,KAAhB,CAAsBhB,MAAtB,CAA6B,UAASlE,MAAT,EAAiBhC,GAAjB,EAAsB,CAElD,CAFD;AAIAsD,gBAAgB4D,KAAhB,CAAsBf,MAAtB,CAA6B,UAASnE,MAAT,EAAiBhC,GAAjB,EAAsB6G,UAAtB,EAAkCR,QAAlC,EAA4CS,OAA5C,EAAqD,CAEjF,CAFD;AAIAxD,gBAAgB4D,KAAhB,CAAsBZ,MAAtB,CAA6B,UAAStE,MAAT,EAAiBhC,GAAjB,EAAsB,CAElD,CAFD,oE;;;;;;;;;;;ACpDAiF,UAAUgB,KAAV,CAAgB;AACfC,SAAQ,UAAUlE,MAAV,EAAkBhC,GAAlB,EAAuB;AAC9B,SAAO,KAAP;AACA,EAHc;AAKfmG,SAAQ,UAAUnE,MAAV,EAAkBhC,GAAlB,EAAuBoG,MAAvB,EAA+BC,QAA/B,EAAyC;AAChD,SAAO,KAAP;AACA,EAPc;AASfC,SAAQ,UAAUtE,MAAV,EAAkBhC,GAAlB,EAAuB;AAC9B,SAAO,KAAP;AACA;AAXc,CAAhB;AAcAiF,UAAUsB,MAAV,CAAiBL,MAAjB,CAAwB,UAASlE,MAAT,EAAiBhC,GAAjB,EAAsB;AAC7CA,KAAIwG,SAAJ,GAAgB,IAAIC,IAAJ,EAAhB;AACAzG,KAAI0G,SAAJ,GAAgB1E,MAAhB;AACAhC,KAAI2G,UAAJ,GAAiB3G,IAAIwG,SAArB;AACAxG,KAAI4G,UAAJ,GAAiB5G,IAAI0G,SAArB;AAGA,KAAG,CAAC1G,IAAI0G,SAAR,EAAmB1G,IAAI0G,SAAJ,GAAgB1E,MAAhB;AACnB,CARD;AAUAiD,UAAUsB,MAAV,CAAiBJ,MAAjB,CAAwB,UAASnE,MAAT,EAAiBhC,GAAjB,EAAsB6G,UAAtB,EAAkCR,QAAlC,EAA4CS,OAA5C,EAAqD;AAC5ET,UAASU,IAAT,GAAgBV,SAASU,IAAT,IAAiB,EAAjC;AACAV,UAASU,IAAT,CAAcJ,UAAd,GAA2B,IAAIF,IAAJ,EAA3B;AACAJ,UAASU,IAAT,CAAcH,UAAd,GAA2B5E,MAA3B;AAGA,CAND;AAQAiD,UAAUsB,MAAV,CAAiBS,MAAjB,CAAwB,UAAShF,MAAT,EAAiBiF,QAAjB,EAA2BZ,QAA3B,EAAqCS,OAArC,EAA8C;AACrET,UAASU,IAAT,GAAgBV,SAASU,IAAT,IAAiB,EAAjC;AACAV,UAASU,IAAT,CAAcJ,UAAd,GAA2B,IAAIF,IAAJ,EAA3B;AACAJ,UAASU,IAAT,CAAcH,UAAd,GAA2B5E,MAA3B,CAHqE,CAKrE;AACA,CAND;AAQAiD,UAAUsB,MAAV,CAAiBD,MAAjB,CAAwB,UAAStE,MAAT,EAAiBhC,GAAjB,EAAsB,CAE7C,CAFD;AAIAiF,UAAUiC,KAAV,CAAgBhB,MAAhB,CAAuB,UAASlE,MAAT,EAAiBhC,GAAjB,EAAsB,CAE5C,CAFD;AAIAiF,UAAUiC,KAAV,CAAgBf,MAAhB,CAAuB,UAASnE,MAAT,EAAiBhC,GAAjB,EAAsB6G,UAAtB,EAAkCR,QAAlC,EAA4CS,OAA5C,EAAqD,CAE3E,CAFD;AAIA7B,UAAUiC,KAAV,CAAgBZ,MAAhB,CAAuB,UAAStE,MAAT,EAAiBhC,GAAjB,EAAsB,CAE5C,CAFD,0E;;;;;;;;;;;ACpDAmF,QAAQc,KAAR,CAAc;AACbC,SAAQ,UAAUlE,MAAV,EAAkBhC,GAAlB,EAAuB;AAC9B,SAAO,KAAP;AACA,EAHY;AAKbmG,SAAQ,UAAUnE,MAAV,EAAkBhC,GAAlB,EAAuBoG,MAAvB,EAA+BC,QAA/B,EAAyC;AAChD,SAAO,KAAP;AACA,EAPY;AASbC,SAAQ,UAAUtE,MAAV,EAAkBhC,GAAlB,EAAuB;AAC9B,SAAO,KAAP;AACA;AAXY,CAAd;AAcAmF,QAAQoB,MAAR,CAAeL,MAAf,CAAsB,UAASlE,MAAT,EAAiBhC,GAAjB,EAAsB;AAC3CA,KAAIwG,SAAJ,GAAgB,IAAIC,IAAJ,EAAhB;AACAzG,KAAI0G,SAAJ,GAAgB1E,MAAhB;AACAhC,KAAI2G,UAAJ,GAAiB3G,IAAIwG,SAArB;AACAxG,KAAI4G,UAAJ,GAAiB5G,IAAI0G,SAArB;AAGA,KAAG,CAAC1G,IAAI0G,SAAR,EAAmB1G,IAAI0G,SAAJ,GAAgB1E,MAAhB;AACnB,CARD;AAUAmD,QAAQoB,MAAR,CAAeJ,MAAf,CAAsB,UAASnE,MAAT,EAAiBhC,GAAjB,EAAsB6G,UAAtB,EAAkCR,QAAlC,EAA4CS,OAA5C,EAAqD;AAC1ET,UAASU,IAAT,GAAgBV,SAASU,IAAT,IAAiB,EAAjC;AACAV,UAASU,IAAT,CAAcJ,UAAd,GAA2B,IAAIF,IAAJ,EAA3B;AACAJ,UAASU,IAAT,CAAcH,UAAd,GAA2B5E,MAA3B;AAGA,CAND;AAQAmD,QAAQoB,MAAR,CAAeS,MAAf,CAAsB,UAAShF,MAAT,EAAiBiF,QAAjB,EAA2BZ,QAA3B,EAAqCS,OAArC,EAA8C;AACnET,UAASU,IAAT,GAAgBV,SAASU,IAAT,IAAiB,EAAjC;AACAV,UAASU,IAAT,CAAcJ,UAAd,GAA2B,IAAIF,IAAJ,EAA3B;AACAJ,UAASU,IAAT,CAAcH,UAAd,GAA2B5E,MAA3B,CAHmE,CAKnE;AACA,CAND;AAQAmD,QAAQoB,MAAR,CAAeD,MAAf,CAAsB,UAAStE,MAAT,EAAiBhC,GAAjB,EAAsB,CAE3C,CAFD;AAIAmF,QAAQ+B,KAAR,CAAchB,MAAd,CAAqB,UAASlE,MAAT,EAAiBhC,GAAjB,EAAsB,CAE1C,CAFD;AAIAmF,QAAQ+B,KAAR,CAAcf,MAAd,CAAqB,UAASnE,MAAT,EAAiBhC,GAAjB,EAAsB6G,UAAtB,EAAkCR,QAAlC,EAA4CS,OAA5C,EAAqD,CAEzE,CAFD;AAIA3B,QAAQ+B,KAAR,CAAcZ,MAAd,CAAqB,UAAStE,MAAT,EAAiBhC,GAAjB,EAAsB,CAE1C,CAFD,4E;;;;;;;;;;;ACpDA4F,KAAKK,KAAL,CAAW;AACVC,SAAQ,UAAUlE,MAAV,EAAkBhC,GAAlB,EAAuB;AAC9B,SAAO,KAAP;AACA,EAHS;AAKVmG,SAAQ,UAAUnE,MAAV,EAAkBhC,GAAlB,EAAuBoG,MAAvB,EAA+BC,QAA/B,EAAyC;AAChD,SAAO,KAAP;AACA,EAPS;AASVC,SAAQ,UAAUtE,MAAV,EAAkBhC,GAAlB,EAAuB;AAC9B,SAAO,KAAP;AACA;AAXS,CAAX;AAcA4F,KAAKW,MAAL,CAAYL,MAAZ,CAAmB,UAASlE,MAAT,EAAiBhC,GAAjB,EAAsB;AACxCA,KAAIwG,SAAJ,GAAgB,IAAIC,IAAJ,EAAhB;AACAzG,KAAI0G,SAAJ,GAAgB1E,MAAhB;AACAhC,KAAI2G,UAAJ,GAAiB3G,IAAIwG,SAArB;AACAxG,KAAI4G,UAAJ,GAAiB5G,IAAI0G,SAArB;AAGA,KAAG,CAAC1G,IAAI0G,SAAR,EAAmB1G,IAAI0G,SAAJ,GAAgB1E,MAAhB;AACnB,CARD;AAUA4D,KAAKW,MAAL,CAAYJ,MAAZ,CAAmB,UAASnE,MAAT,EAAiBhC,GAAjB,EAAsB6G,UAAtB,EAAkCR,QAAlC,EAA4CS,OAA5C,EAAqD;AACvET,UAASU,IAAT,GAAgBV,SAASU,IAAT,IAAiB,EAAjC;AACAV,UAASU,IAAT,CAAcJ,UAAd,GAA2B,IAAIF,IAAJ,EAA3B;AACAJ,UAASU,IAAT,CAAcH,UAAd,GAA2B5E,MAA3B;AAGA,CAND;AAQA4D,KAAKW,MAAL,CAAYS,MAAZ,CAAmB,UAAShF,MAAT,EAAiBiF,QAAjB,EAA2BZ,QAA3B,EAAqCS,OAArC,EAA8C;AAChET,UAASU,IAAT,GAAgBV,SAASU,IAAT,IAAiB,EAAjC;AACAV,UAASU,IAAT,CAAcJ,UAAd,GAA2B,IAAIF,IAAJ,EAA3B;AACAJ,UAASU,IAAT,CAAcH,UAAd,GAA2B5E,MAA3B,CAHgE,CAKhE;AACA,CAND;AAQA4D,KAAKW,MAAL,CAAYD,MAAZ,CAAmB,UAAStE,MAAT,EAAiBhC,GAAjB,EAAsB,CAExC,CAFD;AAIA4F,KAAKsB,KAAL,CAAWhB,MAAX,CAAkB,UAASlE,MAAT,EAAiBhC,GAAjB,EAAsB,CAEvC,CAFD;AAIA4F,KAAKsB,KAAL,CAAWf,MAAX,CAAkB,UAASnE,MAAT,EAAiBhC,GAAjB,EAAsB6G,UAAtB,EAAkCR,QAAlC,EAA4CS,OAA5C,EAAqD,CAEtE,CAFD;AAIAlB,KAAKsB,KAAL,CAAWZ,MAAX,CAAkB,UAAStE,MAAT,EAAiBhC,GAAjB,EAAsB,CAEvC,CAFD,+E;;;;;;;;;;;ACpDAmH,OAAOC,GAAP,CAAW,YAAY,CAEtB,CAFD,gG;;;;;;;;;;;ACAAC,OAAOC,OAAP,CAAe;AACd,kBAAiB,UAAS5H,IAAT,EAAe;AAC/B,MAAG,CAACkC,QAAQG,aAAR,CAAsB,KAAKC,MAA3B,EAAmCtC,IAAnC,CAAJ,EAA8C;AAC7C,SAAM,IAAI2H,OAAOE,KAAX,CAAiB,GAAjB,EAAsB,YAAtB,CAAN;AACA;;AAED,SAAO3F,QAAQsE,MAAR,CAAexG,IAAf,CAAP;AACA,EAPa;AASd,kBAAiB,UAAS8H,EAAT,EAAa9H,IAAb,EAAmB;AACnC,MAAIM,MAAM4B,QAAQ6F,OAAR,CAAgB;AAAEC,QAAKF;AAAP,GAAhB,CAAV;;AACA,MAAG,CAAC5F,QAAQK,aAAR,CAAsB,KAAKD,MAA3B,EAAmChC,GAAnC,CAAJ,EAA6C;AAC5C,SAAM,IAAIqH,OAAOE,KAAX,CAAiB,GAAjB,EAAsB,YAAtB,CAAN;AACA;;AAED3F,UAAQuE,MAAR,CAAe;AAAEuB,QAAKF;AAAP,GAAf,EAA4B;AAAET,SAAMrH;AAAR,GAA5B;AACA,EAhBa;AAkBd,kBAAiB,UAAS8H,EAAT,EAAa;AAC7B,MAAIxH,MAAM4B,QAAQ6F,OAAR,CAAgB;AAAEC,QAAKF;AAAP,GAAhB,CAAV;;AACA,MAAG,CAAC5F,QAAQS,aAAR,CAAsB,KAAKL,MAA3B,EAAmChC,GAAnC,CAAJ,EAA6C;AAC5C,SAAM,IAAIqH,OAAOE,KAAX,CAAiB,GAAjB,EAAsB,YAAtB,CAAN;AACA;;AAED3F,UAAQ0E,MAAR,CAAe;AAAEoB,QAAKF;AAAP,GAAf;AACA;AAzBa,CAAf,wH;;;;;;;;;;;ACAAH,OAAOC,OAAP,CAAe;AACd,0BAAyB,UAAS5H,IAAT,EAAe;AACvC,MAAG,CAAC4D,gBAAgBvB,aAAhB,CAA8B,KAAKC,MAAnC,EAA2CtC,IAA3C,CAAJ,EAAsD;AACrD,SAAM,IAAI2H,OAAOE,KAAX,CAAiB,GAAjB,EAAsB,YAAtB,CAAN;AACA;;AAED,SAAOjE,gBAAgB4C,MAAhB,CAAuBxG,IAAvB,CAAP;AACA,EAPa;AASd,0BAAyB,UAAS8H,EAAT,EAAa9H,IAAb,EAAmB;AAC3C,MAAIM,MAAMsD,gBAAgBmE,OAAhB,CAAwB;AAAEC,QAAKF;AAAP,GAAxB,CAAV;;AACA,MAAG,CAAClE,gBAAgBrB,aAAhB,CAA8B,KAAKD,MAAnC,EAA2ChC,GAA3C,CAAJ,EAAqD;AACpD,SAAM,IAAIqH,OAAOE,KAAX,CAAiB,GAAjB,EAAsB,YAAtB,CAAN;AACA;;AAEDjE,kBAAgB6C,MAAhB,CAAuB;AAAEuB,QAAKF;AAAP,GAAvB,EAAoC;AAAET,SAAMrH;AAAR,GAApC;AACA,EAhBa;AAkBd,0BAAyB,UAAS8H,EAAT,EAAa;AACrC,MAAIxH,MAAMsD,gBAAgBmE,OAAhB,CAAwB;AAAEC,QAAKF;AAAP,GAAxB,CAAV;;AACA,MAAG,CAAClE,gBAAgBjB,aAAhB,CAA8B,KAAKL,MAAnC,EAA2ChC,GAA3C,CAAJ,EAAqD;AACpD,SAAM,IAAIqH,OAAOE,KAAX,CAAiB,GAAjB,EAAsB,YAAtB,CAAN;AACA;;AAEDjE,kBAAgBgD,MAAhB,CAAuB;AAAEoB,QAAKF;AAAP,GAAvB;AACA;AAzBa,CAAf,wH;;;;;;;;;;;ACAAH,OAAOC,OAAP,CAAe;AACd,oBAAmB,UAAS5H,IAAT,EAAe;AACjC,MAAG,CAACuF,UAAUlD,aAAV,CAAwB,KAAKC,MAA7B,EAAqCtC,IAArC,CAAJ,EAAgD;AAC/C,SAAM,IAAI2H,OAAOE,KAAX,CAAiB,GAAjB,EAAsB,YAAtB,CAAN;AACA;;AAED,SAAOtC,UAAUiB,MAAV,CAAiBxG,IAAjB,CAAP;AACA,EAPa;AASd,oBAAmB,UAAS8H,EAAT,EAAa9H,IAAb,EAAmB;AACrC,MAAIM,MAAMiF,UAAUwC,OAAV,CAAkB;AAAEC,QAAKF;AAAP,GAAlB,CAAV;;AACA,MAAG,CAACvC,UAAUhD,aAAV,CAAwB,KAAKD,MAA7B,EAAqChC,GAArC,CAAJ,EAA+C;AAC9C,SAAM,IAAIqH,OAAOE,KAAX,CAAiB,GAAjB,EAAsB,YAAtB,CAAN;AACA;;AAEDtC,YAAUkB,MAAV,CAAiB;AAAEuB,QAAKF;AAAP,GAAjB,EAA8B;AAAET,SAAMrH;AAAR,GAA9B;AACA,EAhBa;AAkBd,oBAAmB,UAAS8H,EAAT,EAAa;AAC/B,MAAIxH,MAAMiF,UAAUwC,OAAV,CAAkB;AAAEC,QAAKF;AAAP,GAAlB,CAAV;;AACA,MAAG,CAACvC,UAAU5C,aAAV,CAAwB,KAAKL,MAA7B,EAAqChC,GAArC,CAAJ,EAA+C;AAC9C,SAAM,IAAIqH,OAAOE,KAAX,CAAiB,GAAjB,EAAsB,YAAtB,CAAN;AACA;;AAEDtC,YAAUqB,MAAV,CAAiB;AAAEoB,QAAKF;AAAP,GAAjB;AACA;AAzBa,CAAf,wH;;;;;;;;;;;ACAAH,OAAOC,OAAP,CAAe;AACd,kBAAiB,UAAS5H,IAAT,EAAe;AAC/B,MAAG,CAACyF,QAAQpD,aAAR,CAAsB,KAAKC,MAA3B,EAAmCtC,IAAnC,CAAJ,EAA8C;AAC7C,SAAM,IAAI2H,OAAOE,KAAX,CAAiB,GAAjB,EAAsB,YAAtB,CAAN;AACA;;AAED,SAAOpC,QAAQe,MAAR,CAAexG,IAAf,CAAP;AACA,EAPa;AASd,kBAAiB,UAAS8H,EAAT,EAAa9H,IAAb,EAAmB;AACnC,MAAIM,MAAMmF,QAAQsC,OAAR,CAAgB;AAAEC,QAAKF;AAAP,GAAhB,CAAV;;AACA,MAAG,CAACrC,QAAQlD,aAAR,CAAsB,KAAKD,MAA3B,EAAmChC,GAAnC,CAAJ,EAA6C;AAC5C,SAAM,IAAIqH,OAAOE,KAAX,CAAiB,GAAjB,EAAsB,YAAtB,CAAN;AACA;;AAEDpC,UAAQgB,MAAR,CAAe;AAAEuB,QAAKF;AAAP,GAAf,EAA4B;AAAET,SAAMrH;AAAR,GAA5B;AACA,EAhBa;AAkBd,kBAAiB,UAAS8H,EAAT,EAAa;AAC7B,MAAIxH,MAAMmF,QAAQsC,OAAR,CAAgB;AAAEC,QAAKF;AAAP,GAAhB,CAAV;;AACA,MAAG,CAACrC,QAAQ9C,aAAR,CAAsB,KAAKL,MAA3B,EAAmChC,GAAnC,CAAJ,EAA6C;AAC5C,SAAM,IAAIqH,OAAOE,KAAX,CAAiB,GAAjB,EAAsB,YAAtB,CAAN;AACA;;AAEDpC,UAAQmB,MAAR,CAAe;AAAEoB,QAAKF;AAAP,GAAf;AACA;AAzBa,CAAf,wH;;;;;;;;;;;ACAAH,OAAOC,OAAP,CAAe;AACd,eAAc,UAAS5H,IAAT,EAAe;AAC5B,MAAG,CAACkG,KAAK7D,aAAL,CAAmB,KAAKC,MAAxB,EAAgCtC,IAAhC,CAAJ,EAA2C;AAC1C,SAAM,IAAI2H,OAAOE,KAAX,CAAiB,GAAjB,EAAsB,YAAtB,CAAN;AACA;;AAED,SAAO3B,KAAKM,MAAL,CAAYxG,IAAZ,CAAP;AACA,EAPa;AASd,eAAc,UAAS8H,EAAT,EAAa9H,IAAb,EAAmB;AAChC,MAAIM,MAAM4F,KAAK6B,OAAL,CAAa;AAAEC,QAAKF;AAAP,GAAb,CAAV;;AACA,MAAG,CAAC5B,KAAK3D,aAAL,CAAmB,KAAKD,MAAxB,EAAgChC,GAAhC,CAAJ,EAA0C;AACzC,SAAM,IAAIqH,OAAOE,KAAX,CAAiB,GAAjB,EAAsB,YAAtB,CAAN;AACA;;AAED3B,OAAKO,MAAL,CAAY;AAAEuB,QAAKF;AAAP,GAAZ,EAAyB;AAAET,SAAMrH;AAAR,GAAzB;AACA,EAhBa;AAkBd,eAAc,UAAS8H,EAAT,EAAa;AAC1B,MAAIxH,MAAM4F,KAAK6B,OAAL,CAAa;AAAEC,QAAKF;AAAP,GAAb,CAAV;;AACA,MAAG,CAAC5B,KAAKvD,aAAL,CAAmB,KAAKL,MAAxB,EAAgChC,GAAhC,CAAJ,EAA0C;AACzC,SAAM,IAAIqH,OAAOE,KAAX,CAAiB,GAAjB,EAAsB,YAAtB,CAAN;AACA;;AAED3B,OAAKU,MAAL,CAAY;AAAEoB,QAAKF;AAAP,GAAZ;AACA;AAzBa,CAAf,wH;;;;;;;;;;;ACAAH,OAAOM,OAAP,CAAe,mBAAf,EAAoC,UAASC,SAAT,EAAoB;AACvD,KAAGzF,MAAMC,SAAN,CAAgB,KAAKJ,MAArB,EAA6B,CAAC,OAAD,EAAS,MAAT,CAA7B,CAAH,EAAmD;AAClD,SAAOJ,QAAQR,IAAR,CAAa;AAACsG,QAAIE;AAAL,GAAb,EAA8B,EAA9B,CAAP;AACA;;AACD,QAAO,KAAKC,KAAL,EAAP;AACA,CALD;AAOAR,OAAOM,OAAP,CAAe,eAAf,EAAgC,YAAW;AAC1C,KAAGxF,MAAMC,SAAN,CAAgB,KAAKJ,MAArB,EAA6B,CAAC,OAAD,EAAS,MAAT,CAA7B,CAAH,EAAmD;AAClD,SAAOJ,QAAQR,IAAR,CAAa,EAAb,EAAiB,EAAjB,CAAP;AACA;;AACD,QAAO,KAAKyG,KAAL,EAAP;AACA,CALD,yH;;;;;;;;;;;ACPAR,OAAOM,OAAP,CAAe,uBAAf,EAAwC,YAAW;AAClD,KAAGxF,MAAMC,SAAN,CAAgB,KAAKJ,MAArB,EAA6B,CAAC,OAAD,EAAS,MAAT,CAA7B,CAAH,EAAmD;AAClD,SAAOsB,gBAAgBlC,IAAhB,CAAqB,EAArB,EAAyB;AAAC0G,SAAK;AAAC9C,eAAU;AAAX;AAAN,GAAzB,CAAP;AACA;;AACD,QAAO,KAAK6C,KAAL,EAAP;AACA,CALD;AAOAR,OAAOM,OAAP,CAAe,2BAAf,EAA4C,UAASI,iBAAT,EAA4B;AACvE,KAAG5F,MAAMC,SAAN,CAAgB,KAAKJ,MAArB,EAA6B,CAAC,OAAD,EAAS,MAAT,CAA7B,CAAH,EAAmD;AAClD,SAAOsB,gBAAgBlC,IAAhB,CAAqB;AAACsG,QAAIK;AAAL,GAArB,EAA8C,EAA9C,CAAP;AACA;;AACD,QAAO,KAAKF,KAAL,EAAP;AACA,CALD,yH;;;;;;;;;;;ACPAR,OAAOM,OAAP,CAAe,iBAAf,EAAkC,YAAW;AAC5C,QAAO1C,UAAU7D,IAAV,CAAe,EAAf,EAAmB,EAAnB,CAAP;AACA,CAFD,wH;;;;;;;;;;;ACAAiG,OAAOM,OAAP,CAAe,eAAf,EAAgC,YAAW;AAC1C,QAAOxC,QAAQ/D,IAAR,CAAa,EAAb,EAAiB,EAAjB,CAAP;AACA,CAFD;AAIAiG,OAAOM,OAAP,CAAe,mBAAf,EAAoC,UAASK,SAAT,EAAoB;AACvD,QAAO7C,QAAQ/D,IAAR,CAAa;AAACsG,OAAIM;AAAL,EAAb,EAA8B,EAA9B,CAAP;AACA,CAFD;AAIAX,OAAOM,OAAP,CAAe,eAAf,EAAgC,YAAW;AAC1C,QAAOxC,QAAQ/D,IAAR,CAAa;AAACgE,MAAG;AAAJ,EAAb,EAAwB,EAAxB,CAAP;AACA,CAFD;AAIAiC,OAAOM,OAAP,CAAe,oBAAf,EAAqC,YAAW;AAC/C,QAAOxC,QAAQ/D,IAAR,CAAa;AAACmE,QAAK;AAAN,EAAb,EAA6B,EAA7B,CAAP;AACA,CAFD,yH;;;;;;;;;;;ACZA8B,OAAOM,OAAP,CAAe,SAAf,EAA0B,UAASM,KAAT,EAAgB;AACzC,QAAOrC,KAAKxE,IAAL,CAAU;AAACmC,OAAI0E;AAAL,EAAV,EAAuB,EAAvB,CAAP;AACA,CAFD;AAIAZ,OAAOM,OAAP,CAAe,WAAf,EAA4B,YAAW;AACtC,QAAO/B,KAAKxE,IAAL,CAAU,EAAV,EAAc,EAAd,CAAP;AACA,CAFD,wH;;;;;;;;;;;ACJA,IAAI8G,cAAc,IAAlB;AAEAC,SAASC,MAAT,CAAgB;AAAEC,wBAAuBH;AAAzB,CAAhB;AAEAb,OAAOiB,OAAP,CAAe,YAAW;AACzB;AACA,KAAGjB,OAAOkB,QAAP,IAAmBlB,OAAOkB,QAAP,CAAgBC,GAAnC,IAA0C1I,EAAE2I,QAAF,CAAWpB,OAAOkB,QAAP,CAAgBC,GAA3B,CAA7C,EAA8E;AAC7E,OAAI,IAAIE,YAAR,2CAAwBrB,OAAOkB,QAAP,CAAgBC,GAAxC,GAA6C;AAC5CG,WAAQH,GAAR,CAAYE,YAAZ,IAA4BrB,OAAOkB,QAAP,CAAgBC,GAAhB,CAAoBE,YAApB,CAA5B;AACA;AACD,EANwB,CAQzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,KAAGP,YAAYA,SAASS,yBAArB,IAAkDvB,OAAOkB,QAAzD,IAAqElB,OAAOkB,QAAP,CAAgBM,KAArF,IAA8F/I,EAAE2I,QAAF,CAAWpB,OAAOkB,QAAP,CAAgBM,KAA3B,CAAjG,EAAoI;AACnI;AACA,MAAGxB,OAAOkB,QAAP,CAAgBM,KAAhB,CAAsBC,MAAtB,IAAgChJ,EAAE2I,QAAF,CAAWpB,OAAOkB,QAAP,CAAgBM,KAAhB,CAAsBC,MAAjC,CAAnC,EAA6E;AAC5E;AACAX,YAASS,yBAAT,CAAmCtC,MAAnC,CAA0C;AACzCyC,aAAS;AADgC,IAA1C;AAIA,OAAIC,iBAAiB3B,OAAOkB,QAAP,CAAgBM,KAAhB,CAAsBC,MAA3C;AACAE,kBAAeD,OAAf,GAAyB,QAAzB,CAP4E,CAS5E;;AACAZ,YAASS,yBAAT,CAAmC1C,MAAnC,CAA0C8C,cAA1C;AACA,GAbkI,CAcnI;;;AACA,MAAG3B,OAAOkB,QAAP,CAAgBM,KAAhB,CAAsBI,MAAtB,IAAgCnJ,EAAE2I,QAAF,CAAWpB,OAAOkB,QAAP,CAAgBM,KAAhB,CAAsBI,MAAjC,CAAnC,EAA6E;AAC5E;AACAd,YAASS,yBAAT,CAAmCtC,MAAnC,CAA0C;AACzCyC,aAAS;AADgC,IAA1C;AAIA,OAAIC,iBAAiB3B,OAAOkB,QAAP,CAAgBM,KAAhB,CAAsBI,MAA3C;AACAD,kBAAeD,OAAf,GAAyB,QAAzB,CAP4E,CAS5E;;AACAZ,YAASS,yBAAT,CAAmC1C,MAAnC,CAA0C8C,cAA1C;AACA,GA1BkI,CA2BnI;;;AACA,MAAG3B,OAAOkB,QAAP,CAAgBM,KAAhB,CAAsBK,QAAtB,IAAkCpJ,EAAE2I,QAAF,CAAWpB,OAAOkB,QAAP,CAAgBM,KAAhB,CAAsBK,QAAjC,CAArC,EAAiF;AAChF;AACAf,YAASS,yBAAT,CAAmCtC,MAAnC,CAA0C;AACzCyC,aAAS;AADgC,IAA1C;AAIA,OAAIC,iBAAiB3B,OAAOkB,QAAP,CAAgBM,KAAhB,CAAsBK,QAA3C;AACAF,kBAAeD,OAAf,GAAyB,UAAzB,CAPgF,CAShF;;AACAZ,YAASS,yBAAT,CAAmC1C,MAAnC,CAA0C8C,cAA1C;AACA,GAvCkI,CAwCnI;;;AACA,MAAG3B,OAAOkB,QAAP,CAAgBM,KAAhB,CAAsBM,QAAtB,IAAkCrJ,EAAE2I,QAAF,CAAWpB,OAAOkB,QAAP,CAAgBM,KAAhB,CAAsBM,QAAjC,CAArC,EAAiF;AAChF;AACAhB,YAASS,yBAAT,CAAmCtC,MAAnC,CAA0C;AACzCyC,aAAS;AADgC,IAA1C;AAIA,OAAIC,iBAAiB3B,OAAOkB,QAAP,CAAgBM,KAAhB,CAAsBM,QAA3C;AACAH,kBAAeD,OAAf,GAAyB,UAAzB,CAPgF,CAShF;;AACAZ,YAASS,yBAAT,CAAmC1C,MAAnC,CAA0C8C,cAA1C;AACA,GApDkI,CAqDnI;;;AACA,MAAG3B,OAAOkB,QAAP,CAAgBM,KAAhB,CAAsBO,OAAtB,IAAiCtJ,EAAE2I,QAAF,CAAWpB,OAAOkB,QAAP,CAAgBM,KAAhB,CAAsBO,OAAjC,CAApC,EAA+E;AAC9E;AACAjB,YAASS,yBAAT,CAAmCtC,MAAnC,CAA0C;AACzCyC,aAAS;AADgC,IAA1C;AAIA,OAAIC,iBAAiB3B,OAAOkB,QAAP,CAAgBM,KAAhB,CAAsBO,OAA3C;AACAJ,kBAAeD,OAAf,GAAyB,SAAzB,CAP8E,CAS9E;;AACAZ,YAASS,yBAAT,CAAmC1C,MAAnC,CAA0C8C,cAA1C;AACA,GAjEkI,CAkEnI;;;AACA,MAAG3B,OAAOkB,QAAP,CAAgBM,KAAhB,CAAsBQ,MAAtB,IAAgCvJ,EAAE2I,QAAF,CAAWpB,OAAOkB,QAAP,CAAgBM,KAAhB,CAAsBQ,MAAjC,CAAnC,EAA6E;AAC5E;AACAlB,YAASS,yBAAT,CAAmCtC,MAAnC,CAA0C;AACzCyC,aAAS;AADgC,IAA1C;AAIA,OAAIC,iBAAiB3B,OAAOkB,QAAP,CAAgBM,KAAhB,CAAsBQ,MAA3C;AACAL,kBAAeD,OAAf,GAAyB,kBAAzB,CAP4E,CAS5E;;AACAZ,YAASS,yBAAT,CAAmC1C,MAAnC,CAA0C8C,cAA1C;AACA;AACD;;AAGF,KAAIM,KAAKC,QAAQ,IAAR,CAAT;;AACA,KAAIC,UAAU,mCAAd;AACA,KAAIC,aAAa,yEAAjB;AAEAC,SAAQC,GAAR,CAAY,IAAZ,EAAiBhB,QAAQH,GAAR,CAAYoB,QAA7B,EAAsC,GAAtC,EAA0CjB,QAAQH,GAAR,CAAYqB,IAAtD;;AAEA,KAAIC,KAAKP,QAAQ,IAAR,CAAT;;AACAG,SAAQC,GAAR,CAAY,yBAAZ,EAAsCG,GAAGpH,IAAH,EAAtC,EAAgD,KAAhD,EAAuDoH,GAAGC,OAAH,EAAvD,EAAqE,KAArE,EAA4ED,GAAGE,QAAH,EAA5E;AAEA,KAAIC,YAAYtB,QAAQH,GAAR,CAAY0B,gBAAZ,IAAgC,GAAhC,GAAsC,IAAtC,GAA6C,KAA7D;AACAR,SAAQC,GAAR,CAAY,gBAAZ,EAA8BM,SAA9B,EAtH0B,CAyH1B;AACA;AACA;;AACA,UAASE,WAAT,GAAuB;AACtB,MAAIC,OAAO,YAAX;AACA,MAAIvL,IAAE,CAAN;;AACA,OAAKA,IAAI,CAAT,EAAYwL,QAAQ,GAApB,EAAyB,EAAEA,KAA3B,EAAkC;AAC7B,OAAIjF,KAAKgF,OAAKvL,CAAd;AACA,OAAIyL,QAAQnF,QAAQ/D,IAAR,CAAa,EAAb,EAAiBgE,EAAjB,CAAoBgC,GAApB,CAAwB,UAASmD,GAAT,EAAa;AAAC,WAAOA,GAAP;AAAY,IAAlD,CAAZ;;AAEA,OAAI;AAAEC,eAAWC,KAAKC,GAAL,CAAS,YAAUtF,EAAV,GAAa,OAAtB,EAA+B,EAA/B,CAAX;;AACT,QAAIoF,SAAS9K,IAAT,CAAciL,OAAd,CAAsB,CAAtB,EAAyBC,QAAzB,KAAsC,IAA1C,EAAgD;AAC/CzF,aAAQe,MAAR,CAAe;AAAEd,UAAIA,EAAN;AAAUC,gBAAUmF,SAAS9K,IAAT,CAAciL,OAAd,CAAsB,CAAtB,EAAyBC,QAA7C;AAAuDtF,YAAM,GAA7D;AAAkEC,YAAM,EAAxE;AAA4EG,cAAQ,IAApF;AAA0F1C,qBAAe,EAAzG;AAA6G2C,UAAI;AAAjH,MAAf;AACA;AACD,IAJG,CAKA,OAAMkF,CAAN,EAAS;AAACnB,YAAQC,GAAR,CAAY,UAAZ,EAAuBvE,EAAvB,EAA0B,IAA1B,EAA+ByF,CAA/B;AAAmC;AACjD;AACD;;AAGD,KAAI1F,QAAQ/D,IAAR,GAAe0J,KAAf,OAA2B,CAA/B,EAAkC;AACjC,MAAIC,uBAAuB,EAA3B,CADiC,CAEjC;;AACA5F,UAAQ9B,YAAR,CAAqB0H,oBAArB,EAA2C;AAAC3F,OAAI;AAACxC,cAAU;AAAX,IAAL;AAAwByC,aAAU;AAACzC,cAAU;AAAX,IAAlC;AAAoD0C,SAAM;AAAC1C,cAAU;AAAX,IAA1D;AAA4E2C,SAAM;AAAC3C,cAAU;AAAX,IAAlF;AAAoG4C,SAAM;AAAC5C,cAAU;AAAX,IAA1G;AAA4H6C,QAAK;AAAC7C,cAAU;AAAX,IAAjI;AAAmJ8C,WAAO;AAAC9C,cAAU;AAAX;AAA1J,GAA3C;AACGqC,YAAUiB,MAAV,CAAiB;AAAChB,UAAO;AAAR,GAAjB;AAAgCD,YAAUiB,MAAV,CAAiB;AAAChB,UAAO;AAAR,GAAjB;AAAgCD,YAAUiB,MAAV,CAAiB;AAAChB,UAAO;AAAR,GAAjB;AAAgCD,YAAUiB,MAAV,CAAiB;AAAChB,UAAO;AAAR,GAAjB;AAAgCD,YAAUiB,MAAV,CAAiB;AAAChB,UAAO;AAAR,GAAjB;AAAgCD,YAAUiB,MAAV,CAAiB;AAAChB,UAAO;AAAR,GAAjB;AAAgCD,YAAUiB,MAAV,CAAiB;AAAChB,UAAO;AAAR,GAAjB;AAAgCD,YAAUiB,MAAV,CAAiB;AAAChB,UAAO;AAAR,GAAjB;AAAgCD,YAAUiB,MAAV,CAAiB;AAAChB,UAAO;AAAR,GAAjB;AAAgCD,YAAUiB,MAAV,CAAiB;AAAChB,UAAO;AAAR,GAAjB;AAAgCD,YAAUiB,MAAV,CAAiB;AAAChB,UAAO;AAAR,GAAjB;AAChUtD,UAAQsE,MAAR,CAAe;AAAEpD,iBAAc,KAAhB;AAAuBN,uBAAoB,KAA3C;AAAkDK,oBAAiB,KAAnE;AAA0EE,sBAAmB,WAA7F;AAA0GI,aAAU,KAApH;AAA2HH,kBAAe;AAA1I,GAAf;AACHmC,UAAQe,MAAR,CAAe;AAAEd,OAAI,WAAN;AAAmBC,aAAU,QAA7B;AAAuCC,SAAM,GAA7C;AAAkDC,SAAM,mBAAxD;AAA6EG,WAAQ,KAArF;AAA4F1C,kBAAe,EAA3G;AAA+G2C,OAAI;AAAnH,GAAf;AACAR,UAAQe,MAAR,CAAe;AAAEd,OAAI,eAAN;AAAuBC,aAAU,WAAjC;AAA8CC,SAAM,cAApD;AAAoEC,SAAM,OAA1E;AAAmFG,WAAO,KAA1F;AAAiG1C,kBAAe,EAAhH;AAAoH2C,OAAI;AAAxH,GAAf;AACAR,UAAQe,MAAR,CAAe;AAAEd,OAAI,eAAN;AAAuBC,aAAU,MAAjC;AAAyCC,SAAM,GAA/C;AAAoDC,SAAM,OAA1D;AAAkEG,WAAQ,KAA1E;AAAiF1C,kBAAe,EAAhG;AAAoG2C,OAAI;AAAxG,GAAf;AACAR,UAAQe,MAAR,CAAe;AAAEd,OAAI,eAAN;AAAuBC,aAAU,WAAjC;AAA8CC,SAAM,GAApD;AAAyDC,SAAM,OAA/D;AAAwEG,WAAQ,KAAhF;AAAuF1C,kBAAe,EAAtG;AAA0G2C,OAAI;AAA9G,GAAf;AACAR,UAAQe,MAAR,CAAe;AAAEd,OAAI,eAAN;AAAuBC,aAAU,UAAjC;AAA6CC,SAAM,GAAnD;AAAwDC,SAAM,OAA9D;AAAuEG,WAAQ,KAA/E;AAAsF1C,kBAAe,EAArG;AAAyG2C,OAAI;AAA7G,GAAf;AACArC,kBAAgB4C,MAAhB,CAAuB;AAAE3C,QAAK,QAAP;AAAoByB,cAAW,GAA/B;AAAoCxB,SAAM,IAA1C;AAAgDC,SAAM,IAAtD;AAA4DC,SAAM,IAAlE;AAAwEC,SAAM,IAA9E;AAAoFC,SAAM,IAA1F;AAAgGC,SAAM,IAAtG;AAA4GC,SAAM,IAAlH;AAAwHC,SAAM,IAA9H;AAAoIC,SAAM,IAA1I;AAAgJC,UAAO,IAAvJ;AAA6JC,UAAO,IAApK;AAA0KC,UAAO,IAAjL;AAAuLC,UAAO,IAA9L;AAAoMC,UAAO,IAA3M;AAAiNC,UAAO,IAAxN;AAA8NC,UAAO,IAArO;AAA2OC,UAAO,IAAlP;AAAwPC,UAAO,IAA/P;AAAqQC,UAAO,IAA5Q;AAAkRC,UAAO,IAAzR;AAA+RC,UAAO,IAAtS;AAA4SC,UAAM,IAAlT;AAAwTC,UAAM,IAA9T;AAAoUC,UAAM;AAA1U,GAAvB;AACAzB,kBAAgB4C,MAAhB,CAAuB;AAAE3C,QAAK,SAAP;AAAoByB,cAAW,GAA/B;AAAoCxB,SAAM,IAA1C;AAAgDC,SAAM,IAAtD;AAA4DC,SAAM,IAAlE;AAAwEC,SAAM,IAA9E;AAAoFC,SAAM,IAA1F;AAAgGC,SAAM,IAAtG;AAA4GC,SAAM,IAAlH;AAAwHC,SAAM,IAA9H;AAAoIC,SAAM,IAA1I;AAAgJC,UAAO,IAAvJ;AAA6JC,UAAO,IAApK;AAA0KC,UAAO,IAAjL;AAAuLC,UAAO,IAA9L;AAAoMC,UAAO,IAA3M;AAAiNC,UAAO,IAAxN;AAA8NC,UAAO,IAArO;AAA2OC,UAAO,IAAlP;AAAwPC,UAAO,IAA/P;AAAqQC,UAAO,IAA5Q;AAAkRC,UAAO,IAAzR;AAA+RC,UAAO,IAAtS;AAA4SC,UAAM,IAAlT;AAAwTC,UAAM,IAA9T;AAAoUC,UAAM;AAA1U,GAAvB;AACAzB,kBAAgB4C,MAAhB,CAAuB;AAAE3C,QAAK,WAAP;AAAoByB,cAAW,GAA/B;AAAoCxB,SAAM,IAA1C;AAAgDC,SAAM,IAAtD;AAA4DC,SAAM,IAAlE;AAAwEC,SAAM,IAA9E;AAAoFC,SAAM,IAA1F;AAAgGC,SAAM,IAAtG;AAA4GC,SAAM,IAAlH;AAAwHC,SAAM,IAA9H;AAAoIC,SAAM,IAA1I;AAAgJC,UAAO,IAAvJ;AAA6JC,UAAO,IAApK;AAA0KC,UAAO,IAAjL;AAAuLC,UAAO,IAA9L;AAAoMC,UAAO,IAA3M;AAAiNC,UAAO,IAAxN;AAA8NC,UAAO,IAArO;AAA2OC,UAAO,IAAlP;AAAwPC,UAAO,IAA/P;AAAqQC,UAAO,IAA5Q;AAAkRC,UAAO,IAAzR;AAA+RC,UAAO,IAAtS;AAA4SC,UAAM,IAAlT;AAAwTC,UAAM,IAA9T;AAAoUC,UAAM;AAA1U,GAAvB;AACAzB,kBAAgB4C,MAAhB,CAAuB;AAAE3C,QAAK,SAAP;AAAoByB,cAAW,GAA/B;AAAoCxB,SAAM,IAA1C;AAAgDC,SAAM,IAAtD;AAA4DC,SAAM,IAAlE;AAAwEC,SAAM,IAA9E;AAAoFC,SAAM,IAA1F;AAAgGC,SAAM,IAAtG;AAA4GC,SAAM,IAAlH;AAAwHC,SAAM,IAA9H;AAAoIC,SAAM,IAA1I;AAAgJC,UAAO,IAAvJ;AAA6JC,UAAO,IAApK;AAA0KC,UAAO,IAAjL;AAAuLC,UAAO,IAA9L;AAAoMC,UAAO,IAA3M;AAAiNC,UAAO,IAAxN;AAA8NC,UAAO,IAArO;AAA2OC,UAAO,IAAlP;AAAwPC,UAAO,IAA/P;AAAqQC,UAAO,IAA5Q;AAAkRC,UAAO,IAAzR;AAA+RC,UAAO,IAAtS;AAA4SC,UAAM,IAAlT;AAAwTC,UAAM,IAA9T;AAAoUC,UAAM;AAA1U,GAAvB;AACAzB,kBAAgB4C,MAAhB,CAAuB;AAAE3C,QAAK,SAAP;AAAoByB,cAAW,GAA/B;AAAoCxB,SAAM,IAA1C;AAAgDC,SAAM,IAAtD;AAA4DC,SAAM,IAAlE;AAAwEC,SAAM,IAA9E;AAAoFC,SAAM,IAA1F;AAAgGC,SAAM,IAAtG;AAA4GC,SAAM,IAAlH;AAAwHC,SAAM,IAA9H;AAAoIC,SAAM,IAA1I;AAAgJC,UAAO,IAAvJ;AAA6JC,UAAO,IAApK;AAA0KC,UAAO,IAAjL;AAAuLC,UAAO,IAA9L;AAAoMC,UAAO,IAA3M;AAAiNC,UAAO,IAAxN;AAA8NC,UAAO,IAArO;AAA2OC,UAAO,IAAlP;AAAwPC,UAAO,IAA/P;AAAqQC,UAAO,IAA5Q;AAAkRC,UAAO,IAAzR;AAA+RC,UAAO,IAAtS;AAA4SC,UAAM,IAAlT;AAAwTC,UAAM,IAA9T;AAAoUC,UAAM;AAA1U,GAAvB;AACAzB,kBAAgB4C,MAAhB,CAAuB;AAAE3C,QAAK,QAAP;AAAoByB,cAAW,GAA/B;AAAoCxB,SAAM,IAA1C;AAAgDC,SAAM,IAAtD;AAA4DC,SAAM,IAAlE;AAAwEC,SAAM,IAA9E;AAAoFC,SAAM,IAA1F;AAAgGC,SAAM,IAAtG;AAA4GC,SAAM,IAAlH;AAAwHC,SAAM,IAA9H;AAAoIC,SAAM,IAA1I;AAAgJC,UAAO,IAAvJ;AAA6JC,UAAO,IAApK;AAA0KC,UAAO,IAAjL;AAAuLC,UAAO,IAA9L;AAAoMC,UAAO,IAA3M;AAAiNC,UAAO,IAAxN;AAA8NC,UAAO,IAArO;AAA2OC,UAAO,IAAlP;AAAwPC,UAAO,IAA/P;AAAqQC,UAAO,IAA5Q;AAAkRC,UAAO,IAAzR;AAA+RC,UAAO,IAAtS;AAA4SC,UAAM,IAAlT;AAAwTC,UAAM,IAA9T;AAAoUC,UAAM;AAA1U,GAAvB;AACAzB,kBAAgB4C,MAAhB,CAAuB;AAAE3C,QAAK,UAAP;AAAoByB,cAAW,GAA/B;AAAoCxB,SAAM,IAA1C;AAAgDC,SAAM,IAAtD;AAA4DC,SAAM,IAAlE;AAAwEC,SAAM,IAA9E;AAAoFC,SAAM,IAA1F;AAAgGC,SAAM,IAAtG;AAA4GC,SAAM,IAAlH;AAAwHC,SAAM,IAA9H;AAAoIC,SAAM,IAA1I;AAAgJC,UAAO,IAAvJ;AAA6JC,UAAO,IAApK;AAA0KC,UAAO,IAAjL;AAAuLC,UAAO,IAA9L;AAAoMC,UAAO,IAA3M;AAAiNC,UAAO,IAAxN;AAA8NC,UAAO,IAArO;AAA2OC,UAAO,IAAlP;AAAwPC,UAAO,IAA/P;AAAqQC,UAAO,IAA5Q;AAAkRC,UAAO,IAAzR;AAA+RC,UAAO,IAAtS;AAA4SC,UAAM,IAAlT;AAAwTC,UAAM,IAA9T;AAAoUC,UAAM;AAA1U,GAAvB;AACA;;AAID,KAAIkF,SAAJ,EAAe;AACd;AACA,MAAIe,MAAMzB,QAAQ,eAAR,CAAV;;AACAyB,MAAIC,KAAJ,CAAU,KAAV,EAHc,CAKd;;AACA,MAAIC,YAAY3B,QAAQ,iBAAR,CAAhB;;AACA,MAAI4B,UAAU,EAAd;AACA,MAAIC,aAAa,EAAjB,CARc,CAQO;;AACrB,MAAI,CAACF,UAAUG,UAAV,CAAqBD,UAArB,EAAiCD,OAAjC,CAAL,EAAgD;AAC1CzB,WAAQC,GAAR,CAAY,6BAAZ;AACAhB,WAAQ2C,IAAR,CAAa,CAAb;AACL;;AACD,MAAIC,UAAUL,UAAUM,IAAV,EAAd;AACA9B,UAAQC,GAAR,CAAY,yCAAyCwB,OAAzC,GAAmD,OAA/D,EAAwEI,QAAQE,WAAR,CAAoBC,OAApB,CAA4B,CAA5B,CAAxE,EAAuG,MAAvG,EAA+GH,QAAQI,QAAR,CAAiBD,OAAjB,CAAyB,CAAzB,CAA/G;AACA;;AAID,UAASE,WAAT,CAAqBC,KAArB,EAA4B;AACxB,MAAIC,QAAQD,QAAQ,CAAR,GAAY,CAAxB;AACAnC,UAAQC,GAAR,CAAY,wBAAZ,EAAsCmC,KAAtC;;AACA,MAAI7B,SAAJ,EAAe;AAAEe,OAAIe,OAAJ,CAAY,CAAZ,EAAcf,IAAIgB,MAAlB;AAA2BhB,OAAIiB,YAAJ,CAAiB,CAAjB,EAAmBH,KAAnB;AAA0BpC,WAAQC,GAAR,CAAY,iDAAZ;AAAgE;AACzI;;AAGD,UAASuC,gBAAT,CAA2B9G,EAA3B,EAA+B;AAC9B,MAAIG,OAAOJ,QAAQsC,OAAR,CAAgB;AAAErC,OAAIA;AAAN,GAAhB,EAA4BG,IAAvC;;AACA,MAAIA,QAAQ,OAAZ,EAAqB;AACb,OAAI;AACD,QAAIiF,WAAWC,KAAKC,GAAL,CAAS,YAAUtF,EAAV,GAAa,OAAtB,EAA+B,EAA/B,CAAf;;AACA,QAAIoF,SAAS9K,IAAT,KAAkB,IAAtB,EAA4B;AACrB;AACAyF,aAAQgB,MAAR,CAAe;AAACf,UAAIA;AAAL,MAAf,EAAyB;AAAC2B,YAAK;AAAEtB,YAAK+E,SAAS9K,IAAT,CAAciL,OAAd,CAAsB,CAAtB,EAAyBwB,QAAhC;AAA0CzG,eAAQ,IAAlD;AAAwDF,aAAMgF,SAAS9K,IAAT,CAAciL,OAAd,CAAsB,CAAtB,EAAyByB,WAAvF;AAAoG/G,iBAAUmF,SAAS9K,IAAT,CAAciL,OAAd,CAAsB,CAAtB,EAAyBC;AAAvI;AAAN,MAAzB;AACL,KAHF,MAGQ;AAAClB,aAAQC,GAAR,CAAY,yBAAZ,EAAsCvE,EAAtC;AAA2CD,aAAQgB,MAAR,CAAe;AAACf,UAAGA;AAAJ,MAAf,EAAwB;AAAC2B,YAAK;AAACrB,eAAQ;AAAT;AAAN,MAAxB;AAAkD;AAC/G,IANM,CAOP,OAAMmF,CAAN,EAAQ;AACPnB,YAAQC,GAAR,CAAY,yBAAZ,EAAsCvE,EAAtC;AACAD,YAAQgB,MAAR,CAAe;AAACf,SAAIA;AAAL,KAAf,EAAyB;AAAC2B,WAAK;AAAErB,cAAQ;AAAV;AAAN,KAAzB;AACA;AACG,GAdyB,CAgB/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEC,MAAIuE,aAAa1E,QAAQ,mBAAzB,EAA8C;AAC7C,OAAIgG,UAAUL,UAAUM,IAAV,EAAd;;AACA,OAAID,QAAQE,WAAR,CAAoBC,OAApB,CAA4B,CAA5B,MAAmC,KAAvC,EAA8C;AAC5C;AACAvG,YAAQgB,MAAR,CAAe;AAACf,SAAIA;AAAL,KAAf,EAAyB;AAAC2B,WAAK;AAAEtB,WAAK8F,QAAQI,QAAR,CAAiBD,OAAjB,CAAyB,CAAzB,CAAP;AAAoChG,cAAQ,IAA5C;AAAkDF,YAAM+F,QAAQE,WAAR,CAAoBC,OAApB,CAA4B,CAA5B;AAAxD;AAAN,KAAzB;AACD;AACD;AACD;;AAGD,UAASW,oBAAT,GAAiC;AAChC,MAAIC,QAAQC,SAASC,MAAT,CAAgB,GAAhB,CAAZ;AACA,MAAIC,UAAUF,SAASC,MAAT,CAAgB,IAAhB,CAAd;AACA,MAAIE,WAAWpJ,gBAAgBlC,IAAhB,CAAqB;AAAE4D,cAAW2H,SAASL,KAAT;AAAb,GAArB,EAAoDlF,GAApD,CAAwD,UAASpI,CAAT,EAAW;AAAC,UAAO,CAACA,EAAEwE,IAAH,EAAQxE,EAAEyE,IAAV,EAAezE,EAAE0E,IAAjB,EAAsB1E,EAAE2E,IAAxB,EAA6B3E,EAAE4E,IAA/B,EAAoC5E,EAAE6E,IAAtC,EAA2C7E,EAAE8E,IAA7C,EAAkD9E,EAAE+E,IAApD,EAAyD/E,EAAEgF,IAA3D,EAAgEhF,EAAEiF,KAAlE,EAAwEjF,EAAEkF,KAA1E,EAAgFlF,EAAEmF,KAAlF,EAAwFnF,EAAEoF,KAA1F,EAAgGpF,EAAEqF,KAAlG,EAAwGrF,EAAEsF,KAA1G,EAAgHtF,EAAEuF,KAAlH,EAAwHvF,EAAEwF,KAA1H,EAAgIxF,EAAEyF,KAAlI,EAAwIzF,EAAE0F,KAA1I,EAAgJ1F,EAAE2F,KAAlJ,EAAwJ3F,EAAE4F,KAA1J,EAAgK5F,EAAE6F,KAAlK,EAAwK7F,EAAE8F,KAA1K,EAAgL9F,EAAE+F,KAAlL,CAAP;AAAiM,GAArQ,EAAuQ,CAAvQ,EAA0Q4H,SAASF,OAAT,CAA1Q,CAAf;AACA,MAAI1J,oBAAoBnB,QAAQ6F,OAAR,CAAgB,EAAhB,EAAoB1E,iBAA5C;AACA,MAAII,WAAWvB,QAAQ6F,OAAR,CAAgB,EAAhB,EAAoBtE,QAAnC;AACA,MAAIyJ,eAAezH,QAAQsC,OAAR,CAAgB;AAAEpC,aAAUtC;AAAZ,GAAhB,EAAiDyC,IAApE;AACAkE,UAAQC,GAAR,CAAY,QAAZ,EAAqB2C,KAArB,EAA2B,aAA3B,EAAyCG,OAAzC,EAAiD,cAAjD,EAAgEC,QAAhE,EAAyE,uBAAzE,EAAkG3J,iBAAlG,EAAqH,cAArH,EAAoII,QAApI,EAA6I,kBAA7I,EAAiKyJ,YAAjK;;AACA,MAAKF,WAAWvJ,QAAZ,IAAyByJ,YAA7B,EAA2C;AACvChL,WAAQuE,MAAR,CAAe,EAAf,EAAmB;AAACY,UAAK;AAAEjE,mBAAc;AAAhB;AAAN,IAAnB;AACA8I,eAAY,IAAZ;AACD,GAHH,MAGS;AACLhK,WAAQuE,MAAR,CAAe,EAAf,EAAmB;AAACY,UAAK;AAAEjE,mBAAc;AAAhB;AAAN,IAAnB;AACA8I,eAAY,KAAZ;AACH;AACD;;AAID,KAAIiB,aAAajL,QAAQR,IAAR,CAAa,EAAb,EAAgB;AAACgF,UAAQ;AAACsB,QAAK,IAAN;AAAY7E,oBAAiB,IAA7B;AAAmCG,kBAAe;AAAlD;AAAT,EAAhB,EAAmF8J,cAAnF,CAAkG;AAClHC,WAAS,UAAUvF,EAAV,EAAcwF,CAAd,EAAiB;AACzB,OAAIA,EAAEnK,eAAF,KAAsB,IAA1B,EAAgC;AAC/B;AACA,QAAIoK,WAAWC,mBAAX,CAA+B,iBAA/B,CAAJ,EAAuD;AAAED,gBAAW3G,MAAX,CAAkB,iBAAlB;AAAsC,KAFhE,CAG/B;;;AACA2G,eAAWE,GAAX,CAAe;AAACC,WAAM,iBAAP;AAAyBC,eAAU,UAASC,MAAT,EAAiB;AAAC,aAAOA,OAAOC,KAAP,GAAeC,KAAf,CAAqB5L,QAAQ6F,OAAR,GAAkBzE,aAAvC,EAAsDyK,MAAtD,EAAP;AAAuE,MAA5H;AAA6HC,UAAKrB;AAAlI,KAAf;AACAzK,YAAQuE,MAAR,CAAe,EAAf,EAAmB;AAACY,WAAK;AAAEvE,0BAAoB;AAAtB;AAAN,KAAnB;AACA,IAND,MAMO;AAAC,QAAIyK,WAAWC,mBAAX,CAA+B,iBAA/B,CAAJ,EAAuD;AAAED,gBAAW3G,MAAX,CAAkB,iBAAlB;AAAsC;AAAC;AACxG,GATiH;AAUlHqH,SAAO,UAAUnG,EAAV,EAAcwF,CAAd,EAAiB;AAAC,OAAIA,EAAEY,eAAF,KAAsB,IAA1B,EAAgC;AAAChC,gBAAY,IAAZ;AAAmBhK,YAAQuE,MAAR,CAAe,EAAf,EAAmB;AAACY,WAAK;AAAEvE,0BAAoB;AAAtB;AAAN,KAAnB;AAA0D;AAAC;AAVtB,EAAlG,CAAjB;AAcA,KAAIqL,gBAAgBjM,QAAQR,IAAR,CAAa,EAAb,EAAgB;AAACgF,UAAQ;AAAC5D,uBAAoB;AAArB;AAAT,EAAhB,EAAsDsK,cAAtD,CAAqE;AACxFC,WAAS,UAAUvF,EAAV,EAAcwF,CAAd,EAAiB;AACzB;AACA,OAAIA,EAAExK,kBAAF,KAAyB,IAA7B,EAAmC;AAACoJ,gBAAY,IAAZ;AAAkBhK,YAAQuE,MAAR,CAAe,EAAf,EAAmB;AAACY,WAAK;AAAEjE,oBAAc;AAAhB;AAAN,KAAnB;AACrD,IADD,MACO;AAAE8I,gBAAY,KAAZ;AAAoBhK,YAAQuE,MAAR,CAAe,EAAf,EAAmB;AAACY,WAAK;AAAEjE,oBAAc,KAAhB;AAAuBD,uBAAiB;AAAxC;AAAN,KAAnB;AAA6E;AAC1G,GALuF;AAMxF8K,SAAO,UAAUnG,EAAV,EAAcwF,CAAd,EAAiB;AAAC,OAAIA,EAAExK,kBAAF,KAAyB,IAA7B,EAAoC;AAAEoJ,gBAAY,IAAZ;AAAmBhK,YAAQuE,MAAR,CAAe,EAAf,EAAmB;AAACY,WAAK;AAAEjE,oBAAc;AAAhB;AAAN,KAAnB;AAAoD;AAAC;AAN/C,EAArE,CAApB;AAUA,KAAI6C,KAAKR,QAAQ/D,IAAR,CAAa,EAAb,EAAgB;AAACgF,UAAQ;AAAChB,OAAI,IAAL;AAAWO,OAAI,IAAf;AAAqB3C,kBAAe;AAApC;AAAT,EAAhB,EAAqE8J,cAArE,CAAoF;AAC1FC,WAAS,UAAUvF,EAAV,EAAcwF,CAAd,EAAiB;AAC3B,OAAI5H,KAAKD,QAAQsC,OAAR,CAAgB;AAACC,SAAKF;AAAN,IAAhB,EAA2BpC,EAApC;;AACC,OAAID,QAAQsC,OAAR,CAAgB;AAACC,SAAKF;AAAN,IAAhB,EAA2B7B,EAA3B,KAAkC,IAAtC,EAA4C;AAC5C;AACA,QAAIsH,WAAWC,mBAAX,CAA+B9H,KAAI,eAAnC,CAAJ,EAAyD;AAAE6H,gBAAW3G,MAAX,CAAkBlB,KAAI,eAAtB;AAAwC,KAFvD,CAG5C;;;AACA6H,eAAWE,GAAX,CAAe;AACdC,WAAMhI,KAAG,eADK;AAEdiI,eAAU,UAASC,MAAT,EAAiB;AAAC,aAAOA,OAAOC,KAAP,GAAeC,KAAf,CAAqBrI,QAAQsC,OAAR,CAAgB;AAAErC,WAAIA;AAAN,OAAhB,EAA4BpC,aAAjD,EAAgEyK,MAAhE,EAAP;AAAiF,MAF/F;AAGdC,UAAK,YAAW;AAACxB,uBAAiB9G,EAAjB;AAAsB,aAAOA,KAAG,eAAV;AAA2B;AAHpD,KAAf;AAKC,IATD,MASO;AAAC,QAAI6H,WAAWC,mBAAX,CAA+B9H,KAAI,eAAnC,CAAJ,EAAyD;AAAE6H,gBAAW3G,MAAX,CAAkBlB,KAAI,eAAtB;AAAwC;AAAC;AAC7G,GAb2F;AAc5FuI,SAAO,UAAUnG,EAAV,EAAcwF,CAAd,EAAiB;AACvB,OAAI5H,KAAKD,QAAQsC,OAAR,CAAgB;AAACC,SAAKF;AAAN,IAAhB,EAA2BpC,EAApC;;AACA,OAAID,QAAQsC,OAAR,CAAgB;AAACC,SAAKF;AAAN,IAAhB,EAA2B7B,EAA3B,KAAiC,IAArC,EAA0C;AACxC+D,YAAQC,GAAR,CAAY,eAAZ,EAA6BqD,EAAE5H,EAA/B,EAAmC4H,EAAErH,EAArC,EAAyCqH,EAAEhK,aAA3C;AACAiK,eAAWE,GAAX,CAAe;AACdC,WAAMhI,KAAG,eADK;AAEdiI,eAAU,UAASC,MAAT,EAAiB;AAAC,aAAOA,OAAOC,KAAP,GAAeC,KAAf,CAAqBrI,QAAQsC,OAAR,CAAgB;AAAErC,WAAIA;AAAN,OAAhB,EAA4BpC,aAAjD,EAAgEyK,MAAhE,EAAP;AAAiF,MAF/F;AAGdC,UAAK,YAAW;AAACxB,uBAAiB9G,EAAjB;AAAsB,aAAOA,KAAG,eAAV;AAA2B;AAHpD,KAAf;AAKA;AACA;AAxByF,EAApF,CAAT;;AA4BA,UAAS0I,eAAT,CAA0BC,GAA1B,EAA+BvD,QAA/B,EAAyC;AACxC,MAAI8B,QAAQC,SAASC,MAAT,CAAgB,UAAhB,CAAZ;AACA,MAAIwB,SAAQ,EAAZ;AAAgB,MAAIC,QAAO,EAAX;AAAc,MAAIjI,WAAS,EAAb;;AAC3B,MAAIiE,SAAJ,EAAe;AAACgE,WAAQzE,UAAQ8C,KAAR,GAAc,MAAtB;AAA8B,GAA9C,MAAoD;AAAC2B,WAAQxE,UAAR;AAAoB,GAHpC,CAKxC;;;AACA,MAAIH,GAAG4E,UAAH,CAAcD,KAAd,CAAJ,EAA0B;AACnBD,YAAU1E,GAAG6E,YAAH,CAAgBF,KAAhB,EAAuBtM,QAAvB,GAAkClE,KAAlC,CAAwC,IAAxC,EAA8C2J,GAA9C,CAAkD,UAASmD,GAAT,EAAa;AAAE,WAAO;AAAE6D,QAAG7B,OAAOD,QAAO,GAAP,GAAY/B,IAAI9M,KAAJ,CAAU,GAAV,EAAe,CAAf,CAAnB,EAAqC,gBAArC,EAAuD4Q,IAAvD,EAAL;AAAoEC,QAAGrL,OAAOsH,IAAI9M,KAAJ,CAAU,GAAV,EAAe,EAAf,CAAP;AAAvE,KAAP;AAA2G,IAA5K,CAAD,CAAgLc,KAAhL,CAAsL,CAAtL,EAAwL,CAAC,CAAzL,CAAT;AACNyH,cAAWuI,MAAMP,MAAN,CAAX,CAFyB,CAGzB;;AACMpI,QAAKO,MAAL,CAAY;AAAC5C,SAAK+I;AAAN,IAAZ,EAA0B;AAAEvF,UAAM;AAACf,eAAUA;AAAX;AAAR,IAA1B,EAAwD;AAACgB,YAAQ,IAAT;AAAewH,WAAO;AAAtB,IAAxD;AACN,GALD,MAKQ;AAAC9E,WAAQC,GAAR,CAAY,kBAAZ,EAA+BsE,KAA/B;AAAuC;;AAEhD,MAAIzD,SAAS9K,IAAT,KAAkB,IAAtB,EAA4B;AAC3B,OAAImG,WAAW4I,MAAOnC,KAAP,EAAayB,GAAb,EAAiBvD,SAAS9K,IAAT,CAAciL,OAAd,CAAsB,CAAtB,EAAyB+D,KAA1C,EAAgD1I,QAAhD,CAAf,CAD2B,CAE5B;;AACOJ,QAAKO,MAAL,CAAY;AAAC5C,SAAK+I;AAAN,IAAZ,EAA0B;AAAEvF,UAAM;AAAClB,eAAUA;AAAX;AAAR,IAA1B,EAAwD;AAACmB,YAAQ,IAAT;AAAewH,WAAO;AAAtB,IAAxD;AACH,GAJJ,MAIU,CACT;AACE;AACH;;AAGD,UAASC,KAAT,CAAgBE,IAAhB,EAAqBZ,GAArB,EAAyBa,IAAzB,EAA8B5I,QAA9B,EAAwC;AACvC,MAAI6I,IAAI,EAAR;AAAY,MAAIC,KAAK,CAAT;AAAY,MAAIC,KAAK,CAAT;AAAY,MAAIlE,IAAIjF,KAAK6B,OAAL,CAAa;AAAClE,QAAKoL;AAAN,GAAb,CAAR;AAAmC,MAAIK,KAAG,CAAP;AAAU,MAAIC,KAAG,CAAP;AACjFvF,UAAQC,GAAR,CAAY,iBAAZ,EAA8B3D,SAASlH,MAAvC;;AAEA,MAAIkH,SAASlH,MAAT,GAAkB,CAAtB,EAAyB;AAACkQ,QAAKhJ,SAASA,SAASlH,MAAT,GAAgB,CAAzB,EAA4BsP,CAAjC;AAAoCa,QAAKjJ,SAASA,SAASlH,MAAT,GAAgB,CAAzB,EAA4BwP,CAAjC;AAAqC;;AACnG,MAAIzD,KAAKA,EAAEhF,QAAX,EAAsB;AACrBgF,KAAEhF,QAAF,CAAW3F,IAAX,CAAgB;AAACkO,OAAGL,GAAJ;AAASO,OAAG,CAAZ;AAAeM,UAAMA;AAArB,IAAhB;AACA/D,KAAEhF,QAAF,CAAWqJ,OAAX,CAAmB,UAASC,CAAT,EAAY;AAC9B,QAAIC,KAAKD,EAAEf,CAAX;AAAc,QAAIiB,KAAKF,EAAEP,IAAX;AAAiB,QAAIU,SAAS,CAACF,KAAGN,EAAJ,IAAQ,IAArB;;AAC/B,QAAIQ,UAAS,CAAT,IAAcD,KAAKN,EAAvB,EAA4B;AAACrF,aAAQC,GAAR,CAAY,UAAZ,EAAuB0F,EAAvB,EAA0B,KAA1B,EAAgCN,EAAhC,EAAmC,KAAnC,EAAyCK,EAAzC,EAA4C,KAA5C,EAAkDN,EAAlD;AAAuD;;;;AAEpF,QAAIQ,SAAS,CAAT,IAAeD,KAAKN,EAAN,IAAa,CAA/B,EAAmC;AAClC,SAAIT,IAAIiB,KAAKC,KAAL,CAAY,CAACH,KAAKN,EAAN,IAAU,IAAV,GAAeO,MAA3B,EAAmC,CAAnC,CAAR;;AACY,SAAIvB,QAAQiB,EAAZ,EAAgB;AAAE,UAAIC,MAAMX,CAAV,EAAa;AAACA,WAAKW,KAAKX,CAAV;AAAc,OAA5B,MAAkC;AAACA,WAAKW,KAAKX,CAAV;AAAc;AAAE;;AACrE5E,aAAQC,GAAR,CAAY,KAAZ,EAAkBoE,GAAlB,EAAsB,IAAtB,EAA2BiB,EAA3B,EAA8B,IAA9B,EAAmCC,EAAnC,EAAsC,GAAtC,EAA0CX,CAA1C,EAA4C,IAA5C,EAAiDe,EAAjD,EAAoD,IAApD,EAAyDN,EAAzD;AACZF,OAAE3O,IAAF,CAAO;AAACkO,SAAGgB,EAAJ;AAAQd,SAAGA,CAAX;AAAcM,YAAMS;AAApB,MAAP;AACA,KALD,MAKO;AAAC3F,aAAQC,GAAR,CAAY,oCAAZ,EAAkD2F,MAAlD,EAA0D,GAA1D,EAA+DD,KAAGN,EAAlE;AAAuE;;AAC/ED,SAAKM,EAAL;AAASL,SAAKM,EAAL;AACH,IAXP;AAYA,GAdD,MAcO;AAACR,KAAE3O,IAAF,CAAO;AAACkO,OAAGL,GAAJ;AAASO,OAAG,CAAZ;AAAeM,UAAMA;AAArB,IAAP;AAAqClF,WAAQC,GAAR,CAAY,2BAAZ,EAAyCoE,GAAzC;AAA+C;;AAC5F,SAAOc,CAAP;AACA;;AAGD,UAASN,KAAT,CAAeP,MAAf,EAAuB;AACnB,MAAIa,IAAI,EAAR;AAAY,MAAIC,KAAK,CAAT;AAAY,MAAIC,KAAK,CAAT;;AAC3B,MAAIf,MAAJ,EAAa;AACZA,UAAOkB,OAAP,CAAe,UAASlC,CAAT,EAAY;AAC1B,QAAIoC,KAAKpC,EAAEoB,CAAX;AAAc,QAAIiB,KAAKrC,EAAEsB,CAAX;AAAc,QAAIgB,SAASF,KAAGN,EAAhB;;AAC5B,QAAIQ,SAAS,CAAb,EAAgB;AACf,SAAIG,SAASF,KAAKC,KAAL,CAAY,CAACH,KAAKN,EAAN,IAAU,IAAV,GAAeO,MAAf,GAAsB,IAAlC,EAAwC,CAAxC,CAAb,CADe,CAEf;;AACAT,OAAE3O,IAAF,CAAO;AAACkO,SAAGgB,KAAG,IAAP;AAAad,SAAGmB;AAAhB,MAAP;AACA,KAJD,MAIO,CACE;AACC;;AACVX,SAAKM,EAAL;AAASL,SAAKM,EAAL;AACT,IAVD;AAWA,GAZD,MAYO;AAAC3F,WAAQC,GAAR,CAAY,iBAAZ;AAAgC;;AACxC,SAAOkF,CAAP;AACA;;AAGD,UAASa,SAAT,GAAsB;AACrB,MAAI3B,MAAMwB,KAAKI,KAAL,CAAYpD,SAAS8B,IAAT,EAAZ,CAAV;AACA,MAAIjJ,KAAKD,QAAQsC,OAAR,CAAgB;AAAClC,SAAM;AAAP,GAAhB,EAAiCH,EAA1C,CAFqB,CAGrB;;AACA,MAAIoF,WAAWC,KAAKC,GAAL,CAAS,YAAUtF,EAAV,GAAa,OAAtB,EAA+B,EAA/B,CAAf;AACAwK,aAAW9B,gBAAgBC,MAAI,IAApB,EAA0BvD,QAA1B,CAAX,EAAgD,KAAhD;AACA;;AAGD,KAAIqF,OAAO5C,WAAWE,GAAX,CAAe;AACzBC,QAAM,MADmB;AAEzBC,YAAU,UAASC,MAAT,EAAiB;AAAC,UAAOA,OAAOC,KAAP,GAAeC,KAAf,CAAqB,CAArB,EAAwBsC,MAAxB,EAAP;AAAyC,GAF5C;AAGzB;AACApC,OAAKgC;AAJoB,EAAf,CAAX;AASAzC,YAAW7E,MAAX,CAAkB;AAACuB,OAAK;AAAN,EAAlB;AAEAsD,YAAW8C,KAAX;AAEC,CAjYD;AAmYA1I,OAAOC,OAAP,CAAe;AACd,sBAAqB,UAASR,OAAT,EAAkB;AACtC,MAAG,CAAC3E,MAAM6N,OAAN,CAAc3I,OAAOrF,MAAP,EAAd,CAAJ,EAAoC;AACnC,SAAM,IAAIqF,OAAOE,KAAX,CAAiB,GAAjB,EAAsB,gBAAtB,CAAN;AACA;;AAED,MAAI0I,cAAc,EAAlB;AACA,MAAGnJ,QAAQoJ,QAAX,EAAqBD,YAAYC,QAAZ,GAAuBpJ,QAAQoJ,QAA/B;AACrB,MAAGpJ,QAAQqJ,KAAX,EAAkBF,YAAYE,KAAZ,GAAoBrJ,QAAQqJ,KAA5B;AAClB,MAAGrJ,QAAQsJ,QAAX,EAAqBH,YAAYG,QAAZ,GAAuBtJ,QAAQsJ,QAA/B;AACrB,MAAGtJ,QAAQuJ,OAAX,EAAoBJ,YAAYI,OAAZ,GAAsBvJ,QAAQuJ,OAA9B;AACpB,MAAGvJ,QAAQuJ,OAAR,IAAmBvJ,QAAQuJ,OAAR,CAAgBF,KAAtC,EAA6CF,YAAYE,KAAZ,GAAoBrJ,QAAQuJ,OAAR,CAAgBF,KAApC;AAE7ChI,WAASmI,UAAT,CAAoBL,WAApB;AACA,EAda;AAed,sBAAqB,UAASjO,MAAT,EAAiB8E,OAAjB,EAA0B;AAC9C;AACA,MAAG,EAAE3E,MAAM6N,OAAN,CAAc3I,OAAOrF,MAAP,EAAd,KAAkCA,UAAUqF,OAAOrF,MAAP,EAA9C,CAAH,EAAmE;AAClE,SAAM,IAAIqF,OAAOE,KAAX,CAAiB,GAAjB,EAAsB,gBAAtB,CAAN;AACA,GAJ6C,CAM9C;;;AACA,MAAG,CAACpF,MAAM6N,OAAN,CAAc3I,OAAOrF,MAAP,EAAd,CAAJ,EAAoC;AACnC,OAAIuO,OAAOzK,OAAOyK,IAAP,CAAYzJ,OAAZ,CAAX;;AACA,OAAGyJ,KAAKzR,MAAL,KAAgB,CAAhB,IAAqB,CAACgI,QAAQuJ,OAAjC,EAA0C;AACzC,UAAM,IAAIhJ,OAAOE,KAAX,CAAiB,GAAjB,EAAsB,gBAAtB,CAAN;AACA;AACD;;AAED,MAAI0I,cAAc,EAAlB;AACA,MAAGnJ,QAAQoJ,QAAX,EAAqBD,YAAYC,QAAZ,GAAuBpJ,QAAQoJ,QAA/B;AACrB,MAAGpJ,QAAQqJ,KAAX,EAAkBF,YAAYE,KAAZ,GAAoBrJ,QAAQqJ,KAA5B;AAClB,MAAGrJ,QAAQsJ,QAAX,EAAqBH,YAAYG,QAAZ,GAAuBtJ,QAAQsJ,QAA/B;AACrB,MAAGtJ,QAAQuJ,OAAX,EAAoBJ,YAAYI,OAAZ,GAAsBvJ,QAAQuJ,OAA9B;AAEpB,MAAGvJ,QAAQuJ,OAAR,IAAmBvJ,QAAQuJ,OAAR,CAAgBF,KAAtC,EAA6CF,YAAYE,KAAZ,GAAoBrJ,QAAQuJ,OAAR,CAAgBF,KAApC;AAC7C,MAAGrJ,QAAQ0J,KAAX,EAAkBP,YAAYO,KAAZ,GAAoB1J,QAAQ0J,KAA5B;;AAElB,MAAGP,YAAYE,KAAf,EAAsB;AACrB,OAAIA,QAAQF,YAAYE,KAAxB;AACA,UAAOF,YAAYE,KAAnB;AACA,OAAIM,WAAWtO,MAAMsF,OAAN,CAAc,KAAKzF,MAAnB,CAAf;;AACA,OAAGyO,SAASC,MAAT,IAAmB,CAACD,SAASC,MAAT,CAAgBtP,IAAhB,CAAqB,UAASuP,IAAT,EAAe;AAAE,WAAOA,KAAKC,OAAL,IAAgBT,KAAvB;AAA+B,IAArE,CAAvB,EAA+F;AAC9FF,gBAAYS,MAAZ,GAAqB,CAAC;AAAEE,cAAST;AAAX,KAAD,CAArB;AACA;AACD;;AAED,MAAIC,WAAW,EAAf;;AACA,MAAGH,YAAYG,QAAf,EAAyB;AACxBA,cAAWH,YAAYG,QAAvB;AACA,UAAOH,YAAYG,QAAnB;AACA;;AAED,MAAGH,WAAH,EAAgB;AACf,QAAI,IAAI3Q,GAAR,2CAAe2Q,WAAf,GAA4B;AAC3B,QAAIvR,MAAMuR,YAAY3Q,GAAZ,CAAV;;AACA,QAAGQ,EAAE2I,QAAF,CAAW/J,GAAX,CAAH,EAAoB;AACnB,UAAI,IAAIW,CAAR,2CAAaX,GAAb,GAAkB;AACjBuR,kBAAY3Q,MAAM,GAAN,GAAYD,CAAxB,IAA6BX,IAAIW,CAAJ,CAA7B;AACA;;AACD,YAAO4Q,YAAY3Q,GAAZ,CAAP;AACA;AACD;;AACD6C,SAAMgE,MAAN,CAAanE,MAAb,EAAqB;AAAE+E,UAAMkJ;AAAR,IAArB;AACA;;AAED,MAAGG,QAAH,EAAa;AACZjI,YAAS0I,WAAT,CAAqB7O,MAArB,EAA6BoO,QAA7B;AACA;AACD,EArEa;AAuEd,aAAY,UAAStJ,OAAT,EAAkB;AAC7B,OAAKgK,OAAL;AAEAC,QAAMC,IAAN,CAAWlK,OAAX;AACA;AA3Ea,CAAf;AA8EAqB,SAAS8I,YAAT,CAAsB,UAAUnK,OAAV,EAAmBoK,IAAnB,EAAyB;AAC9CA,MAAKV,KAAL,GAAa,CAAC,MAAD,CAAb;;AAEA,KAAG1J,QAAQuJ,OAAX,EAAoB;AACnBa,OAAKb,OAAL,GAAevJ,QAAQuJ,OAAvB;AACA;;AAED,KAAG,CAAClO,MAAMsF,OAAN,CAAc;AAAE+I,SAAO;AAAT,EAAd,CAAD,IAAsCU,KAAKV,KAAL,CAAWW,OAAX,CAAmB,OAAnB,IAA8B,CAAvE,EAA0E;AACzED,OAAKV,KAAL,GAAa,CAAC,OAAD,CAAb;AACC;;AAEF,QAAOU,IAAP;AACA,CAZD;AAcA/I,SAASiJ,oBAAT,CAA8B,UAASC,IAAT,EAAe;AAE5C;AACA,KAAGA,KAAKH,IAAL,IAAa/O,MAAMmP,QAAN,CAAeD,KAAKH,IAAL,CAAUxJ,GAAzB,EAA8B,SAA9B,CAAhB,EAA0D;AACzD,QAAM,IAAIL,OAAOE,KAAX,CAAiB,GAAjB,EAAsB,0BAAtB,CAAN;AACA;;AAEA,KAAGW,eAAemJ,KAAKH,IAApB,IAA4BG,KAAKH,IAAL,CAAUR,MAAtC,IAAgDW,KAAKH,IAAL,CAAUR,MAAV,CAAiB5R,MAAjE,IAA2E,CAACuS,KAAKH,IAAL,CAAUR,MAAV,CAAiB,CAAjB,EAAoBa,QAAnG,EAA8G;AAC7G,QAAM,IAAIlK,OAAOE,KAAX,CAAiB,GAAjB,EAAsB,sBAAtB,CAAN;AACA;;AAEF,QAAO,IAAP;AACA,CAZD;AAeApF,MAAMoE,MAAN,CAAaL,MAAb,CAAoB,UAASlE,MAAT,EAAiBhC,GAAjB,EAAsB;AACzC,KAAGA,IAAI0Q,MAAJ,IAAc1Q,IAAI0Q,MAAJ,CAAW,CAAX,CAAd,IAA+B1Q,IAAI0Q,MAAJ,CAAW,CAAX,EAAcE,OAAhD,EAAyD;AACxD5Q,MAAIqQ,OAAJ,GAAcrQ,IAAIqQ,OAAJ,IAAe,EAA7B;AACArQ,MAAIqQ,OAAJ,CAAYF,KAAZ,GAAoBnQ,IAAI0Q,MAAJ,CAAW,CAAX,EAAcE,OAAlC;AACA,EAHD,MAGO;AACN;AACA,MAAG5Q,IAAIwR,QAAP,EAAiB;AAChB;AACA,OAAGxR,IAAIwR,QAAJ,CAAa1I,MAAb,IAAuB9I,IAAIwR,QAAJ,CAAa1I,MAAb,CAAoBqH,KAA9C,EAAqD;AACpDnQ,QAAIqQ,OAAJ,GAAcrQ,IAAIqQ,OAAJ,IAAe,EAA7B;AACArQ,QAAIqQ,OAAJ,CAAYF,KAAZ,GAAoBnQ,IAAIwR,QAAJ,CAAa1I,MAAb,CAAoBqH,KAAxC;AACA,IAHD,MAGO;AACN;AACA,QAAGnQ,IAAIwR,QAAJ,CAAavI,MAAb,IAAuBjJ,IAAIwR,QAAJ,CAAavI,MAAb,CAAoBwI,WAA9C,EAA2D;AAC1D,SAAIxI,SAAS,IAAIyI,MAAJ,CAAW;AACvBC,eAAS,OADc;AAEvBC,eAAS;AAFc,MAAX,CAAb;AAKA3I,YAAO4I,YAAP,CAAoB;AACnBnP,YAAM,OADa;AAEnBoP,aAAO9R,IAAIwR,QAAJ,CAAavI,MAAb,CAAoBwI;AAFR,MAApB;;AAKA,SAAI;AACH,UAAIM,SAAS9I,OAAOiI,IAAP,CAAYc,SAAZ,CAAsB,EAAtB,CAAb;;AACA,UAAI7B,QAAQrQ,EAAEmS,SAAF,CAAYF,MAAZ,EAAoB;AAAEG,gBAAS;AAAX,OAApB,CAAZ;;AACA,UAAG,CAAC/B,KAAD,IAAU4B,OAAOjT,MAAjB,IAA2BgB,EAAEqS,QAAF,CAAWJ,OAAO,CAAP,CAAX,CAA9B,EAAqD;AACpD5B,eAAQ;AAAEA,eAAO4B,OAAO,CAAP;AAAT,QAAR;AACA;;AAED,UAAG5B,KAAH,EAAU;AACTnQ,WAAIqQ,OAAJ,GAAcrQ,IAAIqQ,OAAJ,IAAe,EAA7B;AACArQ,WAAIqQ,OAAJ,CAAYF,KAAZ,GAAoBA,MAAMA,KAA1B;AACA;AACD,MAXD,CAWE,OAAMtF,CAAN,EAAS;AACVnB,cAAQC,GAAR,CAAYkB,CAAZ;AACA;AACD,KAzBD,MAyBO;AACN;AACA,SAAG7K,IAAIwR,QAAJ,CAAatI,QAAb,IAAyBlJ,IAAIwR,QAAJ,CAAatI,QAAb,CAAsBkJ,YAAlD,EAAgE;AAC/DpS,UAAIqQ,OAAJ,GAAcrQ,IAAIqQ,OAAJ,IAAe,EAA7B;AACArQ,UAAIqQ,OAAJ,CAAYjD,IAAZ,GAAmBpN,IAAIwR,QAAJ,CAAatI,QAAb,CAAsBmJ,SAAtB,GAAkC,GAAlC,GAAwCrS,IAAIwR,QAAJ,CAAatI,QAAb,CAAsBoJ,QAAjF;AACAtS,UAAIqQ,OAAJ,CAAYF,KAAZ,GAAoBnQ,IAAIwR,QAAJ,CAAatI,QAAb,CAAsBkJ,YAA1C;AACA,MAJD,MAIO;AACN,UAAGpS,IAAIwR,QAAJ,CAAarI,QAAb,IAAyBnJ,IAAIwR,QAAJ,CAAarI,QAAb,CAAsBgH,KAAlD,EAAyD;AACxDnQ,WAAIqQ,OAAJ,GAAcrQ,IAAIqQ,OAAJ,IAAe,EAA7B;AACArQ,WAAIqQ,OAAJ,CAAYF,KAAZ,GAAoBnQ,IAAIwR,QAAJ,CAAarI,QAAb,CAAsBgH,KAA1C;AACA,OAHD,MAGO;AACN,WAAGnQ,IAAIwR,QAAJ,CAAapI,OAAb,IAAwBpJ,IAAIwR,QAAJ,CAAapI,OAAb,CAAqB+G,KAAhD,EAAuD;AACtDnQ,YAAIqQ,OAAJ,GAAcrQ,IAAIqQ,OAAJ,IAAe,EAA7B;AACArQ,YAAIqQ,OAAJ,CAAYF,KAAZ,GAAoBnQ,IAAIwR,QAAJ,CAAapI,OAAb,CAAqB+G,KAAzC;AACA,QAHD,MAGO;AACN,YAAGnQ,IAAIwR,QAAJ,CAAa,kBAAb,KAAoCxR,IAAIwR,QAAJ,CAAa,kBAAb,EAAiCd,MAArE,IAA+E1Q,IAAIwR,QAAJ,CAAa,kBAAb,EAAiCd,MAAjC,CAAwC5R,MAA1H,EAAkI;AACjIkB,aAAIqQ,OAAJ,GAAcrQ,IAAIqQ,OAAJ,IAAe,EAA7B;AACArQ,aAAIqQ,OAAJ,CAAYF,KAAZ,GAAoBnQ,IAAIwR,QAAJ,CAAa,kBAAb,EAAiCd,MAAjC,CAAwC,CAAxC,EAA2CE,OAA/D;AACA;AACD;AACD;AACD;AACD;AACD;AACD;AACD;AACD,CAhED;AAkEAzO,MAAMoE,MAAN,CAAaJ,MAAb,CAAoB,UAASnE,MAAT,EAAiBhC,GAAjB,EAAsB6G,UAAtB,EAAkCR,QAAlC,EAA4CS,OAA5C,EAAqD;AACxE,KAAGT,SAASU,IAAT,IAAiBV,SAASU,IAAT,CAAc2J,MAA/B,IAAyCrK,SAASU,IAAT,CAAc2J,MAAd,CAAqB5R,MAA9D,IAAwEuH,SAASU,IAAT,CAAc2J,MAAd,CAAqB,CAArB,EAAwBE,OAAnG,EAA4G;AAC3GvK,WAASU,IAAT,CAAcsJ,OAAd,CAAsBF,KAAtB,GAA8B9J,SAASU,IAAT,CAAc2J,MAAd,CAAqB,CAArB,EAAwBE,OAAtD;AACA;AACD,CAJD;AAMAzI,SAASoK,OAAT,CAAiB,UAAUlB,IAAV,EAAgB,CAEhC,CAFD;;AAIAlJ,SAASqK,IAAT,CAAcC,aAAd,GAA8B,UAAUX,KAAV,EAAiB;AAC9C,QAAOzK,OAAOqL,WAAP,CAAmB,oBAAoBZ,KAAvC,CAAP;AACA,CAFD;;AAIA3J,SAASqK,IAAT,CAActK,WAAd,GAA4B,UAAU4J,KAAV,EAAiB;AAC5C,QAAOzK,OAAOqL,WAAP,CAAmB,kBAAkBZ,KAArC,CAAP;AACA,CAFD,0H","sourcesContent":["var hasSpace = /\\s/\r\nvar hasSeparator = /[\\W_]/\r\nvar hasCamel = /([a-z][A-Z]|[A-Z][a-z])/\r\n\r\n/**\r\n * Remove any starting case from a `string`, like camel or snake, but keep\r\n * spaces and punctuation that may be important otherwise.\r\n *\r\n * @param {String} string\r\n * @return {String}\r\n */\r\n\r\nthis.toNoCase = function(string) {\r\n  if (hasSpace.test(string)) return string.toLowerCase();\r\n  if (hasSeparator.test(string)) return (unseparate(string) || string).toLowerCase();\r\n  if (hasCamel.test(string)) return uncamelize(string).toLowerCase();\r\n  return string.toLowerCase();\r\n};\r\n\r\n/**\r\n * Separator splitter.\r\n */\r\n\r\nvar separatorSplitter = /[\\W_]+(.|$)/g\r\n\r\n/**\r\n * Un-separate a `string`.\r\n *\r\n * @param {String} string\r\n * @return {String}\r\n */\r\n\r\nfunction unseparate(string) {\r\n  return string.replace(separatorSplitter, function (m, next) {\r\n    return next ? ' ' + next : '';\r\n  });\r\n}\r\n\r\n/**\r\n * Camelcase splitter.\r\n */\r\n\r\nvar camelSplitter = /(.)([A-Z]+)/g\r\n\r\n/**\r\n * Un-camelcase a `string`.\r\n *\r\n * @param {String} string\r\n * @return {String}\r\n */\r\n\r\nfunction uncamelize(string) {\r\n  return string.replace(camelSplitter, function (m, previous, uppers) {\r\n    return previous + ' ' + uppers.toLowerCase().split('').join(' ');\r\n  });\r\n}\r\n\r\nthis.toSpaceCase = function(string) {\r\n  return toNoCase(string).replace(/[\\W_]+(.|$)/g, function (matches, match) {\r\n    return match ? ' ' + match : '';\r\n  }).trim();\r\n};\r\n\r\nthis.toCamelCase = function(string) {\r\n  return toSpaceCase(string).replace(/\\s(\\w)/g, function (matches, letter) {\r\n    return letter.toUpperCase();\r\n  });\r\n};\r\n\r\nthis.toSnakeCase = function(string) {\r\n  return toSpaceCase(string).replace(/\\s/g, '_');\r\n};\r\n\r\nthis.toKebabCase = function(string) {\r\n  return toSpaceCase(string).replace(/\\s/g, '-');\r\n};\r\n\r\nthis.toTitleCase = function(string) {\r\n  var str = toSpaceCase(string).replace(/\\s(\\w)/g, function(matches, letter) {\r\n    return \" \" + letter.toUpperCase();\r\n  });\r\n\r\n  if(str) {\r\n    str = str.charAt(0).toUpperCase() + str.slice(1);\r\n  }\r\n  return str;\r\n};\r\n","/*\r\n   Returns property value, where property name is given as path.\r\n\r\n   Example:\r\n\r\n       getPropertyValue(\"x.y.z\", { x: { y: { z: 123 } } }); // returns 123\r\n*/\r\n\r\nthis.getPropertyValue = function(propertyName, obj) {\r\n\tvar props = propertyName.split(\".\");\r\n\tvar res = obj;\r\n\tfor(var i = 0; i < props.length; i++) {\r\n\t\tres = res[props[i]];\r\n\t\tif(typeof res == \"undefined\") {\r\n\t\t\treturn res;\r\n\t\t}\r\n\t}\r\n\treturn res;\r\n};\r\n\r\n\r\n/* \r\n   converts properties in format { \"x.y\": \"z\" } to { x: { y: \"z\" } }\r\n*/\r\n\r\nthis.deepen = function(o) {\r\n\tvar oo = {}, t, parts, part;\r\n\tfor (var k in o) {\r\n\t\tt = oo;\r\n\t\tparts = k.split('.');\r\n\t\tvar key = parts.pop();\r\n\t\twhile (parts.length) {\r\n\t\t\tpart = parts.shift();\r\n\t\t\tt = t[part] = t[part] || {};\r\n\t\t}\r\n\t\tt[key] = o[k];\r\n\t}\r\n\treturn oo;\r\n};\r\n\r\n/*\r\n\tFunction converts array of objects to csv, tsv or json string\r\n\r\n\texportFields: list of object keys to export (array of strings)\r\n\tfileType: can be \"json\", \"csv\", \"tsv\" (string)\r\n*/\r\n\r\nthis.exportArrayOfObjects = function(data, exportFields, fileType) {\r\n\tdata = data || [];\r\n\tfileType = fileType || \"csv\";\r\n\texportFields = exportFields || [];\r\n\r\n\tvar str = \"\";\r\n\t// export to JSON\r\n\tif(fileType == \"json\") {\r\n\r\n\t\tvar tmp = [];\r\n\t\t_.each(data, function(doc) {\r\n\t\t\tvar obj = {};\r\n\t\t\t_.each(exportFields, function(field) {\r\n\t\t\t\tobj[field] = doc[field];\r\n\t\t\t});\r\n\t\t\ttmp.push(obj);\r\n\t\t});\r\n\r\n\t\tstr = JSON.stringify(tmp);\r\n\t}\r\n\r\n\t// export to CSV or TSV\r\n\tif(fileType == \"csv\" || fileType == \"tsv\") {\r\n\t\tvar columnSeparator = \"\";\r\n\t\tif(fileType == \"csv\") {\r\n\t\t\tcolumnSeparator = \",\";\r\n\t\t}\r\n\t\tif(fileType == \"tsv\") {\r\n\t\t\t// \"\\t\" object literal does not transpile correctly to coffeesctipt\r\n\t\t\tcolumnSeparator = String.fromCharCode(9);\r\n\t\t}\r\n\r\n\t\t_.each(exportFields, function(field, i) {\r\n\t\t\tif(i > 0) {\r\n\t\t\t\tstr = str + columnSeparator;\r\n\t\t\t}\r\n\t\t\tstr = str + \"\\\"\" + field + \"\\\"\";\r\n\t\t});\r\n\t\t//\\r does not transpile correctly to coffeescript\r\n\t\tstr = str + String.fromCharCode(13) + \"\\n\";\r\n\r\n\t\t_.each(data, function(doc) {\r\n\t\t\t_.each(exportFields, function(field, i) {\r\n\t\t\t\tif(i > 0) {\r\n\t\t\t\t\tstr = str + columnSeparator;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar value = getPropertyValue(field, doc) + \"\";\r\n\t\t\t\tvalue = value.replace(/\"/g, '\"\"');\r\n\t\t\t\tif(typeof(value) == \"undefined\")\r\n\t\t\t\t\tstr = str + \"\\\"\\\"\";\r\n\t\t\t\telse\r\n\t\t\t\t\tstr = str + \"\\\"\" + value + \"\\\"\";\r\n\t\t\t});\r\n\t\t\t//\\r does not transpile correctly to coffeescript\r\n\t\t\tstr = str + String.fromCharCode(13) + \"\\n\";\r\n\t\t});\r\n\t}\r\n\r\n\treturn str;\r\n};\r\n\r\n\r\nthis.mergeObjects = function(target, source) {\r\n\r\n\t/* Merges two (or more) objects,\r\n\tgiving the last one precedence */\r\n\r\n\tif(typeof target !== \"object\") {\r\n\t\ttarget = {};\r\n\t}\r\n\r\n\tfor(var property in source) {\r\n\r\n\t\tif(source.hasOwnProperty(property)) {\r\n\r\n\t\t\tvar sourceProperty = source[ property ];\r\n\r\n\t\t\tif(typeof sourceProperty === 'object') {\r\n\t\t\t\ttarget[property] = mergeObjects(target[property], sourceProperty);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\ttarget[property] = sourceProperty;\r\n\t\t}\r\n\t}\r\n\r\n\tfor(var a = 2, l = arguments.length; a < l; a++) {\r\n\t\tmergeObjects(target, arguments[a]);\r\n\t}\r\n\r\n\treturn target;\r\n};\r\n","this.escapeRegEx = function (string) {\r\n\treturn string.replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, \"\\\\$1\");\r\n}\r\n\r\nthis.replaceSubstrings = function(string, find, replace) {\r\n\treturn string.replace(new RegExp(escapeRegEx(find), 'g'), replace);\r\n};\r\n\r\nthis.joinStrings = function(stringArray, join) {\r\n\tvar sep = join || \", \";\r\n\tvar res = \"\";\r\n\t_.each(stringArray, function(str) {\r\n\t\tif(str) {\r\n\t\t\tif(res)\r\n\t\t\t\tres = res + sep;\r\n\t\t\tres = res + str;\r\n\t\t}\t\t\r\n\t});\r\n\treturn res;\r\n};\r\n\r\nthis.convertToSlug = function(text) {\r\n  return text.toString().toLowerCase()\r\n    .replace(/\\s+/g, '-')           // Replace spaces with -\r\n    .replace(/[^\\w\\-]+/g, '')       // Remove all non-word chars\r\n    .replace(/\\-\\-+/g, '-')         // Replace multiple - with single -\r\n    .replace(/^-+/, '')             // Trim - from start of text\r\n    .replace(/-+$/, '');            // Trim - from end of text\r\n};\r\n","this.Caldaia = new Mongo.Collection(\"caldaia\");\r\n\r\nthis.Caldaia.userCanInsert = function(userId, doc) {\r\n\treturn true;\r\n};\r\n\r\nthis.Caldaia.userCanUpdate = function(userId, doc) {\r\n\treturn userId && (doc.ownerId == userId || Users.isInRoles(userId, [\"admin\",\"user\"]));\r\n};\r\n\r\nthis.Caldaia.userCanRemove = function(userId, doc) {\r\n\treturn true;\r\n};\r\n\nthis.Schemas = this.Schemas || {};\r\n\r\nthis.Schemas.Caldaia = new SimpleSchema({\n\tstatoriscaldamento: {\n\t\tlabel: \"Stato Riscaldamento\",\n\t\ttype: Boolean,\n\t\toptional: true\n\t},\n\tstatotermostato: {\n\t\tlabel: \"Stato del Termostato\",\n\t\ttype: Boolean,\n\t\toptional: true\n\t},\n\tstatocaldaia: {\n\t\tlabel: \"Stato della Caldaia\",\n\t\ttype: Boolean,\n\t\toptional: true\n\t},\n\tsensoretermostato: {\n\t\tlabel: \"Sensore utilizzato dal termostato\",\n\t\ttype: String,\n\t\toptional: true\n\t},\n\ttimescheduler: {\n\t\tlabel: \"Intervallo letture\",\n\t\ttype: Number,\n\t\toptional: true,\n\t\tdefaultValue: 60\n\t},\n\tisteresi: {\n\t\tlabel: \"Isteresi\",\n\t\ttype: Number,\n\t\tdecimal: true,\n\t\toptional: true,\n\t\tdefaultValue: 0\n\t}\n});\r\n\r\nthis.Caldaia.attachSchema(this.Schemas.Caldaia);\r\n","this.Cronotermostato = new Mongo.Collection(\"cronotermostato\");\r\n\r\nthis.Cronotermostato.userCanInsert = function(userId, doc) {\r\n\treturn Users.isInRoles(userId, [\"admin\",\"user\"]);\r\n};\r\n\r\nthis.Cronotermostato.userCanUpdate = function(userId, doc) {\r\n\treturn userId && Users.isInRoles(userId, [\"admin\",\"user\"]);\r\n};\r\n\r\nthis.Cronotermostato.userCanRemove = function(userId, doc) {\r\n\treturn true;\r\n};\r\n\nthis.Schemas = this.Schemas || {};\r\n\r\nthis.Schemas.Cronotermostato = new SimpleSchema({\n\tday: {\n\t\ttype: String,\n\t\toptional: true\n\t},\n\th001: {\n\t\tlabel: \"00-01\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th012: {\n\t\tlabel: \"01-02\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th023: {\n\t\tlabel: \"02-03\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th034: {\n\t\tlabel: \"03-04\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th045: {\n\t\tlabel: \"04-05\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th056: {\n\t\tlabel: \"05-06\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th067: {\n\t\tlabel: \"06-07\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th078: {\n\t\tlabel: \"07-08\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th089: {\n\t\tlabel: \"08-09\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th0910: {\n\t\tlabel: \"09-10\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th1011: {\n\t\tlabel: \"10-11\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th1112: {\n\t\tlabel: \"11-12\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th1213: {\n\t\tlabel: \"12-13\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th1314: {\n\t\tlabel: \"13-14\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th1415: {\n\t\tlabel: \"14-15\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th1516: {\n\t\tlabel: \"15-16\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th1617: {\n\t\tlabel: \"16-17\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th1718: {\n\t\tlabel: \"17-18\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th1819: {\n\t\tlabel: \"18-19\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th1920: {\n\t\tlabel: \"19-20\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th2021: {\n\t\tlabel: \"20-21\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th2122: {\n\t\tlabel: \"21-22\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th2223: {\n\t\tlabel: \"22-23\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\th2324: {\n\t\tlabel: \"23-24\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\tdayofweek: {\n\t\tlabel: \"dayofweek\",\n\t\ttype: Number\n\t}\n});\r\n\r\nthis.Cronotermostato.attachSchema(this.Schemas.Cronotermostato);\r\n","this.Rangetemp = new Mongo.Collection(\"rangetemp\");\r\n\r\nthis.Rangetemp.userCanInsert = function(userId, doc) {\r\n\treturn true;\r\n};\r\n\r\nthis.Rangetemp.userCanUpdate = function(userId, doc) {\r\n\treturn true;\r\n};\r\n\r\nthis.Rangetemp.userCanRemove = function(userId, doc) {\r\n\treturn true;\r\n};\r\n\nthis.Schemas = this.Schemas || {};\r\n\r\nthis.Schemas.Rangetemp = new SimpleSchema({\n\tgrado: {\n\t\tlabel: \"grado\",\n\t\ttype: Number,\n\t\toptional: true\n\t}\n});\r\n\r\nthis.Rangetemp.attachSchema(this.Schemas.Rangetemp);\r\n","this.Sensori = new Mongo.Collection(\"sensori\");\r\n\r\nthis.Sensori.userCanInsert = function(userId, doc) {\r\n\treturn Users.isInRoles(userId, [\"admin\",\"user\"]);\r\n};\r\n\r\nthis.Sensori.userCanUpdate = function(userId, doc) {\r\n\treturn userId && Users.isInRoles(userId, [\"admin\",\"user\"]);\r\n};\r\n\r\nthis.Sensori.userCanRemove = function(userId, doc) {\r\n\treturn userId && Users.isInRoles(userId, [\"admin\"]);\r\n};\r\n\nthis.Schemas = this.Schemas || {};\r\n\r\nthis.Schemas.Sensori = new SimpleSchema({\n\tip: {\n\t\tlabel: \"IP\",\n\t\ttype: String\n\t},\n\tlocation: {\n\t\tlabel: \"Location\",\n\t\ttype: String,\n\t\toptional: true\n\t},\n\tnote: {\n\t\tlabel: \"Note\",\n\t\ttype: String,\n\t\toptional: true\n\t},\n\ttipo: {\n\t\tlabel: \"Tipo\",\n\t\ttype: String,\n\t\toptional: true\n\t},\n\ttemp: {\n\t\tlabel: \"Temperature\",\n\t\ttype: Number,\n\t\tdecimal: true,\n\t\toptional: true\n\t},\n\thum: {\n\t\tlabel: \"Humidity\",\n\t\ttype: Number,\n\t\tdecimal: true,\n\t\toptional: true\n\t},\n\tactive: {\n\t\tlabel: \"Attivo?\",\n\t\ttype: Boolean,\n\t\toptional: true\n\t},\n\ttimescheduler: {\n\t\tlabel: \"Schedulazione lettura dati  (secondi)\",\n\t\ttype: Number,\n\t\toptional: true\n\t},\n\ton: {\n\t\tlabel: \"Acceso?\",\n\t\ttype: Boolean,\n\t\toptional: true\n\t}\n});\r\n\r\nthis.Sensori.attachSchema(this.Schemas.Sensori);\r\n","this.Watt = new Mongo.Collection(\"watt\");\r\n\r\nthis.Watt.userCanInsert = function(userId, doc) {\r\n\treturn true;\r\n};\r\n\r\nthis.Watt.userCanUpdate = function(userId, doc) {\r\n\treturn true;\r\n};\r\n\r\nthis.Watt.userCanRemove = function(userId, doc) {\r\n\treturn true;\r\n};\r\n\nthis.Schemas = this.Schemas || {};\r\n\r\nthis.Schemas.Watt = new SimpleSchema({\n\tday: {\n\t\tlabel: \"day\",\n\t\ttype: String,\n\t\toptional: true\n\t},\n\tpulsearr: {\n\t\tlabel: \"pulsearr\",\n\t\ttype: [Object],\n\t\tblackbox: true,\n\t\toptional: true\n\t},\n\tsolararr: {\n\t\tlabel: \"solararr\",\n\t\ttype: [Object],\n\t\tblackbox: true,\n\t\toptional: true\n\t}\n});\r\n\r\nthis.Watt.attachSchema(this.Schemas.Watt);\r\n","Caldaia.allow({\r\n\tinsert: function (userId, doc) {\r\n\t\treturn false;\r\n\t},\r\n\r\n\tupdate: function (userId, doc, fields, modifier) {\r\n\t\treturn false;\r\n\t},\r\n\r\n\tremove: function (userId, doc) {\r\n\t\treturn false;\r\n\t}\r\n});\r\n\nCaldaia.before.insert(function(userId, doc) {\r\n\tdoc.createdAt = new Date();\r\n\tdoc.createdBy = userId;\r\n\tdoc.modifiedAt = doc.createdAt;\r\n\tdoc.modifiedBy = doc.createdBy;\r\n\r\n\t\n\tif(!doc.ownerId) doc.ownerId = userId;\r\n});\r\n\r\nCaldaia.before.update(function(userId, doc, fieldNames, modifier, options) {\r\n\tmodifier.$set = modifier.$set || {};\r\n\tmodifier.$set.modifiedAt = new Date();\r\n\tmodifier.$set.modifiedBy = userId;\r\n\r\n\t\r\n});\r\n\r\nCaldaia.before.upsert(function(userId, selector, modifier, options) {\r\n\tmodifier.$set = modifier.$set || {};\r\n\tmodifier.$set.modifiedAt = new Date();\r\n\tmodifier.$set.modifiedBy = userId;\r\n\r\n\t/*BEFORE_UPSERT_CODE*/\r\n});\r\n\r\nCaldaia.before.remove(function(userId, doc) {\r\n\t\r\n});\r\n\r\nCaldaia.after.insert(function(userId, doc) {\r\n\t\r\n});\r\n\r\nCaldaia.after.update(function(userId, doc, fieldNames, modifier, options) {\r\n\t\r\n});\r\n\r\nCaldaia.after.remove(function(userId, doc) {\r\n\t\r\n});\r\n","Cronotermostato.allow({\r\n\tinsert: function (userId, doc) {\r\n\t\treturn false;\r\n\t},\r\n\r\n\tupdate: function (userId, doc, fields, modifier) {\r\n\t\treturn false;\r\n\t},\r\n\r\n\tremove: function (userId, doc) {\r\n\t\treturn false;\r\n\t}\r\n});\r\n\nCronotermostato.before.insert(function(userId, doc) {\r\n\tdoc.createdAt = new Date();\r\n\tdoc.createdBy = userId;\r\n\tdoc.modifiedAt = doc.createdAt;\r\n\tdoc.modifiedBy = doc.createdBy;\r\n\r\n\t\n\tif(!doc.ownerId) doc.ownerId = userId;\r\n});\r\n\r\nCronotermostato.before.update(function(userId, doc, fieldNames, modifier, options) {\r\n\tmodifier.$set = modifier.$set || {};\r\n\tmodifier.$set.modifiedAt = new Date();\r\n\tmodifier.$set.modifiedBy = userId;\r\n\r\n\t\r\n});\r\n\r\nCronotermostato.before.upsert(function(userId, selector, modifier, options) {\r\n\tmodifier.$set = modifier.$set || {};\r\n\tmodifier.$set.modifiedAt = new Date();\r\n\tmodifier.$set.modifiedBy = userId;\r\n\r\n\t/*BEFORE_UPSERT_CODE*/\r\n});\r\n\r\nCronotermostato.before.remove(function(userId, doc) {\r\n\t\r\n});\r\n\r\nCronotermostato.after.insert(function(userId, doc) {\r\n\t\r\n});\r\n\r\nCronotermostato.after.update(function(userId, doc, fieldNames, modifier, options) {\r\n\t\r\n});\r\n\r\nCronotermostato.after.remove(function(userId, doc) {\r\n\t\r\n});\r\n","Rangetemp.allow({\r\n\tinsert: function (userId, doc) {\r\n\t\treturn false;\r\n\t},\r\n\r\n\tupdate: function (userId, doc, fields, modifier) {\r\n\t\treturn false;\r\n\t},\r\n\r\n\tremove: function (userId, doc) {\r\n\t\treturn false;\r\n\t}\r\n});\r\n\nRangetemp.before.insert(function(userId, doc) {\r\n\tdoc.createdAt = new Date();\r\n\tdoc.createdBy = userId;\r\n\tdoc.modifiedAt = doc.createdAt;\r\n\tdoc.modifiedBy = doc.createdBy;\r\n\r\n\t\n\tif(!doc.createdBy) doc.createdBy = userId;\r\n});\r\n\r\nRangetemp.before.update(function(userId, doc, fieldNames, modifier, options) {\r\n\tmodifier.$set = modifier.$set || {};\r\n\tmodifier.$set.modifiedAt = new Date();\r\n\tmodifier.$set.modifiedBy = userId;\r\n\r\n\t\r\n});\r\n\r\nRangetemp.before.upsert(function(userId, selector, modifier, options) {\r\n\tmodifier.$set = modifier.$set || {};\r\n\tmodifier.$set.modifiedAt = new Date();\r\n\tmodifier.$set.modifiedBy = userId;\r\n\r\n\t/*BEFORE_UPSERT_CODE*/\r\n});\r\n\r\nRangetemp.before.remove(function(userId, doc) {\r\n\t\r\n});\r\n\r\nRangetemp.after.insert(function(userId, doc) {\r\n\t\r\n});\r\n\r\nRangetemp.after.update(function(userId, doc, fieldNames, modifier, options) {\r\n\t\r\n});\r\n\r\nRangetemp.after.remove(function(userId, doc) {\r\n\t\r\n});\r\n","Sensori.allow({\r\n\tinsert: function (userId, doc) {\r\n\t\treturn false;\r\n\t},\r\n\r\n\tupdate: function (userId, doc, fields, modifier) {\r\n\t\treturn false;\r\n\t},\r\n\r\n\tremove: function (userId, doc) {\r\n\t\treturn false;\r\n\t}\r\n});\r\n\nSensori.before.insert(function(userId, doc) {\r\n\tdoc.createdAt = new Date();\r\n\tdoc.createdBy = userId;\r\n\tdoc.modifiedAt = doc.createdAt;\r\n\tdoc.modifiedBy = doc.createdBy;\r\n\r\n\t\n\tif(!doc.createdBy) doc.createdBy = userId;\r\n});\r\n\r\nSensori.before.update(function(userId, doc, fieldNames, modifier, options) {\r\n\tmodifier.$set = modifier.$set || {};\r\n\tmodifier.$set.modifiedAt = new Date();\r\n\tmodifier.$set.modifiedBy = userId;\r\n\r\n\t\r\n});\r\n\r\nSensori.before.upsert(function(userId, selector, modifier, options) {\r\n\tmodifier.$set = modifier.$set || {};\r\n\tmodifier.$set.modifiedAt = new Date();\r\n\tmodifier.$set.modifiedBy = userId;\r\n\r\n\t/*BEFORE_UPSERT_CODE*/\r\n});\r\n\r\nSensori.before.remove(function(userId, doc) {\r\n\t\r\n});\r\n\r\nSensori.after.insert(function(userId, doc) {\r\n\t\r\n});\r\n\r\nSensori.after.update(function(userId, doc, fieldNames, modifier, options) {\r\n\t\r\n});\r\n\r\nSensori.after.remove(function(userId, doc) {\r\n\t\r\n});\r\n","Watt.allow({\r\n\tinsert: function (userId, doc) {\r\n\t\treturn false;\r\n\t},\r\n\r\n\tupdate: function (userId, doc, fields, modifier) {\r\n\t\treturn false;\r\n\t},\r\n\r\n\tremove: function (userId, doc) {\r\n\t\treturn false;\r\n\t}\r\n});\r\n\nWatt.before.insert(function(userId, doc) {\r\n\tdoc.createdAt = new Date();\r\n\tdoc.createdBy = userId;\r\n\tdoc.modifiedAt = doc.createdAt;\r\n\tdoc.modifiedBy = doc.createdBy;\r\n\r\n\t\n\tif(!doc.createdBy) doc.createdBy = userId;\r\n});\r\n\r\nWatt.before.update(function(userId, doc, fieldNames, modifier, options) {\r\n\tmodifier.$set = modifier.$set || {};\r\n\tmodifier.$set.modifiedAt = new Date();\r\n\tmodifier.$set.modifiedBy = userId;\r\n\r\n\t\r\n});\r\n\r\nWatt.before.upsert(function(userId, selector, modifier, options) {\r\n\tmodifier.$set = modifier.$set || {};\r\n\tmodifier.$set.modifiedAt = new Date();\r\n\tmodifier.$set.modifiedBy = userId;\r\n\r\n\t/*BEFORE_UPSERT_CODE*/\r\n});\r\n\r\nWatt.before.remove(function(userId, doc) {\r\n\t\r\n});\r\n\r\nWatt.after.insert(function(userId, doc) {\r\n\t\r\n});\r\n\r\nWatt.after.update(function(userId, doc, fieldNames, modifier, options) {\r\n\t\r\n});\r\n\r\nWatt.after.remove(function(userId, doc) {\r\n\t\r\n});\r\n","Router.map(function () {\r\n\r\n});\r\n","Meteor.methods({\r\n\t\"caldaiaInsert\": function(data) {\r\n\t\tif(!Caldaia.userCanInsert(this.userId, data)) {\r\n\t\t\tthrow new Meteor.Error(403, \"Forbidden.\");\r\n\t\t}\r\n\r\n\t\treturn Caldaia.insert(data);\r\n\t},\r\n\r\n\t\"caldaiaUpdate\": function(id, data) {\r\n\t\tvar doc = Caldaia.findOne({ _id: id });\r\n\t\tif(!Caldaia.userCanUpdate(this.userId, doc)) {\r\n\t\t\tthrow new Meteor.Error(403, \"Forbidden.\");\r\n\t\t}\r\n\r\n\t\tCaldaia.update({ _id: id }, { $set: data });\r\n\t},\r\n\r\n\t\"caldaiaRemove\": function(id) {\r\n\t\tvar doc = Caldaia.findOne({ _id: id });\r\n\t\tif(!Caldaia.userCanRemove(this.userId, doc)) {\r\n\t\t\tthrow new Meteor.Error(403, \"Forbidden.\");\r\n\t\t}\r\n\r\n\t\tCaldaia.remove({ _id: id });\r\n\t}\r\n});\r\n","Meteor.methods({\r\n\t\"cronotermostatoInsert\": function(data) {\r\n\t\tif(!Cronotermostato.userCanInsert(this.userId, data)) {\r\n\t\t\tthrow new Meteor.Error(403, \"Forbidden.\");\r\n\t\t}\r\n\r\n\t\treturn Cronotermostato.insert(data);\r\n\t},\r\n\r\n\t\"cronotermostatoUpdate\": function(id, data) {\r\n\t\tvar doc = Cronotermostato.findOne({ _id: id });\r\n\t\tif(!Cronotermostato.userCanUpdate(this.userId, doc)) {\r\n\t\t\tthrow new Meteor.Error(403, \"Forbidden.\");\r\n\t\t}\r\n\r\n\t\tCronotermostato.update({ _id: id }, { $set: data });\r\n\t},\r\n\r\n\t\"cronotermostatoRemove\": function(id) {\r\n\t\tvar doc = Cronotermostato.findOne({ _id: id });\r\n\t\tif(!Cronotermostato.userCanRemove(this.userId, doc)) {\r\n\t\t\tthrow new Meteor.Error(403, \"Forbidden.\");\r\n\t\t}\r\n\r\n\t\tCronotermostato.remove({ _id: id });\r\n\t}\r\n});\r\n","Meteor.methods({\r\n\t\"rangetempInsert\": function(data) {\r\n\t\tif(!Rangetemp.userCanInsert(this.userId, data)) {\r\n\t\t\tthrow new Meteor.Error(403, \"Forbidden.\");\r\n\t\t}\r\n\r\n\t\treturn Rangetemp.insert(data);\r\n\t},\r\n\r\n\t\"rangetempUpdate\": function(id, data) {\r\n\t\tvar doc = Rangetemp.findOne({ _id: id });\r\n\t\tif(!Rangetemp.userCanUpdate(this.userId, doc)) {\r\n\t\t\tthrow new Meteor.Error(403, \"Forbidden.\");\r\n\t\t}\r\n\r\n\t\tRangetemp.update({ _id: id }, { $set: data });\r\n\t},\r\n\r\n\t\"rangetempRemove\": function(id) {\r\n\t\tvar doc = Rangetemp.findOne({ _id: id });\r\n\t\tif(!Rangetemp.userCanRemove(this.userId, doc)) {\r\n\t\t\tthrow new Meteor.Error(403, \"Forbidden.\");\r\n\t\t}\r\n\r\n\t\tRangetemp.remove({ _id: id });\r\n\t}\r\n});\r\n","Meteor.methods({\r\n\t\"sensoriInsert\": function(data) {\r\n\t\tif(!Sensori.userCanInsert(this.userId, data)) {\r\n\t\t\tthrow new Meteor.Error(403, \"Forbidden.\");\r\n\t\t}\r\n\r\n\t\treturn Sensori.insert(data);\r\n\t},\r\n\r\n\t\"sensoriUpdate\": function(id, data) {\r\n\t\tvar doc = Sensori.findOne({ _id: id });\r\n\t\tif(!Sensori.userCanUpdate(this.userId, doc)) {\r\n\t\t\tthrow new Meteor.Error(403, \"Forbidden.\");\r\n\t\t}\r\n\r\n\t\tSensori.update({ _id: id }, { $set: data });\r\n\t},\r\n\r\n\t\"sensoriRemove\": function(id) {\r\n\t\tvar doc = Sensori.findOne({ _id: id });\r\n\t\tif(!Sensori.userCanRemove(this.userId, doc)) {\r\n\t\t\tthrow new Meteor.Error(403, \"Forbidden.\");\r\n\t\t}\r\n\r\n\t\tSensori.remove({ _id: id });\r\n\t}\r\n});\r\n","Meteor.methods({\r\n\t\"wattInsert\": function(data) {\r\n\t\tif(!Watt.userCanInsert(this.userId, data)) {\r\n\t\t\tthrow new Meteor.Error(403, \"Forbidden.\");\r\n\t\t}\r\n\r\n\t\treturn Watt.insert(data);\r\n\t},\r\n\r\n\t\"wattUpdate\": function(id, data) {\r\n\t\tvar doc = Watt.findOne({ _id: id });\r\n\t\tif(!Watt.userCanUpdate(this.userId, doc)) {\r\n\t\t\tthrow new Meteor.Error(403, \"Forbidden.\");\r\n\t\t}\r\n\r\n\t\tWatt.update({ _id: id }, { $set: data });\r\n\t},\r\n\r\n\t\"wattRemove\": function(id) {\r\n\t\tvar doc = Watt.findOne({ _id: id });\r\n\t\tif(!Watt.userCanRemove(this.userId, doc)) {\r\n\t\t\tthrow new Meteor.Error(403, \"Forbidden.\");\r\n\t\t}\r\n\r\n\t\tWatt.remove({ _id: id });\r\n\t}\r\n});\r\n","Meteor.publish(\"caldaia_dettaglio\", function(caldaiaId) {\n\tif(Users.isInRoles(this.userId, [\"admin\",\"user\"])) {\n\t\treturn Caldaia.find({_id:caldaiaId}, {});\n\t}\n\treturn this.ready();\n});\n\nMeteor.publish(\"caldaia_lista\", function() {\n\tif(Users.isInRoles(this.userId, [\"admin\",\"user\"])) {\n\t\treturn Caldaia.find({}, {});\n\t}\n\treturn this.ready();\n});\n\n","Meteor.publish(\"cronotermostato_lista\", function() {\n\tif(Users.isInRoles(this.userId, [\"admin\",\"user\"])) {\n\t\treturn Cronotermostato.find({}, {sort:{dayofweek:1}});\n\t}\n\treturn this.ready();\n});\n\nMeteor.publish(\"cronotermostato_dettaglio\", function(cronotermostatoId) {\n\tif(Users.isInRoles(this.userId, [\"admin\",\"user\"])) {\n\t\treturn Cronotermostato.find({_id:cronotermostatoId}, {});\n\t}\n\treturn this.ready();\n});\n\n","Meteor.publish(\"rangetemp_lista\", function() {\n\treturn Rangetemp.find({}, {});\n});\n\n","Meteor.publish(\"sensori_lista\", function() {\n\treturn Sensori.find({}, {});\n});\n\nMeteor.publish(\"sensore_dettaglio\", function(sensoreId) {\n\treturn Sensori.find({_id:sensoreId}, {});\n});\n\nMeteor.publish(\"sensori_vuoto\", function() {\n\treturn Sensori.find({ip:null}, {});\n});\n\nMeteor.publish(\"sensori_temp_lista\", function() {\n\treturn Sensori.find({tipo:\"DHT22\"}, {});\n});\n\n","Meteor.publish(\"watt_id\", function(dayId) {\n\treturn Watt.find({day:dayId}, {});\n});\n\nMeteor.publish(\"watt_list\", function() {\n\treturn Watt.find({}, {});\n});\n\n","var verifyEmail = true;\r\n\r\nAccounts.config({ sendVerificationEmail: verifyEmail });\r\n\r\nMeteor.startup(function() {\r\n\t// read environment variables from Meteor.settings\r\n\tif(Meteor.settings && Meteor.settings.env && _.isObject(Meteor.settings.env)) {\r\n\t\tfor(var variableName in Meteor.settings.env) {\r\n\t\t\tprocess.env[variableName] = Meteor.settings.env[variableName];\r\n\t\t}\r\n\t}\r\n\r\n\t//\r\n\t// Setup OAuth login service configuration (read from Meteor.settings)\r\n\t//\r\n\t// Your settings file should look like this:\r\n\t//\r\n\t// {\r\n\t//     \"oauth\": {\r\n\t//         \"google\": {\r\n\t//             \"clientId\": \"yourClientId\",\r\n\t//             \"secret\": \"yourSecret\"\r\n\t//         },\r\n\t//         \"github\": {\r\n\t//             \"clientId\": \"yourClientId\",\r\n\t//             \"secret\": \"yourSecret\"\r\n\t//         }\r\n\t//     }\r\n\t// }\r\n\t//\r\n\tif(Accounts && Accounts.loginServiceConfiguration && Meteor.settings && Meteor.settings.oauth && _.isObject(Meteor.settings.oauth)) {\r\n\t\t// google\r\n\t\tif(Meteor.settings.oauth.google && _.isObject(Meteor.settings.oauth.google)) {\r\n\t\t\t// remove old configuration\r\n\t\t\tAccounts.loginServiceConfiguration.remove({\r\n\t\t\t\tservice: \"google\"\r\n\t\t\t});\r\n\r\n\t\t\tvar settingsObject = Meteor.settings.oauth.google;\r\n\t\t\tsettingsObject.service = \"google\";\r\n\r\n\t\t\t// add new configuration\r\n\t\t\tAccounts.loginServiceConfiguration.insert(settingsObject);\r\n\t\t}\r\n\t\t// github\r\n\t\tif(Meteor.settings.oauth.github && _.isObject(Meteor.settings.oauth.github)) {\r\n\t\t\t// remove old configuration\r\n\t\t\tAccounts.loginServiceConfiguration.remove({\r\n\t\t\t\tservice: \"github\"\r\n\t\t\t});\r\n\r\n\t\t\tvar settingsObject = Meteor.settings.oauth.github;\r\n\t\t\tsettingsObject.service = \"github\";\r\n\r\n\t\t\t// add new configuration\r\n\t\t\tAccounts.loginServiceConfiguration.insert(settingsObject);\r\n\t\t}\r\n\t\t// linkedin\r\n\t\tif(Meteor.settings.oauth.linkedin && _.isObject(Meteor.settings.oauth.linkedin)) {\r\n\t\t\t// remove old configuration\r\n\t\t\tAccounts.loginServiceConfiguration.remove({\r\n\t\t\t\tservice: \"linkedin\"\r\n\t\t\t});\r\n\r\n\t\t\tvar settingsObject = Meteor.settings.oauth.linkedin;\r\n\t\t\tsettingsObject.service = \"linkedin\";\r\n\r\n\t\t\t// add new configuration\r\n\t\t\tAccounts.loginServiceConfiguration.insert(settingsObject);\r\n\t\t}\r\n\t\t// facebook\r\n\t\tif(Meteor.settings.oauth.facebook && _.isObject(Meteor.settings.oauth.facebook)) {\r\n\t\t\t// remove old configuration\r\n\t\t\tAccounts.loginServiceConfiguration.remove({\r\n\t\t\t\tservice: \"facebook\"\r\n\t\t\t});\r\n\r\n\t\t\tvar settingsObject = Meteor.settings.oauth.facebook;\r\n\t\t\tsettingsObject.service = \"facebook\";\r\n\r\n\t\t\t// add new configuration\r\n\t\t\tAccounts.loginServiceConfiguration.insert(settingsObject);\r\n\t\t}\r\n\t\t// twitter\r\n\t\tif(Meteor.settings.oauth.twitter && _.isObject(Meteor.settings.oauth.twitter)) {\r\n\t\t\t// remove old configuration\r\n\t\t\tAccounts.loginServiceConfiguration.remove({\r\n\t\t\t\tservice: \"twitter\"\r\n\t\t\t});\r\n\r\n\t\t\tvar settingsObject = Meteor.settings.oauth.twitter;\r\n\t\t\tsettingsObject.service = \"twitter\";\r\n\r\n\t\t\t// add new configuration\r\n\t\t\tAccounts.loginServiceConfiguration.insert(settingsObject);\r\n\t\t}\r\n\t\t// meteor\r\n\t\tif(Meteor.settings.oauth.meteor && _.isObject(Meteor.settings.oauth.meteor)) {\r\n\t\t\t// remove old configuration\r\n\t\t\tAccounts.loginServiceConfiguration.remove({\r\n\t\t\t\tservice: \"meteor-developer\"\r\n\t\t\t});\r\n\r\n\t\t\tvar settingsObject = Meteor.settings.oauth.meteor;\r\n\t\t\tsettingsObject.service = \"meteor-developer\";\r\n\r\n\t\t\t// add new configuration\r\n\t\t\tAccounts.loginServiceConfiguration.insert(settingsObject);\r\n\t\t}\r\n\t}\r\n\r\n\t\nvar fs = require(\"fs\");\nvar csvpath = \"/var/www/123solar/data/invt1/csv/\";\nvar csvpathwin = \"C://Users//matteo//Documents//GitHub//Domoticasite//files//20170318.csv\";\n\nconsole.log('=>',process.env.ROOT_URL,':',process.env.PORT);\n\nvar os = require('os');\nconsole.log('=> Domoticasite Server:',os.type(),' - ', os.release(), ' - ', os.platform());\n\nvar Raspberry = process.env.WIRINGPI_GPIOMEM == '1' ? true : false;\nconsole.log('=> Raspberry? ', Raspberry);\n\n\n//\n// funzione TODO: feature per cercare nuovi sensori in rete e comunicarne l'esistenza all'amministratore per la loro  inclusione.\n//\nfunction find_sensor (){\n\tvar base = \"192.168.1.\";\n\tvar i=1;\n\tfor (i = 1; index < 254; ++index) {  \n      var ip = base+i;\n      var oldip = Sensori.find({}).ip.map(function(row){return row;});\n\n      try { response = HTTP.get(\"http://\"+ip+\"/json\", {});\n\t\t\tif (response.data.Sensors[0].TaskName !== null) {\n\t\t\t\tSensori.insert({ ip: ip, location: response.data.Sensors[0].TaskName, note: '-', tipo: '', active: true, timescheduler: 30, on: true});\n\t\t\t}\n\t\t}\n      catch(e) {console.log('no found',ip,' -',e);}  \n\t}  \n}\n\n\nif (Sensori.find().count() === 0) {\n\tvar VariantSensoriSchema = {};\n\t//Edit.insert({text: 'o'});\n\tSensori.attachSchema(VariantSensoriSchema, {ip: {optional: false}, location: {optional: true}, note: {optional: true}, tipo: {optional: true}, temp: {optional: true}, hum: {optional: true}, active:{optional: true} });\n    Rangetemp.insert({grado: '15'});Rangetemp.insert({grado: '16'});Rangetemp.insert({grado: '17'});Rangetemp.insert({grado: '18'});Rangetemp.insert({grado: '19'});Rangetemp.insert({grado: '20'});Rangetemp.insert({grado: '21'});Rangetemp.insert({grado: '22'});Rangetemp.insert({grado: '23'});Rangetemp.insert({grado: '24'});Rangetemp.insert({grado: '25'});\n    Caldaia.insert({ statocaldaia: false, statoriscaldamento: false, statotermostato: false, sensoretermostato: 'Cameretta', isteresi: '0.5', timescheduler: '60' });\n\tSensori.insert({ ip: '127.0.0.1', location: 'Garage', note: '-', tipo: 'DHT22 (on PIN 22)', active: false, timescheduler: 30, on: true});\n\tSensori.insert({ ip: '192.168.1.111', location: 'Contatore', note: 'Consumi Enel', tipo: 'pulse', active:false, timescheduler: 30, on: true});\n\tSensori.insert({ ip: '192.168.1.112', location: 'Sala', note: '-', tipo: 'DHT22',active: false, timescheduler: 30, on: true });\n\tSensori.insert({ ip: '192.168.1.113', location: 'Cameretta', note: '-', tipo: 'DHT22', active: false, timescheduler: 30, on: true});\n\tSensori.insert({ ip: '192.168.1.114', location: 'Ingresso', note: '-', tipo: 'DHT22', active: false, timescheduler: 30, on: true});\n\tCronotermostato.insert({ day: 'LunedÃ¬',    dayofweek: '1', h001: '18', h012: '18', h023: '18', h034: '18', h045: '18', h056: '18', h067: '18', h078: '18', h089: '18', h0910: '18', h1011: '18', h1112: '18', h1213: '18', h1314: '18', h1415: '18', h1516: '18', h1617: '18', h1718: '18', h1819: '18', h1920: '18', h2021: '18', h2122:'18', h2223:'18', h2324:'18' });\n\tCronotermostato.insert({ day: 'MartedÃ¬',   dayofweek: '2', h001: '18', h012: '18', h023: '18', h034: '18', h045: '18', h056: '18', h067: '18', h078: '18', h089: '18', h0910: '18', h1011: '18', h1112: '18', h1213: '18', h1314: '18', h1415: '18', h1516: '18', h1617: '18', h1718: '18', h1819: '18', h1920: '18', h2021: '18', h2122:'18', h2223:'18', h2324:'18' });\n\tCronotermostato.insert({ day: 'MercoledÃ¬', dayofweek: '3', h001: '18', h012: '18', h023: '18', h034: '18', h045: '18', h056: '18', h067: '18', h078: '18', h089: '18', h0910: '18', h1011: '18', h1112: '18', h1213: '18', h1314: '18', h1415: '18', h1516: '18', h1617: '18', h1718: '18', h1819: '18', h1920: '18', h2021: '18', h2122:'18', h2223:'18', h2324:'18' });\n\tCronotermostato.insert({ day: 'GiovedÃ¬',   dayofweek: '4', h001: '18', h012: '18', h023: '18', h034: '18', h045: '18', h056: '18', h067: '18', h078: '18', h089: '18', h0910: '18', h1011: '18', h1112: '18', h1213: '18', h1314: '18', h1415: '18', h1516: '18', h1617: '18', h1718: '18', h1819: '18', h1920: '18', h2021: '18', h2122:'18', h2223:'18', h2324:'18' });\n\tCronotermostato.insert({ day: 'VenerdÃ¬',   dayofweek: '5', h001: '18', h012: '18', h023: '18', h034: '18', h045: '18', h056: '18', h067: '18', h078: '18', h089: '18', h0910: '18', h1011: '18', h1112: '18', h1213: '18', h1314: '18', h1415: '18', h1516: '18', h1617: '18', h1718: '18', h1819: '18', h1920: '18', h2021: '18', h2122:'18', h2223:'18', h2324:'18' });\n\tCronotermostato.insert({ day: 'Sabato',    dayofweek: '6', h001: '18', h012: '18', h023: '18', h034: '18', h045: '18', h056: '18', h067: '18', h078: '18', h089: '18', h0910: '18', h1011: '18', h1112: '18', h1213: '18', h1314: '18', h1415: '18', h1516: '18', h1617: '18', h1718: '18', h1819: '18', h1920: '18', h2021: '18', h2122:'18', h2223:'18', h2324:'18' });\n\tCronotermostato.insert({ day: 'Domenica',  dayofweek: '7', h001: '18', h012: '18', h023: '18', h034: '18', h045: '18', h056: '18', h067: '18', h078: '18', h089: '18', h0910: '18', h1011: '18', h1112: '18', h1213: '18', h1314: '18', h1415: '18', h1516: '18', h1617: '18', h1718: '18', h1819: '18', h1920: '18', h2021: '18', h2122:'18', h2223:'18', h2324:'18' });\n}\n\n\n\nif (Raspberry) {\n\t//  import wpi from 'wiringpi-node';\n\tvar wpi = require('wiringpi-node');\n\twpi.setup('sys');\n  \n\t// import sensorLib from 'node-dht-sensor';\n\tvar sensorLib = require('node-dht-sensor');\n\tvar GpioPin = 22;\n\tvar sensorType = 22; // 11 for DHT11, 22 for DHT22 and AM2302\n\tif (!sensorLib.initialize(sensorType, GpioPin)) {\n       console.log('Failed to initialize sensor');\n       process.exit(1);\n\t}\n\tvar readout = sensorLib.read();\n\tconsole.log('Pin GPIO del sensore sul Raspberry: ' + GpioPin + \" - T:\", readout.temperature.toFixed(1),\"- U:\", readout.humidity.toFixed(1));\n} \n\n\n\nfunction switchOnOff(onoff) {\n    var state = onoff ? 1 : 0;\n    console.log('function switchOnOff: ', state);\n    if (Raspberry) { wpi.pinMode(7,wpi.OUTPUT); wpi.digitalWrite(7,state);console.log('function switchOnOff : Inviato segnale al relay');}      \n}\n\n\nfunction cron_read_sensor (ip) {\n\tvar tipo = Sensori.findOne({ ip: ip }).tipo;  \n\tif (tipo == 'DHT22') {\n         try {    \n            var response = HTTP.get(\"http://\"+ip+\"/json\", {});\n            if (response.data !== null) {\n                   //console.log(ip,\" (\" , response.data.Sensors[0].TaskName,\") - T:\",response.data.Sensors[0].Temperature ,\"- U:\", response.data.Sensors[0].Humidity);\n                   Sensori.update({ip: ip}, {$set:{ hum: response.data.Sensors[0].Humidity, active: true, temp: response.data.Sensors[0].Temperature, location: response.data.Sensors[0].TaskName}});\n             } else {console.log('Warning reading sensor:',ip); Sensori.update({ip:ip}, {$set:{active: false}}); }\n\t\t}\n\t\tcatch(e){\n\t\t\tconsole.log('Warning reading sensor:',ip);\n\t\t\tSensori.update({ip: ip}, {$set:{ active: false}});\n\t\t}\n     }\n  \n//\tif (tipo == 'pulse')\t{\n//\t\tHTTP.get(\"http://\"+ip+\"/json\", {}, function( error, response ) {\n//\t\t\t\tif ( error ) { console.log('Error:',ip, error); Sensori.update({ip: ip}, {$set:{ active: false}}); }\n//\t\t\t\telse { if (response.data !== null) {\n//\t\t\t\t\t\t\t\t\t\t\t\t\t// console.log(ip,\" (\" , response.data.Sensors[0].TaskName,\") - Count:\", response.data.Sensors[0].Total);\n//\t\t\t\t\t\t\t\t\t\t\t\t\tSensori.update({ip: ip}, {$set:{ active: true, location: response.data.Sensors[0].TaskName, note: 'counter:'+response.data.Sensors[0].Total}});\n//\t\t\t\t\t\t\t\t\t\t\t\t\t}\telse {console.log(ip,\" - No data !\"); Sensori.update({ip:ip}, {$set:{active: false}}); }\n//\t\t\t\t}\n//\t\t});\n//\t}\n  \n\tif (Raspberry && tipo == 'DHT22 (on PIN 22)') {\n\t\tvar readout = sensorLib.read();\n\t\tif (readout.temperature.toFixed(1) !== '0.0') {\n\t\t\t\t// console.log(ip,\" (Raspberry) - T:\", readout.temperature.toFixed(1),\"- U:\", readout.humidity.toFixed(1));\n\t\t\t\tSensori.update({ip: ip}, {$set:{ hum: readout.humidity.toFixed(1), active: true, temp: readout.temperature.toFixed(1)}});\n\t\t}\n\t}\n}\n\n\nfunction cron_cronotermostato () {\n\tvar today = moment().format('E');\n\tvar hournow = moment().format('HH');\n\tvar temphour = Cronotermostato.find({ dayofweek: parseInt(today)}).map(function(o){return [o.h001,o.h012,o.h023,o.h034,o.h045,o.h056,o.h067,o.h078,o.h089,o.h0910,o.h1011,o.h1112,o.h1213,o.h1314,o.h1415,o.h1516,o.h1617,o.h1718,o.h1819,o.h1920,o.h2021,o.h2122,o.h2223,o.h2324];})[0][parseInt(hournow)];\n\tvar sensoretermostato = Caldaia.findOne({}).sensoretermostato;\n\tvar isteresi = Caldaia.findOne({}).isteresi;\n\tvar temprilevata = Sensori.findOne({ location: sensoretermostato }).temp;\n\tconsole.log('today:',today,' - hournow:',hournow,' - temphour:',temphour,' - sensoretermostato:', sensoretermostato, ' - isteresi:',isteresi,' - temprilevata:', temprilevata);\n\tif ((temphour - isteresi) >= temprilevata) {\n\t\t\t\t\tCaldaia.update({}, {$set:{ statocaldaia: true}});\n\t\t\t\t\tswitchOnOff(true);\n\t\t\t} else {\n\t\t\t\t\tCaldaia.update({}, {$set:{ statocaldaia: false}});\n\t\t\t\t\tswitchOnOff(false);\n\t}\n}\n\n\n\nvar termostato = Caldaia.find({},{fields: {_id: true, statotermostato: true, timescheduler: true}}).observeChanges({\n\tchanged: function (id, s) {\n\t\tif (s.statotermostato === true) {\n\t\t\t//stop\n\t\t\tif (SyncedCron.nextScheduledAtDate('cronotermostato')) { SyncedCron.remove('cronotermostato');}\n\t\t\t//start\n\t\t\tSyncedCron.add({name: 'cronotermostato',schedule: function(parser) {return parser.recur().every(Caldaia.findOne().timescheduler).second();},job: cron_cronotermostato});\n\t\t\tCaldaia.update({}, {$set:{ statoriscaldamento: true }});\n\t\t} else {if (SyncedCron.nextScheduledAtDate('cronotermostato')) { SyncedCron.remove('cronotermostato');}}\n\t},  \n\tadded: function (id, s) {if (s.cronotermostato === true ){switchOnOff(true); Caldaia.update({}, {$set:{ statoriscaldamento: true }}); }}\n});\n\n\nvar riscaldamento = Caldaia.find({},{fields: {statoriscaldamento: true}}).observeChanges({\n\tchanged: function (id, s) {\n\t\t// workaround: per qulache motivo non funziona s.on s.ip\n\t\tif (s.statoriscaldamento === true) {switchOnOff(true);Caldaia.update({}, {$set:{ statocaldaia: true }});\n\t\t} else { switchOnOff(false); Caldaia.update({}, {$set:{ statocaldaia: false, statotermostato: false }});\t}\n\t},\n\tadded: function (id, s) {if (s.statoriscaldamento === true ) { switchOnOff(true); Caldaia.update({}, {$set:{ statocaldaia: true }}); }}\n});\n\n\nvar on = Sensori.find({},{fields: {ip: true, on: true, timescheduler: true}}).observeChanges({\n   changed: function (id, s) {\n\t\tvar ip = Sensori.findOne({_id: id}).ip;\n\t\t\tif (Sensori.findOne({_id: id}).on === true) {\n\t\t\t// shutdown\n\t\t\tif (SyncedCron.nextScheduledAtDate(ip +'_read sensors')) { SyncedCron.remove(ip +'_read sensors');}\n\t\t\t//activatesensor\n\t\t\tSyncedCron.add({\n\t\t\t\tname: ip+'_read sensors',\n\t\t\t\tschedule: function(parser) {return parser.recur().every(Sensori.findOne({ ip: ip }).timescheduler).second();},\n\t\t\t\tjob: function() {cron_read_sensor(ip); return ip+'_read sensors';}\n\t\t\t});\n\t\t\t} else {if (SyncedCron.nextScheduledAtDate(ip +'_read sensors')) { SyncedCron.remove(ip +'_read sensors');}}\n\t},\n\tadded: function (id, s) {\n\t\tvar ip = Sensori.findOne({_id: id}).ip;\n\t\tif (Sensori.findOne({_id: id}).on ===true){\n\t\t\t\tconsole.log(\"Added sensor:\", s.ip, s.on, s.timescheduler);\n\t\t\t\tSyncedCron.add({\n\t\t\t\t\tname: ip+'_read sensors',\n\t\t\t\t\tschedule: function(parser) {return parser.recur().every(Sensori.findOne({ ip: ip }).timescheduler).second();},\n\t\t\t\t\tjob: function() {cron_read_sensor(ip); return ip+'_read sensors';}\n\t\t\t\t});\n\t\t\t}\n   }\n });\n\n\nfunction cron_watt_after (now, response) {\n\tvar today = moment().format(\"YYYYMMDD\");\t\n\tvar matrix =[]; var csvfs ='';var solararr=[];\n    if (Raspberry) {csvfs = csvpath+today+\".csv\";} else {csvfs = csvpathwin;}\n  \n\t// Leggo immediatamente i valori de sensore per garantire il timeframe dei 5 minuti \t\t\n\tif (fs.existsSync(csvfs)) {      \n        matrix = (fs.readFileSync(csvfs).toString().split(\"\\n\").map(function(row){ return { x: moment(today +\" \"+ row.split(\",\")[0],\"YYYYMMDD HH:mm\").unix(), y: Number(row.split(\",\")[27])};})).slice(1,-1);\n\t\tsolararr = solar(matrix);\n\t\t//console.log('solarray',solarray);\n        Watt.update({day: today}, { $set: {solararr: solararr}},{upsert: true, multi: false});\n\t} else  {console.log('File not found: ',csvfs);} \n  \n\tif (response.data !== null) {       \n\t\tvar pulsearr = pulse (today,now,response.data.Sensors[0].Total,solararr);      \n\t//\tconsole.log('pulserray',pulsearr);      \n        Watt.update({day: today}, { $set: {pulsearr: pulsearr}},{upsert: true, multi: false});\n    } else { \n\t\t// console.log('Warning cron_watt (problem reading sensor):',today,' - ',response); \n\t\t\t}\n}\n\n\nfunction pulse (date,now,ytmp,solararr) {\n\tvar b = []; var x0 = 0; var y0 = 0; var e = Watt.findOne({day: date}); var sx=0; var sy=0;\n\tconsole.log('solararr.length',solararr.length);\n  \n\tif (solararr.length > 0) {sx = solararr[solararr.length-1].x; sy = solararr[solararr.length-1].y; }\n\tif (e && e.pulsearr)  {\n\t\te.pulsearr.push({x: now, y: 0, ytmp: ytmp });\n\t\te.pulsearr.forEach(function(p) {\n\t\t\tvar x1 = p.x; var y1 = p.ytmp; var deltat = (x1-x0)/1000;\n\t\t\tif (deltat <=0 || y1 < y0)  {console.log('!!!  y1:',y1,'y0:',y0,'x1:',x1,'x0:',x0);};\n          \n\t\t\tif (deltat > 0 && (y1 - y0) >= 0 ) {              \n\t\t\t\tvar y = Math.round(((y1 - y0)*3600/deltat),3);            \n                if (now === sx) { if (sy >= y) {y = (sy + y);} else {y = (sy - y);} }\n                console.log('now',now,'sx',sx,'sy',sy,'y',y,'y1',y1,'y0',y0);\n\t\t\t\tb.push({x: x1, y: y, ytmp: y1 });\n\t\t\t} else {console.log('Warning (pulse) deltat or (y1-y0):', deltat, '|', y1-y0);}           \n\t\t\tx0 = x1; y0 = y1;\n        });\n\t} else {b.push({x: now, y: 0, ytmp: ytmp }); console.log('First entry for pulsearr:', now);}  \n\treturn b; \n}\n\n\nfunction solar(matrix) {\n    var b = []; var x0 = 0; var y0 = 0;\n\tif (matrix)  {\n\t\tmatrix.forEach(function(s) {\n\t\t\tvar x1 = s.x; var y1 = s.y; var deltat = x1-x0;\n\t\t\tif (deltat > 0) {\n\t\t\t\tvar KwFull = Math.round(((y1 - y0)*3600/deltat*1000),3);\n\t\t\t\t//console.log('solar:',{x: x1*1000, y: KwFull });\n\t\t\t\tb.push({x: x1*1000, y: KwFull });\t\t\t\t\t\n\t\t\t} else {\n            //  console.log('Warning (solar) deltat:', deltat);\n            }\n\t\t\tx0 = x1; y0 = y1;\n\t\t});\n\t} else {console.log('No found MATRIX');}\n\treturn b;\n}\n\n\nfunction cron_watt () {\n\tvar now = Math.floor((moment().unix()));\n\tvar ip = Sensori.findOne({tipo: 'pulse'}).ip;\n\t// Leggo immediatamente i valori del sensore per garantire il timeframe dei 5 minuti  \n\tvar response = HTTP.get(\"http://\"+ip+\"/json\", {});\n\tsetTimeout(cron_watt_after(now*1000, response), 10000);\t\n}\n\n\nvar watt = SyncedCron.add({\n\tname: 'watt',\n\tschedule: function(parser) {return parser.recur().every(5).minute();},\n\t//schedule: function(parser) {return parser.recur().every(20).second();},\n\tjob: cron_watt\n});\n\n\n\nSyncedCron.config({log: false});\n\nSyncedCron.start();\n\r\n});\r\n\r\nMeteor.methods({\r\n\t\"createUserAccount\": function(options) {\r\n\t\tif(!Users.isAdmin(Meteor.userId())) {\r\n\t\t\tthrow new Meteor.Error(403, \"Access denied.\");\r\n\t\t}\r\n\r\n\t\tvar userOptions = {};\r\n\t\tif(options.username) userOptions.username = options.username;\r\n\t\tif(options.email) userOptions.email = options.email;\r\n\t\tif(options.password) userOptions.password = options.password;\r\n\t\tif(options.profile) userOptions.profile = options.profile;\r\n\t\tif(options.profile && options.profile.email) userOptions.email = options.profile.email;\r\n\r\n\t\tAccounts.createUser(userOptions);\r\n\t},\r\n\t\"updateUserAccount\": function(userId, options) {\r\n\t\t// only admin or users own profile\r\n\t\tif(!(Users.isAdmin(Meteor.userId()) || userId == Meteor.userId())) {\r\n\t\t\tthrow new Meteor.Error(403, \"Access denied.\");\r\n\t\t}\r\n\r\n\t\t// non-admin user can change only profile\r\n\t\tif(!Users.isAdmin(Meteor.userId())) {\r\n\t\t\tvar keys = Object.keys(options);\r\n\t\t\tif(keys.length !== 1 || !options.profile) {\r\n\t\t\t\tthrow new Meteor.Error(403, \"Access denied.\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar userOptions = {};\r\n\t\tif(options.username) userOptions.username = options.username;\r\n\t\tif(options.email) userOptions.email = options.email;\r\n\t\tif(options.password) userOptions.password = options.password;\r\n\t\tif(options.profile) userOptions.profile = options.profile;\r\n\r\n\t\tif(options.profile && options.profile.email) userOptions.email = options.profile.email;\r\n\t\tif(options.roles) userOptions.roles = options.roles;\r\n\r\n\t\tif(userOptions.email) {\r\n\t\t\tvar email = userOptions.email;\r\n\t\t\tdelete userOptions.email;\r\n\t\t\tvar userData = Users.findOne(this.userId);\r\n\t\t\tif(userData.emails && !userData.emails.find(function(mail) { return mail.address == email; })) {\r\n\t\t\t\tuserOptions.emails = [{ address: email }];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar password = \"\";\r\n\t\tif(userOptions.password) {\r\n\t\t\tpassword = userOptions.password;\r\n\t\t\tdelete userOptions.password;\r\n\t\t}\r\n\r\n\t\tif(userOptions) {\r\n\t\t\tfor(var key in userOptions) {\r\n\t\t\t\tvar obj = userOptions[key];\r\n\t\t\t\tif(_.isObject(obj)) {\r\n\t\t\t\t\tfor(var k in obj) {\r\n\t\t\t\t\t\tuserOptions[key + \".\" + k] = obj[k];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdelete userOptions[key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tUsers.update(userId, { $set: userOptions });\r\n\t\t}\r\n\r\n\t\tif(password) {\r\n\t\t\tAccounts.setPassword(userId, password);\r\n\t\t}\r\n\t},\r\n\r\n\t\"sendMail\": function(options) {\r\n\t\tthis.unblock();\r\n\r\n\t\tEmail.send(options);\r\n\t}\r\n});\r\n\r\nAccounts.onCreateUser(function (options, user) {\r\n\tuser.roles = [\"user\"];\r\n\r\n\tif(options.profile) {\r\n\t\tuser.profile = options.profile;\r\n\t}\r\n\r\n\tif(!Users.findOne({ roles: \"admin\" }) && user.roles.indexOf(\"admin\") < 0) {\n\t\tuser.roles = [\"admin\"];\n\t }\n\r\n\treturn user;\r\n});\r\n\r\nAccounts.validateLoginAttempt(function(info) {\r\n\r\n\t// reject users with role \"blocked\"\r\n\tif(info.user && Users.isInRole(info.user._id, \"blocked\")) {\r\n\t\tthrow new Meteor.Error(403, \"Your account is blocked.\");\r\n\t}\r\n\r\n  if(verifyEmail && info.user && info.user.emails && info.user.emails.length && !info.user.emails[0].verified ) {\r\n\t\t\tthrow new Meteor.Error(499, \"E-mail not verified.\");\r\n  }\r\n\r\n\treturn true;\r\n});\r\n\r\n\r\nUsers.before.insert(function(userId, doc) {\r\n\tif(doc.emails && doc.emails[0] && doc.emails[0].address) {\r\n\t\tdoc.profile = doc.profile || {};\r\n\t\tdoc.profile.email = doc.emails[0].address;\r\n\t} else {\r\n\t\t// oauth\r\n\t\tif(doc.services) {\r\n\t\t\t// google e-mail\r\n\t\t\tif(doc.services.google && doc.services.google.email) {\r\n\t\t\t\tdoc.profile = doc.profile || {};\r\n\t\t\t\tdoc.profile.email = doc.services.google.email;\r\n\t\t\t} else {\r\n\t\t\t\t// github e-mail\r\n\t\t\t\tif(doc.services.github && doc.services.github.accessToken) {\r\n\t\t\t\t\tvar github = new GitHub({\r\n\t\t\t\t\t\tversion: \"3.0.0\",\r\n\t\t\t\t\t\ttimeout: 5000\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tgithub.authenticate({\r\n\t\t\t\t\t\ttype: \"oauth\",\r\n\t\t\t\t\t\ttoken: doc.services.github.accessToken\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tvar result = github.user.getEmails({});\r\n\t\t\t\t\t\tvar email = _.findWhere(result, { primary: true });\r\n\t\t\t\t\t\tif(!email && result.length && _.isString(result[0])) {\r\n\t\t\t\t\t\t\temail = { email: result[0] };\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(email) {\r\n\t\t\t\t\t\t\tdoc.profile = doc.profile || {};\r\n\t\t\t\t\t\t\tdoc.profile.email = email.email;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch(e) {\r\n\t\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// linkedin email\r\n\t\t\t\t\tif(doc.services.linkedin && doc.services.linkedin.emailAddress) {\r\n\t\t\t\t\t\tdoc.profile = doc.profile || {};\r\n\t\t\t\t\t\tdoc.profile.name = doc.services.linkedin.firstName + \" \" + doc.services.linkedin.lastName;\r\n\t\t\t\t\t\tdoc.profile.email = doc.services.linkedin.emailAddress;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif(doc.services.facebook && doc.services.facebook.email) {\r\n\t\t\t\t\t\t\tdoc.profile = doc.profile || {};\r\n\t\t\t\t\t\t\tdoc.profile.email = doc.services.facebook.email;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif(doc.services.twitter && doc.services.twitter.email) {\r\n\t\t\t\t\t\t\t\tdoc.profile = doc.profile || {};\r\n\t\t\t\t\t\t\t\tdoc.profile.email = doc.services.twitter.email;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif(doc.services[\"meteor-developer\"] && doc.services[\"meteor-developer\"].emails && doc.services[\"meteor-developer\"].emails.length) {\r\n\t\t\t\t\t\t\t\t\tdoc.profile = doc.profile || {};\r\n\t\t\t\t\t\t\t\t\tdoc.profile.email = doc.services[\"meteor-developer\"].emails[0].address;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\nUsers.before.update(function(userId, doc, fieldNames, modifier, options) {\r\n\tif(modifier.$set && modifier.$set.emails && modifier.$set.emails.length && modifier.$set.emails[0].address) {\r\n\t\tmodifier.$set.profile.email = modifier.$set.emails[0].address;\r\n\t}\r\n});\r\n\r\nAccounts.onLogin(function (info) {\r\n\t\r\n});\r\n\r\nAccounts.urls.resetPassword = function (token) {\r\n\treturn Meteor.absoluteUrl('reset_password/' + token);\r\n};\r\n\r\nAccounts.urls.verifyEmail = function (token) {\r\n\treturn Meteor.absoluteUrl('verify_email/' + token);\r\n};\r\n"]}